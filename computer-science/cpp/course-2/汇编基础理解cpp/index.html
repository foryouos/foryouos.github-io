<!-- build time: Sun Jun 18 2023 23:52:21 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta http-equiv="X-UA-COMPATIBLE" content="IE=edge,chrome=1"><meta name="renderer" content="webkit"><link rel="icon" type="image/ico" sizes="32x32" href="/assets/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png"><meta name="baidu-site-verification" content="codeva-yIAXMzOV6I"><link rel="alternate" href="/rss.xml" title="瓶子的跋涉" type="application/rss+xml"><link rel="alternate" href="/atom.xml" title="瓶子的跋涉" type="application/atom+xml"><link rel="alternate" type="application/json" title="瓶子的跋涉" href="https://www.blog.foryouos.cn/feed.json"><meta name="referrer" content="no-referrer"><meta name="C++,后台服务器开发,QT,汇编,学习笔记,瓶子的跋涉,foryouos" content="foryouos & 瓶子的跋涉 & 编程笔记 博客"><meta name="瓶子的跋涉&foryouos&于喝水" content="瓶子的跋涉&foryouos&于喝水"><link rel="preconnect" href="https://lf9-cdn-tos.bytecdntp.com"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://unpkg.com"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.10"><script src="https://cdn.staticfile.org/vue/3.2.45/vue.global.prod.js"></script><link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css"><meta name="keywords" content="C++,汇编"><link rel="canonical" href="https://www.blog.foryouos.cn/computer-science/cpp/course-2/%E6%B1%87%E7%BC%96%E5%9F%BA%E7%A1%80%E7%90%86%E8%A7%A3cpp/"><title>汇编基础理解C++</title><meta name="generator" content="Hexo 6.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">汇编基础理解C++</h1><div class="meta"><span class="item" title="创建时间：2023-06-12 08:57:39"><span class="icon"><i class="ic i-calendar"></i></span><span class="text">发表于</span><time itemprop="dateCreated datePublished" datetime="2023-06-12T08:57:39+08:00">2023-06-12</time></span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i></span><span class="text">本文字数</span><span>19k</span><span class="text">字</span></span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i></span><span class="text">阅读时长</span><span>17 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span><span class="line"></span><span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">foryouos</a></li></ul><ul class="right" id="rightNav"><li class="item theme" @click="changeThemeByBtn"><i class="ic" :class="{'i-sun': !themeStatus,'i-moon': themeStatus}"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div class="pjax" id="imgs"><img src="https://i.imgtg.com/2023/03/09/Y05uF.jpg"></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"></use><use xlink:href="#gentle-wave" x="48" y="3"></use><use xlink:href="#gentle-wave" x="48" y="5"></use><use xlink:href="#gentle-wave" x="48" y="7"></use></g></svg></div><main><div class="inner"><div class="pjax" id="main"><div class="article wrap"><div class="breadcrumb" itemlistelement itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i><span><a href="/">首页</a></span><i class="ic i-angle-right"></i><span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/" itemprop="item" rel="index" title="分类于计算机科学"><span itemprop="name">计算机科学<meta itemprop="position" content="0"></span></a></span><i class="ic i-angle-right"></i><span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/cpp/" itemprop="item" rel="index" title="分类于C++"><span itemprop="name">C++<meta itemprop="position" content="1"></span></a></span><i class="ic i-angle-right"></i><span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/cpp/course-2/" itemprop="item" rel="index" title="分类于汇编与STl新特征"><span itemprop="name">汇编与STl新特征<meta itemprop="position" content="2"></span></a></span><i class="ic i-angle-right"></i></div><article class="post block" itemscope itemtype="http://schema.org/Article" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.blog.foryouos.cn/computer-science/cpp/course-2/%E6%B1%87%E7%BC%96%E5%9F%BA%E7%A1%80%E7%90%86%E8%A7%A3cpp/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/assets/avatar.jpg"><meta itemprop="name" content="YuHeShui"><meta itemprop="description" content="YuHeShui, 瓶子的跋涉 &amp; 编程笔记"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="瓶子的跋涉"></span><div class="body md" itemprop="articleBody"><h4 id="汇编的用途"><a class="anchor" href="#汇编的用途">#</a> 汇编的用途</h4><ul><li>掌握编程语言，代码的本质</li><li>破解</li><li>...</li></ul><h4 id="汇编"><a class="anchor" href="#汇编">#</a> 汇编</h4><blockquote><p>汇编语言与机器语言 <code>一一对应</code> ，每一条机器语言指令都有与之 <code>对应</code> 的汇编指令<br>高级语言可以通过编译得到汇编语言 / 机器语言，但 <code>汇编语言/机器语言</code> 几乎 <code>不</code> 可能还原成高级语言<br>Visual studio 在调试下右键 <code>转汇编</code></p></blockquote><figure class="highlight armasm"><figcaption data-lang="armasm"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token number">9</span>: 	int arrray<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> &#123; <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span> &#125;<span class="token comment">; //C++ 语言</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token operator">/</span><span class="token operator">/</span>汇编<span class="token operator">-</span>   地址  机器指令 汇编代码</pre></td></tr><tr><td data-num="3"></td><td><pre>00007FF7BA87191C C7 <span class="token number">45</span> <span class="token number">08</span> <span class="token number">01</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> mov         dword ptr <span class="token punctuation">[</span>arrray<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">1</span>  </pre></td></tr><tr><td data-num="4"></td><td><pre>00007FF7BA871923 C7 <span class="token number">45</span> 0C <span class="token number">02</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> mov         dword ptr <span class="token punctuation">[</span>rbp<span class="token operator">+</span>0Ch<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">2</span>  </pre></td></tr><tr><td data-num="5"></td><td><pre>00007FF7BA87192A C7 <span class="token number">45</span> <span class="token number">10</span> <span class="token number">03</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> mov         dword ptr <span class="token punctuation">[</span>rbp<span class="token operator">+</span>10h<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">3</span></pre></td></tr></table></figure><p><img data-src="https://mmbiz.qpic.cn/mmbiz_png/ORog4TEnkbu3LChB3TaEOicoSlNDYt5l3KibPGojpqMrcYctmJst3VrnXcgSJsvIqoicGFU9xSD1OYCXvico3nUibrw/0?wx_fmt=png" alt="高级语言转换过程" title="高级语言转换过程"></p><ul><li>编译型语言 (不依赖虚拟机)</li></ul><blockquote><p><code>C\C++\OC\Swift</code></p></blockquote><ul><li>脚本语言</li></ul><blockquote><p><code>Python\JS\PHP</code></p></blockquote><ul><li>编译型语言 (依赖虚拟机)</li></ul><blockquote><p>Java\Ruby</p></blockquote><h4 id="visual-studio-2022常用快捷键"><a class="anchor" href="#visual-studio-2022常用快捷键">#</a> Visual studio 2022 常用快捷键</h4><p><img data-src="https://mmbiz.qpic.cn/mmbiz_png/ORog4TEnkbu3LChB3TaEOicoSlNDYt5l3XkichAkR5mjxBliczsz07tNu0uLdsibK6KM5yhhiaNCK6CXLNMaZlSXMJw/0?wx_fmt=png" alt="常用快捷键" title="常用快捷键"></p><h4 id="为什么c支持函数重载"><a class="anchor" href="#为什么c支持函数重载">#</a> 为什么 C++ 支持函数重载</h4><blockquote><p>采用 <code>name mangling</code> 或者 <code>name decoration</code> 技术</p></blockquote><ul class="task-list"><li class="task-list-item"><input type="checkbox" id="cbx_0" checked disabled><label for="cbx_0">C++ 编译器默认会对 <code>符号名</code> (比如函数名) 进行改变，修饰</label></li><li class="task-list-item"><input type="checkbox" id="cbx_1" checked disabled><label for="cbx_1">重载时会生成多个不用的函数名，不同编译器 ( <code>MSVC,g++</code> ) 有不同的生成规则</label></li></ul><h4 id="默认参数"><a class="anchor" href="#默认参数">#</a> 默认参数</h4><ul><li>默认参数必须从右边开始</li><li>如果同时有声明，实现，默认参数只能放在函数声明中</li></ul><h4 id="指针存储函数名"><a class="anchor" href="#指针存储函数名">#</a> 指针存储函数名</h4><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> v1<span class="token punctuation">,</span><span class="token keyword">void</span><span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 函数指针</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token function">p</span><span class="token punctuation">(</span>v1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"test(int) - "</span><span class="token operator">&lt;&lt;</span> a <span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token keyword">void</span><span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">=</span> test<span class="token punctuation">;</span> <span class="token comment">// 指针存储函数名</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token function">p</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="13"></td><td><pre>	<span class="token function">func</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span>test<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="extern-c"><a class="anchor" href="#extern-c">#</a> extern &quot;C&quot;</h4><blockquote><p>被 extern &quot;C&quot; 修饰的代码会按照 <code>C</code> 语言的方式去编译，用在 C 和 C++ 混合开发</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span>  <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">extern</span> <span class="token string">"C"</span> <span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 使用 C 编译函数重载</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">extern</span> <span class="token string">"C"</span> <span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> v<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">// 或者</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">extern</span> <span class="token string">"C"</span>  <span class="token comment">// 使用大括号 C 编译内部</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>	<span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> v<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>	<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre>	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token comment">//“func”: 无法重载具有外部 "C" 链接的</span></pre></td></tr></table></figure><blockquote><p>如果函数同时有声明和实现，要让函数声明被 <code>extern &quot;C&quot;</code> 修饰，函数实现可以不修饰 (声明和实现都放，或者放声明处)</p></blockquote><h4 id="cpp使用c语言开源库"><a class="anchor" href="#cpp使用c语言开源库">#</a> <code>cpp</code> 使用 C 语言开源库</h4><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//math.c 文件</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">int</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token keyword">int</span> v1<span class="token punctuation">,</span> <span class="token keyword">int</span> v2<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token keyword">return</span> v1 <span class="token operator">+</span> v2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">int</span> <span class="token function">delta</span><span class="token punctuation">(</span><span class="token keyword">int</span> v1<span class="token punctuation">,</span> <span class="token keyword">int</span> v2<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token keyword">return</span> v1 <span class="token operator">-</span> v2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span>  <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">// 或者</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">extern</span> <span class="token string">"C"</span>  <span class="token comment">// 使用 c 来编译 c 函数</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token keyword">int</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token keyword">int</span> v1<span class="token punctuation">,</span> <span class="token keyword">int</span> v2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token keyword">int</span> <span class="token function">delta</span><span class="token punctuation">(</span><span class="token keyword">int</span> v1<span class="token punctuation">,</span> <span class="token keyword">int</span> v2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	cout <span class="token operator">&lt;&lt;</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>	cout <span class="token operator">&lt;&lt;</span> <span class="token function">delta</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre>	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token comment">/*</span></pre></td></tr><tr><td data-num="18"></td><td><pre>输出</pre></td></tr><tr><td data-num="19"></td><td><pre>30</pre></td></tr><tr><td data-num="20"></td><td><pre>10</pre></td></tr><tr><td data-num="21"></td><td><pre>*/</pre></td></tr></table></figure><h5 id="c文件写入头文件"><a class="anchor" href="#c文件写入头文件">#</a> <code>C</code> 文件写入头文件</h5><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//math.h</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">int</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token keyword">int</span> v1<span class="token punctuation">,</span> <span class="token keyword">int</span> v2<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token keyword">return</span> v1 <span class="token operator">+</span> v2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">int</span> <span class="token function">delta</span><span class="token punctuation">(</span><span class="token keyword">int</span> v1<span class="token punctuation">,</span> <span class="token keyword">int</span> v2<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token keyword">return</span> v1 <span class="token operator">-</span> v2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span>  <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">// 或者</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">extern</span> <span class="token string">"C"</span>  <span class="token comment">// 使用 c 来编译头文件</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"math.h"</span> </span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	cout <span class="token operator">&lt;&lt;</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	cout <span class="token operator">&lt;&lt;</span> <span class="token function">delta</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token comment">/*</span></pre></td></tr><tr><td data-num="17"></td><td><pre>输出</pre></td></tr><tr><td data-num="18"></td><td><pre>30</pre></td></tr><tr><td data-num="19"></td><td><pre>10</pre></td></tr><tr><td data-num="20"></td><td><pre>*/</pre></td></tr></table></figure><h4 id="宏定义"><a class="anchor" href="#宏定义">#</a> 宏定义</h4><ul><li>C<ins> 默认会定义宏 <code>#define _cplusplus</code> , 将此应用到都文件中判断是否为 C</ins> 环境来决定是否用 C 编译</li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">_cplusplus</span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">extern</span> <span class="token string">"C"</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span> <span class="token comment">//_cplusplus</span></span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token keyword">int</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token keyword">int</span> v1<span class="token punctuation">,</span> <span class="token keyword">int</span> v2<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>		<span class="token keyword">return</span> v1 <span class="token operator">+</span> v2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token keyword">int</span> <span class="token function">delta</span><span class="token punctuation">(</span><span class="token keyword">int</span> v1<span class="token punctuation">,</span> <span class="token keyword">int</span> v2<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>	<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>		<span class="token keyword">return</span> v1 <span class="token operator">-</span> v2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">_cplusplus</span></span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span> <span class="token comment">//_cplusplus</span></span></pre></td></tr></table></figure><h4 id="pragma-once"><a class="anchor" href="#pragma-once">#</a> <code>#pragma once</code></h4><ul><li>我们经常使用 <code>#ifndef,#define,#endif</code> 来防止头文件的内容被重复包含</li><li><code>#pragma once</code> 可以防止整个文件的内容被重复包含</li></ul><h4 id="内联函数与宏"><a class="anchor" href="#内联函数与宏">#</a> 内联函数与宏</h4><ul><li>内联函数和宏，都可以减少函数调用的开销</li><li>对比宏，内联函数多了语法检测和函数特性</li></ul><h4 id="c有些表达式可以被赋值"><a class="anchor" href="#c有些表达式可以被赋值">#</a> C++ 有些表达式可以被赋值</h4><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 赋值给了 a</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">(</span>a <span class="token operator">=</span> b<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 赋值给了 b</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">(</span>a <span class="token operator">&lt;</span> b <span class="token operator">?</span> a <span class="token operator">:</span> b<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h4 id="const"><a class="anchor" href="#const">#</a> <code>const</code></h4><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//const 的含义，const 修饰的是右边的内容</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">int</span> age <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> <span class="token keyword">int</span> <span class="token operator">*</span>p1 <span class="token operator">=</span> <span class="token operator">&amp;</span>age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">// 修饰 * p1 是常量，而 p1 地址可以改</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">int</span> <span class="token keyword">const</span> <span class="token operator">*</span>p2 <span class="token operator">=</span> <span class="token operator">&amp;</span>age<span class="token punctuation">;</span> <span class="token comment">// 同 p1,const 可以和类型互换位置</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">int</span> <span class="token operator">*</span> <span class="token keyword">const</span> p3 <span class="token operator">=</span> <span class="token operator">&amp;</span>age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">//const 修饰右边的内容 p3 是地址常量，不变，而 * p3 可以修改</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">const</span> <span class="token keyword">int</span> <span class="token operator">*</span> <span class="token keyword">const</span> p4 <span class="token operator">=</span> <span class="token operator">&amp;</span>age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">int</span> <span class="token keyword">const</span> <span class="token operator">*</span> <span class="token keyword">const</span> p5 <span class="token operator">=</span> <span class="token operator">&amp;</span>age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">//p4 和 p5 等价，地址和 * p4,*p5 都是常量不能变</span></pre></td></tr></table></figure><h4 id="引用"><a class="anchor" href="#引用">#</a> 引用</h4><ul><li>引用的本质就是弱化了的指针</li><li>一个引用占用一个指针的大小</li><li>在 C 语言中，使用指针 (Pointer) 可以间接获取，修改某个变量的值</li><li>在 C++ 中，使用引用 (Reference) 可以起到指针类似的功能<br><strong>注意</strong>:</li><li>引用相当于变量的别名 (基本数据类型，枚举，结构体，类，数组等，都可以有引用)</li><li>对引用做计算，就是对引用所指向的变量做计算</li><li>在定义的事后就必须初始化，一旦指向了某个变量，就不可以再改变，&quot;从一而终&quot;</li><li>可以利用引用初始化另一个引用，相当于某个变量的多个别名</li><li>不存在 (引用的引用，指向引用的指针，引用数组)</li><li>引用存在的价值：比指针更安全，函数返回值可以被赋值</li><li>const 必须卸载 &amp; 符号的左边，才能算常引用</li></ul><h5 id="const引用的特点"><a class="anchor" href="#const引用的特点">#</a> <code>const</code> 引用的特点</h5><ul><li>可以指向临时数据 (常量，表达式，函数返回值等)</li><li>可以指向不同类型的数据</li><li>作为函数参数时 (此规则也适用于 <code>const指针</code> )</li></ul><ul class="task-list"><li class="task-list-item"><input type="checkbox" id="cbx_2" checked disabled><label for="cbx_2">可以接受 <code>const</code> 和非 <code>cons</code> 实参 ( <code>非const</code> 引用，只能接受 <code>非const</code> 实参)</label></li><li class="task-list-item"><input type="checkbox" id="cbx_3" checked disabled><label for="cbx_3">可以跟非 const 引用构成重载</label></li></ul><ul><li>当常引用指向了 <code>不同类型</code> 的数据时，会产生 <code>临时变量</code> ，即引用指向的并不是初始化时的那个变量</li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">int</span> age <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token keyword">const</span> <span class="token keyword">long</span><span class="token operator">&amp;</span> aAge <span class="token operator">=</span> age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	age <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span></pre></td></tr></table></figure><figure class="highlight armasm"><figcaption data-lang="armasm"></figcaption><table><tr><td data-num="1"></td><td><pre>00007FF71556184D C7 <span class="token number">45</span> <span class="token number">04</span> 0A <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> mov         dword ptr <span class="token punctuation">[</span>rbp<span class="token operator">+</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span>0Ah  </pre></td></tr><tr><td data-num="2"></td><td><pre>	00007FF715561854 8B <span class="token number">45</span> <span class="token number">04</span>             mov         eax<span class="token punctuation">,</span>dword ptr <span class="token punctuation">[</span>rbp<span class="token operator">+</span><span class="token number">4</span><span class="token punctuation">]</span>  </pre></td></tr><tr><td data-num="3"></td><td><pre>	00007FF715561857 <span class="token number">89</span> <span class="token number">45</span> <span class="token number">44</span>             mov         dword ptr <span class="token punctuation">[</span>rbp<span class="token operator">+</span>44h<span class="token punctuation">]</span><span class="token punctuation">,</span>eax  </pre></td></tr><tr><td data-num="4"></td><td><pre>	00007FF71556185A <span class="token number">48</span> 8D <span class="token number">45</span> <span class="token number">44</span>          lea         rax<span class="token punctuation">,</span><span class="token punctuation">[</span>rbp<span class="token operator">+</span>44h<span class="token punctuation">]</span>  </pre></td></tr><tr><td data-num="5"></td><td><pre>	00007FF71556185E <span class="token number">48</span> <span class="token number">89</span> <span class="token number">45</span> <span class="token number">28</span>          mov         qword ptr <span class="token punctuation">[</span>rbp<span class="token operator">+</span>28h<span class="token punctuation">]</span><span class="token punctuation">,</span>rax  </pre></td></tr><tr><td data-num="6"></td><td><pre>	00007FF715561862 C7 <span class="token number">45</span> <span class="token number">04</span> 1E <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> mov         dword ptr <span class="token punctuation">[</span>rbp<span class="token operator">+</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span>1Eh</pre></td></tr></table></figure><hr><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span>  <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"math.h"</span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">/* </span></pre></td></tr><tr><td data-num="5"></td><td><pre>两者引用：机器码相同，汇编相同</pre></td></tr><tr><td data-num="6"></td><td><pre>*/</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token keyword">int</span> age <span class="token operator">=</span> <span class="token number">22</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token keyword">int</span><span class="token operator">*</span> p <span class="token operator">=</span> <span class="token operator">&amp;</span>age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token operator">*</span>p <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	cout <span class="token operator">&lt;&lt;</span> age <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>	<span class="token keyword">int</span><span class="token operator">&amp;</span> ref <span class="token operator">=</span> age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	ref <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	cout <span class="token operator">&lt;&lt;</span> age <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight armasm"><figcaption data-lang="armasm"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token number">9</span>: 	int<span class="token operator">&amp;</span> ref <span class="token operator">=</span> age<span class="token comment">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>00007FF759091914 <span class="token number">48</span> 8D <span class="token number">45</span> <span class="token number">04</span>          lea         rax<span class="token punctuation">,</span><span class="token punctuation">[</span>rbp<span class="token operator">+</span><span class="token number">4</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="3"></td><td><pre>00007FF759091918 <span class="token number">48</span> <span class="token number">89</span> <span class="token number">45</span> <span class="token number">28</span>          mov         qword ptr <span class="token punctuation">[</span>rbp<span class="token operator">+</span>28h<span class="token punctuation">]</span><span class="token punctuation">,</span>rax</pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token number">10</span>: 	ref <span class="token operator">=</span> <span class="token number">30</span><span class="token comment">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>00007FF75909191C <span class="token number">48</span> 8B <span class="token number">45</span> <span class="token number">28</span>          mov         rax<span class="token punctuation">,</span>qword ptr <span class="token punctuation">[</span>rbp<span class="token operator">+</span>28h<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="6"></td><td><pre>00007FF759091920 C7 <span class="token number">00</span> 1E <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span>    mov         dword ptr <span class="token punctuation">[</span>rax<span class="token punctuation">]</span><span class="token punctuation">,</span>1Eh</pre></td></tr><tr><td data-num="7"></td><td><pre>   <span class="token number">11</span>: 	int<span class="token operator">*</span> p <span class="token operator">=</span> <span class="token operator">&amp;</span>age<span class="token comment">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>00007FF6CD505214 <span class="token number">48</span> 8D <span class="token number">45</span> <span class="token number">04</span>          lea         rax<span class="token punctuation">,</span><span class="token punctuation">[</span>rbp<span class="token operator">+</span><span class="token number">4</span><span class="token punctuation">]</span>  </pre></td></tr><tr><td data-num="9"></td><td><pre>00007FF6CD505218 <span class="token number">48</span> <span class="token number">89</span> <span class="token number">45</span> <span class="token number">28</span>          mov         qword ptr <span class="token punctuation">[</span>rbp<span class="token operator">+</span>28h<span class="token punctuation">]</span><span class="token punctuation">,</span>rax  </pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token number">12</span>: 	<span class="token operator">*</span>p <span class="token operator">=</span> <span class="token number">25</span><span class="token comment">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>00007FF6CD50521C <span class="token number">48</span> 8B <span class="token number">45</span> <span class="token number">28</span>          mov         rax<span class="token punctuation">,</span>qword ptr <span class="token punctuation">[</span>rbp<span class="token operator">+</span>28h<span class="token punctuation">]</span>  </pre></td></tr><tr><td data-num="12"></td><td><pre>00007FF6CD505220 C7 <span class="token number">00</span> <span class="token number">19</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span>    mov         dword ptr <span class="token punctuation">[</span>rax<span class="token punctuation">]</span><span class="token punctuation">,</span>19h</pre></td></tr></table></figure><h5 id="常引用数组"><a class="anchor" href="#常引用数组">#</a> 常引用数组</h5><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 数组名 arr 起始就是数组的地址，也是数组首元素的地址</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 数组名 arr 可以看做是指向数组首元素的指针 (int *)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">// int (&amp;ref)[3] = arr;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">int</span> <span class="token operator">*</span> <span class="token keyword">const</span> <span class="token operator">&amp;</span>ref <span class="token operator">=</span> arr<span class="token punctuation">;</span> <span class="token comment">// 常量要用常引用</span></pre></td></tr></table></figure><h4 id="汇编语言"><a class="anchor" href="#汇编语言">#</a> 汇编语言</h4><h5 id="汇编语言的种类"><a class="anchor" href="#汇编语言的种类">#</a> 汇编语言的种类</h5><ul><li><code>8086</code> 汇编 ( <code>16bit</code> )</li><li><code>x86</code> 汇编（ <code>32bit</code> )</li><li><code>x64汇编(64bit)</code></li><li>ARM 回避那 (嵌入式，移动设备)</li><li>...</li><li><code>x64</code> 汇编根据编译器不同，两种书写格式</li></ul><blockquote><p><code>Intel</code> :<br>AT&amp;T</p></blockquote><h5 id="att汇编-vs-intel汇编"><a class="anchor" href="#att汇编-vs-intel汇编">#</a> AT&amp;T 汇编 VS Intel 汇编</h5><p><img data-src="https://mmbiz.qpic.cn/mmbiz_png/ORog4TEnkbu3LChB3TaEOicoSlNDYt5l3UxPJ64IgaEHgmkXITT6JSUialo3ibdNSMyia83jTyVdSpNp8N9S1N5Kibg/0?wx_fmt=png" alt="image-20230302073341484"></p><h4 id="寄存器与内存"><a class="anchor" href="#寄存器与内存">#</a> 寄存器与内存</h4><p>假设内存中有块红色内存空间的值是 3，现在想把它的值加 1，并将结果存储到蓝色内存空间</p><ul><li><code>cpu</code> 首先会将红色内存空间的值放到 <code>EAX</code> 寄存器中 <code>:mov eax</code> , 红色内存空间</li><li>然后让 <code>eax</code> 寄存器与 <code>1</code> 相加: <code>add eax,1</code></li><li>最后将值赋值给内存空间: <code>mov</code> 蓝色内存空间， <code>eax</code></li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	a <span class="token operator">=</span> a <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr></table></figure><figure class="highlight armasm"><figcaption data-lang="armasm"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token number">10</span>: 	int a <span class="token operator">=</span> <span class="token number">5</span><span class="token comment">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>00007FF6E7DA520D C7 <span class="token number">45</span> <span class="token number">04</span> <span class="token number">05</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> mov         dword ptr <span class="token punctuation">[</span>rbp<span class="token operator">+</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">5</span>  </pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token number">11</span>: 	a <span class="token operator">=</span> a <span class="token operator">+</span> <span class="token number">1</span><span class="token comment">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>00007FF6E7DA5214 8B <span class="token number">45</span> <span class="token number">04</span>             mov         eax<span class="token punctuation">,</span>dword ptr <span class="token punctuation">[</span>rbp<span class="token operator">+</span><span class="token number">4</span><span class="token punctuation">]</span>  </pre></td></tr><tr><td data-num="5"></td><td><pre>00007FF6E7DA5217 FF C0                inc         eax  </pre></td></tr><tr><td data-num="6"></td><td><pre>00007FF6E7DA5219 <span class="token number">89</span> <span class="token number">45</span> <span class="token number">04</span>             mov         dword ptr <span class="token punctuation">[</span>rbp<span class="token operator">+</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span>eax</pre></td></tr></table></figure><h4 id="x64寄存器register"><a class="anchor" href="#x64寄存器register">#</a> x64 寄存器 Register</h4><ul><li><code>RAX(包含EAX)\REX\RCX\RDX</code> ：通用寄存器</li><li><code>32bit:EAX\EBX\ECX\EDX</code> ：通用寄存器</li><li><code>16bit:AX\BX\CX\DX</code> : 通用寄存器</li><li><code>x64</code> 一个寄存器 <code>8</code> 个字节</li><li><code>R</code> 开头的寄存器是 <code>64bit</code> 的，占 <code>8</code> 字节</li><li><code>E</code> 开头的寄存器是 <code>32bit</code> 的，占 <code>4</code> 个字节</li></ul><h4 id="c内联汇编"><a class="anchor" href="#c内联汇编">#</a> C++ 内联汇编</h4><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token comment">// 双下划，C++ 嵌入汇编执行</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	__asm</pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>		mov eax<span class="token punctuation">,</span> <span class="token number">10</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="x86汇编重要指令"><a class="anchor" href="#x86汇编重要指令">#</a> <code>x86</code> 汇编重要指令</h4><ul><li><code>mov</code> <code>dest,src</code></li></ul><blockquote><p>将 src 的内容赋值给 dest，类似于 dest = src</p></blockquote><ul><li><code>[地址值]</code></li></ul><blockquote><ul><li>中括号 [] 里面放的都是内存地址</li></ul></blockquote><pre><code>* `word`是2字节，`dword`是4字节(double word),`qword`是八字节(quad word)
</code></pre><ul><li><code>call</code> 函数地址</li></ul><blockquote><ul><li><p>调用函数，并不是真实地址</p></li><li><p>CPU 大小端模式，大部分都是小端模式<br>小端模式：高高低低，高字节放高地址，低字节放低地址<br>一个变量的地址值，是它所在字节地址中的最小值</p></li></ul></blockquote><ul><li><code>lea</code> <code>dest</code> , <code>[地址值]</code></li></ul><blockquote><p>将地址赋值给 <code>dest</code> ，类似 <code>dest = 地址值</code></p></blockquote><ul><li><code>ret</code></li></ul><blockquote><p>函数返回</p></blockquote><ul><li><code>xor</code> <code>op1</code> , <code>op2</code></li></ul><blockquote><p>将 <code>op1</code> 和 <code>op2``异或</code> 的结果赋值给 <code>op1</code> , 类似于 <code>op1</code> = <code>op1</code> ^ <code>op2</code></p></blockquote><ul><li><code>add</code> <code>op1</code> , <code>op2</code></li></ul><blockquote><p>类似于 <code>op1 = op1 + op2</code></p></blockquote><ul><li><code>sub</code> <code>op1</code> , <code>op2</code></li></ul><blockquote><p>类似于 <code>op1</code> = <code>op1</code> - <code>op2</code></p></blockquote><ul><li><code>inc</code> op</li></ul><blockquote><p>自增，类似于 op = op + 1</p></blockquote><ul><li><code>dec</code> op</li></ul><blockquote><p>自减，类似于 op = op - 1</p></blockquote><ul><li><p><code>jmp</code> 内存地址</p><ul><li>跳转到某个内存地址去执行代码</li><li>j 开头的一般都是跳转，大多是带条件的跳转，一般跟 <code>test</code> ， <code>cmp</code> 等指令配合使用<br>参考权威:<span class="exturl" data-url="aHR0cHM6Ly93d3cuaW50ZWwuY29tL2NvbnRlbnQvd3d3L3VzL2VuL2RldmVsb3Blci9hcnRpY2xlcy90ZWNobmljYWwvaW50ZWwtc2RtLmh0bWw=">Intel 白皮书</span><sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></li></ul></li><li><p><code>cmp</code> <code>eax</code> , b</p></li></ul><blockquote><p><code>cmp</code> 是 ``compare <code>的简称，比较</code> eax <code>和</code> b` 的值是否相等</p></blockquote><h4 id="跳转指令表格"><a class="anchor" href="#跳转指令表格">#</a> 跳转指令表格</h4><table><thead><tr><th>JE, JZ</th><th></th><th>结果为零则跳转 (相等时跳转)</th><th></th><th>ZF=1</th></tr></thead><tbody><tr><td>equal</td><td>zero</td><td></td><td></td><td></td></tr><tr><td>JNE, JNZ</td><td></td><td>结果不为零则跳转 (不相等时跳转)</td><td></td><td>ZF=0</td></tr><tr><td>not equal</td><td>not zero</td><td></td><td></td><td></td></tr><tr><td>JS</td><td></td><td>结果为负则跳转</td><td></td><td>SF=1</td></tr><tr><td>sign (有符号 \ 有负号)</td><td></td><td></td><td></td><td></td></tr><tr><td>JNS</td><td></td><td>结果为非负则跳转</td><td></td><td>SF=0</td></tr><tr><td>not sign (无符号 \ 无负号)</td><td></td><td></td><td></td><td></td></tr><tr><td>JP, JPE</td><td></td><td>结果中 1 的个数为偶数则跳转</td><td></td><td>PF=1</td></tr><tr><td>parity even</td><td></td><td></td><td></td><td></td></tr><tr><td>JNP, JPO</td><td></td><td>结果中 1 的个数为偶数则跳转</td><td></td><td>PF=0</td></tr><tr><td>parity odd</td><td></td><td></td><td></td><td></td></tr><tr><td>JO</td><td></td><td>结果溢出了则跳转</td><td></td><td>OF=1</td></tr><tr><td>overflow</td><td></td><td></td><td></td><td></td></tr><tr><td>JNO</td><td></td><td>结果没有溢出则跳转</td><td></td><td>OF=0</td></tr><tr><td>not overflow</td><td></td><td></td><td></td><td></td></tr><tr><td>JB, JNAE</td><td></td><td>小于则跳转 (无符号数)</td><td></td><td>CF=1</td></tr><tr><td>below</td><td>not above equal</td><td></td><td>&lt;</td><td></td></tr><tr><td>JNB, JAE</td><td></td><td>大于等于则跳转 (无符号数)</td><td></td><td>CF=0</td></tr><tr><td>not below</td><td>above equal</td><td></td><td>&gt;=</td><td></td></tr><tr><td>JBE, JNA</td><td></td><td>小于等于则跳转 (无符号数)</td><td></td><td>CF=1 or ZF=1</td></tr><tr><td>below equal</td><td>not above</td><td></td><td>&lt;=</td><td></td></tr><tr><td>JNBE, JA</td><td></td><td>大于则跳转 (无符号数)</td><td></td><td>CF=0 and ZF=0</td></tr><tr><td>not below equal</td><td>above</td><td></td><td>&gt;</td><td></td></tr><tr><td>JL, JNGE</td><td></td><td>小于则跳转 (有符号数)</td><td></td><td>SF≠ OF</td></tr><tr><td>little</td><td>not great equal</td><td></td><td>&lt;</td><td></td></tr><tr><td>JNL, JGE</td><td></td><td>大于等于则跳转 (有符号数)</td><td></td><td>SF=OF</td></tr><tr><td>not little</td><td>great equal</td><td></td><td>&gt;=</td><td></td></tr><tr><td>JLE, JNG</td><td></td><td>小于等于则跳转 (有符号数)</td><td></td><td>ZF=1 or SF≠ OF</td></tr><tr><td>little equal</td><td>not great</td><td></td><td>&lt;=</td><td></td></tr><tr><td>JNLE, JG</td><td></td><td>大于则跳转 (有符号数)</td><td></td><td>ZF=0 and SF=OF</td></tr><tr><td>not little equal</td><td>great</td><td></td><td>&gt;</td><td></td></tr></tbody></table><h4 id="汇编符号说明"><a class="anchor" href="#汇编符号说明">#</a> 汇编符号说明</h4><p><img data-src="https://mmbiz.qpic.cn/mmbiz_png/ORog4TEnkbu3LChB3TaEOicoSlNDYt5l3UsvIvXAQyQ9eSXkLbt1AEiavYQqklEPavj3jWYzSsl4QDGSammyfyJQ/0?wx_fmt=png%22%E6%B1%87%E7%BC%96%E7%AC%A6%E5%8F%B7%E8%AF%B4%E6%98%8E%22" alt="汇编符号说明"></p><h4 id="参考的c变量名规范"><a class="anchor" href="#参考的c变量名规范">#</a> 参考的 C++ 变量名规范</h4><ul><li>全局变量: <code>g_</code></li><li>成员变量： <code>m_</code></li><li>静态变量: <code>s_</code></li><li>常量: <code>c_</code></li></ul><h4 id="类补充"><a class="anchor" href="#类补充">#</a> 类补充</h4><ul><li><code>struct</code> 默认 <code>public</code></li><li><code>class</code> 默认 <code>private</code></li></ul><h5 id="如何利用指针间接访问所指向量的成员变量"><a class="anchor" href="#如何利用指针间接访问所指向量的成员变量">#</a> 如何利用指针间接访问所指向量的成员变量</h5><ul><li>从指针中取出对象的地址</li><li>利用对象的地址 <code>+</code> 成员变量的偏移量计算出成员变量的地址</li><li>根据成员变量的地址访问成员变量的存储空间</li><li>类函数默认会被赋值为 <code>ccccccc</code> ，</li><li><code>cc -&gt; int3</code> : 起到断点的作用</li><li>中断:interrupt</li></ul><h4 id="内存空间的布局"><a class="anchor" href="#内存空间的布局">#</a> 内存空间的布局</h4><blockquote><p>每个应用都有自己独立的内存空间</p></blockquote><ul><li>栈空间</li></ul><blockquote><p>每调用一个函数就会给它分配一段连续的栈空间，等函数调用完毕后会自动回收这段栈空间<br>自动分配和回收</p></blockquote><ul><li>堆空间</li></ul><blockquote><p>需要主动去申请和释放，在程序运行过程，为了能够自由控制内存的声明周期，大小，会经常使用堆空间的内存</p></blockquote><ul><li>代码区 (段)</li></ul><blockquote><p>用于存放代码</p></blockquote><ul><li>全局区 (数据段)</li></ul><blockquote><p>用于存放全局变量等</p></blockquote><h4 id="对初始内存初始化"><a class="anchor" href="#对初始内存初始化">#</a> 对初始内存初始化</h4><blockquote><p><code>memset</code> 函数是将较大的数据结构 (比如对象，数组等) 内存清零的比较快的方法</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">int</span> <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">//*p=0;// 并不能全部清零，仅前四个字节</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">memset</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 从 p 地址开始，连续个字节，都设置为 0</span></pre></td></tr></table></figure><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>Person person<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>person<span class="token punctuation">.</span>m_id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>person<span class="token punctuation">.</span>m_age <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>person<span class="token punctuation">.</span>m_height <span class="token operator">=</span> <span class="token number">180</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>person<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 赋值 person 为零</span></pre></td></tr></table></figure><h5 id="new的初始化"><a class="anchor" href="#new的初始化">#</a> <code>new</code> 的初始化</h5><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">int</span> <span class="token operator">*</span>p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">;</span>      <span class="token comment">// 未被初始化</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">int</span> <span class="token operator">*</span>p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 被初始化为 0</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">int</span> <span class="token operator">*</span>p3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 被初始化为 5</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">int</span> <span class="token operator">*</span>p4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment">// 数组元素未被初始化</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">int</span> <span class="token operator">*</span>p5 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//3 个数组元素都被初始化为 0</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">int</span> <span class="token operator">*</span>p6 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token comment">//3 个数组元素都被初始化为 0</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">int</span> <span class="token operator">*</span>p7 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span> <span class="token number">5</span> <span class="token punctuation">&#125;</span> <span class="token comment">// 数组首元素被初始化为 5，其它元素被初始化为零</span></pre></td></tr></table></figure><h4 id="malloc不会调用类的构造析构函数"><a class="anchor" href="#malloc不会调用类的构造析构函数">#</a> <code>malloc</code> 不会调用类的构造 &amp; 析构函数</h4><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">Person</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token keyword">int</span> m_age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Person()"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token operator">~</span><span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"释放Person()"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>	Person person<span class="token punctuation">;</span> <span class="token comment">// 会调用默认构造函数</span></pre></td></tr><tr><td data-num="19"></td><td><pre>	Person<span class="token operator">*</span> p <span class="token operator">=</span> <span class="token keyword">new</span> Person<span class="token punctuation">;</span> <span class="token comment">// 申请空间也会调用默认构造函数</span></pre></td></tr><tr><td data-num="20"></td><td><pre>	<span class="token keyword">delete</span> p<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>	<span class="token comment">//malloc 并不调用默认构造函数，</span></pre></td></tr><tr><td data-num="22"></td><td><pre>	Person<span class="token operator">*</span> q <span class="token operator">=</span> <span class="token punctuation">(</span>Person<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>Person<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>	<span class="token function">free</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 也不会调用析构函数</span></pre></td></tr><tr><td data-num="24"></td><td><pre>	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token comment">/*</span></pre></td></tr><tr><td data-num="27"></td><td><pre>Person ()</pre></td></tr><tr><td data-num="28"></td><td><pre>Person ()</pre></td></tr><tr><td data-num="29"></td><td><pre>释放 Person ()</pre></td></tr><tr><td data-num="30"></td><td><pre>释放 Person ()</pre></td></tr><tr><td data-num="31"></td><td><pre>*/</pre></td></tr></table></figure><h4 id="成员变量的初始化"><a class="anchor" href="#成员变量的初始化">#</a> 成员变量的初始化</h4><ul><li><strong>全局区默认初始化为 0</strong></li><li>如果自定义了构造函数，除了全局区，其他内存空间的成员变量默认都不会被初始化，需要开发人员手动初始化。</li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">Person</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token keyword">int</span> m_age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>Person g_person<span class="token punctuation">;</span>  <span class="token comment">// 全局变量初始化为 0</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">int</span> g_age<span class="token punctuation">;</span>  <span class="token comment">// 全局变量默认初始化为 0</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token comment">//Person person; // 堆空间：没有初始化成员变量</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token comment">// 堆空间：没有初始化成员变量</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	Person<span class="token operator">*</span> p0 <span class="token operator">=</span> <span class="token keyword">new</span> Person<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>	<span class="token comment">// 堆空间：成员变量初始化为 0，// 如果有构造函数则不进行初始化</span></pre></td></tr><tr><td data-num="17"></td><td><pre>	Person<span class="token operator">*</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>	cout <span class="token operator">&lt;&lt;</span> g_age <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>	cout <span class="token operator">&lt;&lt;</span> g_person<span class="token punctuation">.</span>m_age <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>	<span class="token comment">//cout &lt;&lt; person.m_age &lt;&lt; endl;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>	cout <span class="token operator">&lt;&lt;</span> p0<span class="token operator">-></span>m_age <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>	cout <span class="token operator">&lt;&lt;</span> p1<span class="token operator">-></span>m_age <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre>	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token comment">/* 输出:</span></pre></td></tr><tr><td data-num="27"></td><td><pre>0</pre></td></tr><tr><td data-num="28"></td><td><pre>0</pre></td></tr><tr><td data-num="29"></td><td><pre>-842150451</pre></td></tr><tr><td data-num="30"></td><td><pre>0</pre></td></tr><tr><td data-num="31"></td><td><pre>*/</pre></td></tr></table></figure><h4 id="构造函数的相互调用"><a class="anchor" href="#构造函数的相互调用">#</a> 构造函数的相互调用</h4><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">Person</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token keyword">int</span> m_age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token keyword">int</span> m_height<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span><span class="token function">Person</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>		<span class="token comment">//Person (0,0)// 不可，此命令汇编申请临时对象，而非调用</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token function">Person</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">,</span><span class="token keyword">int</span> height<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">m_age</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">m_height</span><span class="token punctuation">(</span>height<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	</pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="call汇编机械码"><a class="anchor" href="#call汇编机械码">#</a> call 汇编机械码</h4><ul><li>call 汇编机械码 <code>E8</code> 直接调用，写死</li><li>call 汇编机械码 <code>FF</code> 间接调用，可变</li></ul><h4 id="调用多态性虚表的汇编过程"><a class="anchor" href="#调用多态性虚表的汇编过程">#</a> 调用多态性虚表的汇编过程</h4><figure class="highlight armasm"><figcaption data-lang="armasm"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">/</span><span class="token operator">/</span>调用run</pre></td></tr><tr><td data-num="2"></td><td><pre>Animal <span class="token operator">*</span>cat <span class="token operator">=</span> new Cat<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>cat<span class="token operator">-</span><span class="token operator">></span>run<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token operator">/</span><span class="token operator">/</span>ebp<span class="token operator">-</span><span class="token number">8</span>是指针变量cat的地址</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token operator">/</span><span class="token operator">/</span>eax存储的是cat对象的地址</pre></td></tr><tr><td data-num="6"></td><td><pre>move eax<span class="token punctuation">,</span>dword ptr <span class="token punctuation">[</span>ebp<span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token operator">/</span><span class="token operator">/</span>取出cat对象的最前面<span class="token number">4</span>个字节<span class="token punctuation">(</span>虚表地址<span class="token punctuation">)</span>给edx</pre></td></tr><tr><td data-num="8"></td><td><pre>mov edx<span class="token punctuation">,</span> dword ptr <span class="token punctuation">[</span>eax<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token operator">/</span><span class="token operator">/</span>跳出虚表的最前面<span class="token number">4</span>个字节，取出<span class="token number">4</span>个字节赋值给eax</pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token operator">/</span><span class="token operator">/</span>取出cat::run的函数调用地址给eax</pre></td></tr><tr><td data-num="11"></td><td><pre>mov eax <span class="token punctuation">,</span>dword ptr <span class="token punctuation">[</span>edx<span class="token operator">+</span><span class="token number">4</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token operator">/</span><span class="token operator">/</span>call cat::run</pre></td></tr><tr><td data-num="13"></td><td><pre>call eax</pre></td></tr></table></figure><h4 id="单例模式简"><a class="anchor" href="#单例模式简">#</a> 单例模式 (简)</h4><blockquote><p>设计模式的一种，保证某个类永远只创建一个对象</p></blockquote><ul><li>构造函数私有化</li><li>定义一个私有的 static 成员变量指向唯一的那个单例对象</li><li>提供一个公共的访问单例对象的接口</li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/* 安全位置小火箭 */</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Rocket</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token function">Rocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token operator">~</span><span class="token function">Rocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">static</span> Rocket <span class="token operator">*</span>ms_rocket<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">static</span> Rocket <span class="token operator">*</span><span class="token function">sharedRocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token comment">// 这里要考虑多线程的安全</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token keyword">if</span><span class="token punctuation">(</span>ms_recket <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>            <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>                ms_rocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Rocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token keyword">return</span> ms_rocket<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">deleteRocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token keyword">if</span><span class="token punctuation">(</span>ms_rocket <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>            <span class="token keyword">delete</span> ms_rocket<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>            ms_rocket <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="const成员"><a class="anchor" href="#const成员">#</a> const 成员</h4><ul><li>const 成员：被 const 修饰的成员变量，非静态成员函数</li><li>const 成员变量<ul><li>必须初始化 (类内部初始化) 可以在声明的时候直接初始化赋值</li><li>非 static 的 const 成员变量还可以再初始化列表中初始化</li></ul></li><li>const 成员函数 (非静态)</li><li>const 关键字写在参数列表后面，函数的声明和实现必须带 const</li><li>内部不能修改非 static 成员函数</li><li>内部只能调用 const 成员函数，static 成员函数</li><li>非 const 成员函数可以调用 const 成员函数</li><li>const 成员函数和非 const 成员函数构成重载</li><li>非 const 对象 (指针) 优先调用非 const 成员函数</li><li>const 对象 (指针) 只能调用 const 成员函数，static 成员函数</li></ul><h4 id="拷贝函数"><a class="anchor" href="#拷贝函数">#</a> 拷贝函数</h4><ul><li>利用已经存在的 car3 对象创建一个 car3 新对象</li><li>car4 初始化会调用拷贝构造函数</li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Car</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token keyword">int</span> m_price<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token keyword">int</span> m_length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token function">car</span><span class="token punctuation">(</span><span class="token keyword">int</span> price <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">int</span> length <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">m_price</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">m_length</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>		cout<span class="token operator">&lt;&lt;</span> <span class="token string">"Car(int price = 0,int length = 0)"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token comment">// 拷贝构造函数 (会默认生成浅拷贝构造函数)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token function">Car</span><span class="token punctuation">(</span><span class="token keyword">const</span> Car <span class="token operator">&amp;</span>car<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">m_price</span><span class="token punctuation">(</span>car<span class="token punctuation">.</span>m_price<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">m_length</span><span class="token punctuation">(</span>car<span class="token punctuation">.</span>m_length<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>	<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>		cout <span class="token operator">&lt;&lt;</span><span class="token string">"Car(const Car &amp;car)"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>		<span class="token comment">// m_price = car.m_price;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>		<span class="token comment">// m_length = car.m_length;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>	</pre></td></tr><tr><td data-num="19"></td><td><pre>	<span class="token keyword">void</span> <span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>	<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>		cout<span class="token operator">&lt;&lt;</span> <span class="token string">"price = "</span> <span class="token operator">&lt;&lt;</span> m_price <span class="token operator">&lt;&lt;</span> <span class="token string">" , length="</span><span class="token operator">&lt;&lt;</span>m_length <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre>Car <span class="token function">car3</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>Car <span class="token function">car4</span><span class="token punctuation">(</span>car3<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>car4<span class="token punctuation">.</span><span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><blockquote><p>浅拷贝 (shallow copy): 指针类型的变量只会拷贝地址值<br>深拷贝 (deep copy): 将指针指向的内容拷贝到新的存储空间</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Car</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token keyword">int</span> m_price<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token keyword">char</span> <span class="token operator">*</span>m_name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token keyword">void</span> <span class="token function">copy</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span>name <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>		<span class="token keyword">if</span><span class="token punctuation">(</span>name <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>			<span class="token keyword">return</span> <span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token comment">// 申请新的存储空间</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	m_name <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token function">strlen</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token function">strcpy</span><span class="token punctuation">(</span>m_name<span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="浅深拷贝"><a class="anchor" href="#浅深拷贝">#</a> 浅，深拷贝</h4><ul><li>编译器默认的提供的拷贝是 <code>浅拷贝</code> (shallow copy)</li><li>将一个对象中所有成员变量的值拷贝到另一个对象</li><li>如果某个成员变量是个指针，只会拷贝指针中存储的地址值，并不会拷贝指针指向的内存空间</li><li>可能会导致堆空间多次 free 的问题</li><li>如果需要实现 <code>深拷贝</code> (deep copy)，就需要自定义拷贝构造函数</li><li>将指针类型的成员变量所指向的内存空间，拷贝到新的内存空间</li></ul><h4 id="对象类型的参数和返回值"><a class="anchor" href="#对象类型的参数和返回值">#</a> 对象类型的参数和返回值</h4><blockquote><p>使用对象类型作为函数的参数或者返回值，可能会产生一些不必要的中间对象，返回引用可避免中间值</p></blockquote><h4 id="匿名对象"><a class="anchor" href="#匿名对象">#</a> 匿名对象</h4><blockquote><p>匿名对象：没有变量名，没有被指针指向的对象，用完后马上调用析构</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">car</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 一次性对象，调用完之后立即释放空间</span></pre></td></tr></table></figure><h4 id="隐式构造转换构造"><a class="anchor" href="#隐式构造转换构造">#</a> 隐式构造 / 转换构造</h4><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>Person p1 <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 等同于</span></pre></td></tr><tr><td data-num="3"></td><td><pre>Person <span class="token function">p2</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">// 都会调用单构造函数</span></pre></td></tr></table></figure><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 隐式构造</span></pre></td></tr><tr><td data-num="2"></td><td><pre>Person <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token keyword">return</span> <span class="token number">40</span><span class="token punctuation">;</span> <span class="token comment">// 隐式构造，会将 40 传递给 Person 单函数对象</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote><p>可以通过关键字 explicit 在定义构造函数时禁止掉隐式构造</p></blockquote><h4 id="编译器何时自动生成构造函数"><a class="anchor" href="#编译器何时自动生成构造函数">#</a> 编译器何时自动生成构造函数</h4><blockquote><p>virtual function table 在汇编显示:vftable</p></blockquote><ul><li>成员变量在声明的同时进行了初始化</li><li>有定义虚函数</li><li>虚继承其他类</li><li>包含了对象类型的成员，且这个成员有构造函数 (编译器生成或自定义)</li><li>父类有构造函数 (编译器生成或自定义)</li><li>对象创建后，需要做一些额外操作时 (比如内存操作，函数调用)，编译器一般都会为期生成构造函数</li></ul><h4 id="内部类"><a class="anchor" href="#内部类">#</a> 内部类</h4><blockquote><p>如果将类 A 定义在类 C 的内部，那么类 A 就是一个内部类 (嵌套类)</p></blockquote><ul><li>内部类的特点<ul><li>支持 public,protected,private 权限</li><li>成员函数可以直接访问其外部类对象的所有成员 (反过来不行)</li><li>成员函数可以直接不带类名，对象名访问其外部类的 static 成员</li><li>不会影响外部类的内存布局</li></ul></li></ul><h4 id="局部类"><a class="anchor" href="#局部类">#</a> 局部类</h4><blockquote><p>在一个 <code>函数内部</code> 定义的类，称为局部类</p></blockquote><ul><li>局部域仅限于所在的函数内部</li><li>其所有的成员必须定义在类内部，不允许定义 static 成员变量</li><li>成员函数不能直接访问函数的局部变量 (static 变量除外)</li><li>在函数内部定义的类如果未调用类和函数，并不会每次调用函数都调用类</li></ul><h4 id="类型转换"><a class="anchor" href="#类型转换">#</a> 类型转换</h4><ul><li>C 语言风格类型转换符<ul><li>(type)expression</li><li>type(expression)</li></ul></li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">double</span> d <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span> a<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">double</span> d2 <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><ul><li>C++ 中有 <code>4</code> 个类型转换符<ul><li>static_cast</li><li>dynamic_cast</li><li>reinterpret_cast</li><li>const_cast</li><li>使用格式:xx_cast&lt;type&gt;(expression)</li></ul></li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">double</span> d <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h5 id="const_cast"><a class="anchor" href="#const_cast">#</a> const_cast</h5><blockquote><p>一般用于 <code>去</code> 除 <code>const</code> 属性，将 <code>const</code> 转换为 <code>非const</code></p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token keyword">const</span> Person<span class="token operator">*</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token comment">// 实现去除 const 属性的强制类型转换</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	Person<span class="token operator">*</span> p2 <span class="token operator">=</span> <span class="token generic-function"><span class="token function">const_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>Person<span class="token operator">*</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="13"></td><td><pre>	Person<span class="token operator">*</span> p3 <span class="token operator">=</span> <span class="token punctuation">(</span>Person<span class="token operator">*</span><span class="token punctuation">)</span>p1<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token comment">// 汇编语言相同</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token comment">/*</span></pre></td></tr><tr><td data-num="19"></td><td><pre>	12: 	Person* p2 = const_cast&lt;Person*>(p1);</pre></td></tr><tr><td data-num="20"></td><td><pre>00007FF773E2197C 48 8B 45 08          mov         rax,qword ptr [rbp+8]</pre></td></tr><tr><td data-num="21"></td><td><pre>00007FF773E21980 48 89 45 28          mov         qword ptr [rbp+28h],rax</pre></td></tr><tr><td data-num="22"></td><td><pre>	13: 	Person* p3 = (Person*)p1;</pre></td></tr><tr><td data-num="23"></td><td><pre>00007FF773E21984 48 8B 45 08          mov         rax,qword ptr [rbp+8]</pre></td></tr><tr><td data-num="24"></td><td><pre>00007FF773E21988 48 89 45 48          mov         qword ptr [rbp+48h],rax</pre></td></tr><tr><td data-num="25"></td><td><pre>*/</pre></td></tr></table></figure><h5 id="dynamic_cast"><a class="anchor" href="#dynamic_cast">#</a> dynamic_cast</h5><blockquote><p>一般用于 <code>多态</code> 类型的转换，有 <code>运行</code> 时 <code>安全检测</code></p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Person</span></span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Car</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>	Person<span class="token operator">*</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>	Person<span class="token operator">*</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"P1 = "</span> <span class="token operator">&lt;&lt;</span> p1 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"P2 = "</span> <span class="token operator">&lt;&lt;</span> p2 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>	<span class="token comment">// 用于多态类型转换 student 和 Person 没有多态没有虚函数会报错</span></pre></td></tr><tr><td data-num="26"></td><td><pre>	<span class="token comment">// 不太安全，Person 赋值给 student，子类赋值给父类，不安全</span></pre></td></tr><tr><td data-num="27"></td><td><pre>	Student<span class="token operator">*</span> stu1 <span class="token operator">=</span> <span class="token generic-function"><span class="token function">dynamic_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>Student <span class="token operator">*</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 不安全</span></pre></td></tr><tr><td data-num="28"></td><td><pre>	Student<span class="token operator">*</span> stu2 <span class="token operator">=</span> <span class="token generic-function"><span class="token function">dynamic_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>Student <span class="token operator">*</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 安全</span></pre></td></tr><tr><td data-num="29"></td><td><pre>	<span class="token comment">// 其它方式会把地址完全转过来</span></pre></td></tr><tr><td data-num="30"></td><td><pre>	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"stu1 = "</span> <span class="token operator">&lt;&lt;</span> stu1 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">// 不安全会清空，安全检测</span></pre></td></tr><tr><td data-num="31"></td><td><pre>	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"stu2 = "</span> <span class="token operator">&lt;&lt;</span> stu2 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token comment">/*</span></pre></td></tr><tr><td data-num="35"></td><td><pre>P1 = 0000019F7CD6C8B0</pre></td></tr><tr><td data-num="36"></td><td><pre>P2 = 0000019F7CD6C2C0 </pre></td></tr><tr><td data-num="37"></td><td><pre>stu1 = 0000000000000000 //p1 赋值失败</pre></td></tr><tr><td data-num="38"></td><td><pre>stu2 = 0000019F7CD6C2C0 //p2 成功</pre></td></tr><tr><td data-num="39"></td><td><pre></pre></td></tr><tr><td data-num="40"></td><td><pre>*/</pre></td></tr></table></figure><h5 id="static_cast"><a class="anchor" href="#static_cast">#</a> static_cast</h5><ul><li>对比 dynamic_cast，缺乏运行时安全检测</li><li><code>不能交叉转换</code> (不是同一继承体系的，无法转换)</li><li>常用语 <code>基本数据类型</code> 的转换， <code>非const转成const</code></li><li>适用较广</li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>Person<span class="token operator">*</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	Car<span class="token operator">*</span> c1 <span class="token operator">=</span> <span class="token generic-function"><span class="token function">dynamic_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>Car<span class="token operator">*</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token comment">// 报错，交叉转换不允许 car 和 Person 没有任何关系</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token comment">//Car* c2 = static_cast&lt;Car*>(p1);</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token comment">// 基本类型转换</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token keyword">double</span> d <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h5 id="reinterpret_cast"><a class="anchor" href="#reinterpret_cast">#</a> reinterpret_cast</h5><ul><li>属于比较 <code>底层的强制转换</code> ，没有任何类型检查和格式转换， <code>仅仅是简单的二进制数据拷贝</code></li><li><code>可以交叉转换</code></li><li><code>可以将指针和整数相互转换</code></li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token comment">// 小端模式从后面开始读</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token comment">// 二进制 0000 1010 0000 0000 0000 0000</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token comment">// 十六进制: 0A 00 00 00</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token comment">//int a = 10;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token comment">//double 八个字节，double 和 int 并不能简单的二进制 copy</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token comment">// 00 00 00 00 00 00 24 40</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token keyword">double</span> d <span class="token operator">=</span> <span class="token generic-function"><span class="token function">reinterpret_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&amp;</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>	<span class="token comment">// 二进制纯 copy</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"a= "</span> <span class="token operator">&lt;&lt;</span> a <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d= "</span> <span class="token operator">&lt;&lt;</span> d <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token comment">/*</span></pre></td></tr><tr><td data-num="19"></td><td><pre>a= 10</pre></td></tr><tr><td data-num="20"></td><td><pre>d= 8.33713e+80</pre></td></tr><tr><td data-num="21"></td><td><pre>*/</pre></td></tr></table></figure><p>参考资料:《30 小时快速精通 C++ 和外挂》</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuaW50ZWwuY29tL2NvbnRlbnQvd3d3L3VzL2VuL2RldmVsb3Blci9hcnRpY2xlcy90ZWNobmljYWwvaW50ZWwtc2RtLmh0bWw=">https://www.intel.com/content/www/us/en/developer/articles/technical/intel-sdm.html</span> <a href="#fnref1" class="footnote-backref">↩︎</a></p></li></ol></section><div class="tags"><a href="/tags/C/" rel="tag"><i class="ic i-tag"></i>C++</a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/" rel="tag"><i class="ic i-tag"></i>计算机科学</a><a href="/tags/%E6%B1%87%E7%BC%96/" rel="tag"><i class="ic i-tag"></i>汇编</a></div></div><footer><div class="meta"><span class="icon"><i class="ic i-eye"></i></span><span>此文章已被阅读次数:</span><span class="waline-pageview-count" id="twikoo_visitors" data-path="computer-science/cpp/course-2/汇编基础理解cpp/">正在加载...</span><span class="item"><span class="icon"><i class="ic i-calendar-check"></i></span><span class="text">更新于</span><time title="修改时间：2023-06-13 00:01:49" itemprop="dateModified" datetime="2023-06-13T00:01:49+08:00">2023-06-13</time></span></div><div class="reward"><button><i class="ic i-heartbeat"></i>赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/assets/wechatpay.png" alt="YuHeShui 微信支付"><p>微信支付</p></div><div><img data-src="/assets/alipay.png" alt="YuHeShui 支付宝"><p>支付宝</p></div><div><img data-src="/assets/paypal.png" alt="YuHeShui 贝宝"><p>贝宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者：</strong>YuHeShui<i class="ic i-at"><em>@</em></i>瓶子的跋涉</li><li class="link"><strong>本文链接：</strong><a href="https://www.blog.foryouos.cn/computer-science/cpp/course-2/%E6%B1%87%E7%BC%96%E5%9F%BA%E7%A1%80%E7%90%86%E8%A7%A3cpp/" title="汇编基础理解C++">https://www.blog.foryouos.cn/computer-science/cpp/course-2/汇编基础理解cpp/</a></li><li class="license"><strong>版权声明：</strong>本站所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener external nofollow noreferrer" target="_blank"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/computer-science/cpp/course-2/cpp%E9%83%A8%E5%88%86%E6%96%B0%E7%89%B9%E5%BE%81%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/" rel="prev" itemprop="url" data-background-image="https:&#x2F;&#x2F;i.imgtg.com&#x2F;2023&#x2F;03&#x2F;09&#x2F;YQdA1.png" title="C++部分新特征"><span class="type">上一篇</span><span class="category"><i class="ic i-flag"></i>汇编与STl新特征</span><h3>C++部分新特征</h3></a></div><div class="item right"><a href="/computer-science/cpp/course-2/STL%E6%97%A0%E5%BA%8F%E5%92%8C%E5%85%B3%E8%81%94%E5%AE%B9%E5%99%A8/" rel="next" itemprop="url" data-background-image="https:&#x2F;&#x2F;i.imgtg.com&#x2F;2023&#x2F;03&#x2F;22&#x2F;9QqMG.jpg" title="STL关联容器"><span class="type">下一篇</span><span class="category"><i class="ic i-flag"></i>汇编与STl新特征</span><h3>STL关联容器</h3></a></div></div><div class="wrap" id="wcomments"></div><script type="module" data-pjax="data-pjax">import { init } from 'https://unpkg.com/@waline/client@v2/dist/waline.mjs';

const path = document.getElementById("twikoo_visitors").getAttribute("data-path");
setTimeout(function () {
    init({
        el: '#wcomments',
        serverURL: 'https://foryouos.zeabur.app',
        lang: 'zh-CN',
        locale: {},
        emoji: ["https://unpkg.com/@waline/emojis@1.0.1/weibo","https://unpkg.com/@waline/emojis@1.0.1/alus","https://unpkg.com/@waline/emojis@1.0.1/bilibili","https://unpkg.com/@waline/emojis@1.0.1/qq","https://unpkg.com/@waline/emojis@1.0.1/tieba","https://unpkg.com/@waline/emojis@1.0.1/tw-emoji"],
        meta: ["nick","mail","link"],
        requiredMeta: ["nick","mail"],
        wordLimit: 0,
        pageSize: 10,
        pageview: true,
        path: path,
        dark: 'html[data-theme="dark"]'
    });
}, 1000)</script></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B1%87%E7%BC%96%E7%9A%84%E7%94%A8%E9%80%94"><span class="toc-number">1.</span> <span class="toc-text">汇编的用途</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B1%87%E7%BC%96"><span class="toc-number">2.</span> <span class="toc-text">汇编</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#visual-studio-2022%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE"><span class="toc-number">3.</span> <span class="toc-text">Visual studio 2022 常用快捷键</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88c%E6%94%AF%E6%8C%81%E5%87%BD%E6%95%B0%E9%87%8D%E8%BD%BD"><span class="toc-number">4.</span> <span class="toc-text">为什么 C++ 支持函数重载</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E5%8F%82%E6%95%B0"><span class="toc-number">5.</span> <span class="toc-text">默认参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%87%E9%92%88%E5%AD%98%E5%82%A8%E5%87%BD%E6%95%B0%E5%90%8D"><span class="toc-number">6.</span> <span class="toc-text">指针存储函数名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#extern-c"><span class="toc-number">7.</span> <span class="toc-text">extern &quot;C&quot;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cpp%E4%BD%BF%E7%94%A8c%E8%AF%AD%E8%A8%80%E5%BC%80%E6%BA%90%E5%BA%93"><span class="toc-number">8.</span> <span class="toc-text">cpp 使用 C 语言开源库</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#c%E6%96%87%E4%BB%B6%E5%86%99%E5%85%A5%E5%A4%B4%E6%96%87%E4%BB%B6"><span class="toc-number">8.1.</span> <span class="toc-text">C 文件写入头文件</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%8F%E5%AE%9A%E4%B9%89"><span class="toc-number">9.</span> <span class="toc-text">宏定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#pragma-once"><span class="toc-number">10.</span> <span class="toc-text">#pragma once</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E8%81%94%E5%87%BD%E6%95%B0%E4%B8%8E%E5%AE%8F"><span class="toc-number">11.</span> <span class="toc-text">内联函数与宏</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#c%E6%9C%89%E4%BA%9B%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%8F%AF%E4%BB%A5%E8%A2%AB%E8%B5%8B%E5%80%BC"><span class="toc-number">12.</span> <span class="toc-text">C++ 有些表达式可以被赋值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#const"><span class="toc-number">13.</span> <span class="toc-text">const</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%95%E7%94%A8"><span class="toc-number">14.</span> <span class="toc-text">引用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#const%E5%BC%95%E7%94%A8%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">14.1.</span> <span class="toc-text">const 引用的特点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%B8%E5%BC%95%E7%94%A8%E6%95%B0%E7%BB%84"><span class="toc-number">14.2.</span> <span class="toc-text">常引用数组</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80"><span class="toc-number">15.</span> <span class="toc-text">汇编语言</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E7%9A%84%E7%A7%8D%E7%B1%BB"><span class="toc-number">15.1.</span> <span class="toc-text">汇编语言的种类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#att%E6%B1%87%E7%BC%96-vs-intel%E6%B1%87%E7%BC%96"><span class="toc-number">15.2.</span> <span class="toc-text">AT&amp;T 汇编 VS Intel 汇编</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%84%E5%AD%98%E5%99%A8%E4%B8%8E%E5%86%85%E5%AD%98"><span class="toc-number">16.</span> <span class="toc-text">寄存器与内存</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#x64%E5%AF%84%E5%AD%98%E5%99%A8register"><span class="toc-number">17.</span> <span class="toc-text">x64 寄存器 Register</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#c%E5%86%85%E8%81%94%E6%B1%87%E7%BC%96"><span class="toc-number">18.</span> <span class="toc-text">C++ 内联汇编</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#x86%E6%B1%87%E7%BC%96%E9%87%8D%E8%A6%81%E6%8C%87%E4%BB%A4"><span class="toc-number">19.</span> <span class="toc-text">x86 汇编重要指令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%B3%E8%BD%AC%E6%8C%87%E4%BB%A4%E8%A1%A8%E6%A0%BC"><span class="toc-number">20.</span> <span class="toc-text">跳转指令表格</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B1%87%E7%BC%96%E7%AC%A6%E5%8F%B7%E8%AF%B4%E6%98%8E"><span class="toc-number">21.</span> <span class="toc-text">汇编符号说明</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E7%9A%84c%E5%8F%98%E9%87%8F%E5%90%8D%E8%A7%84%E8%8C%83"><span class="toc-number">22.</span> <span class="toc-text">参考的 C++ 变量名规范</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B1%BB%E8%A1%A5%E5%85%85"><span class="toc-number">23.</span> <span class="toc-text">类补充</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%88%A9%E7%94%A8%E6%8C%87%E9%92%88%E9%97%B4%E6%8E%A5%E8%AE%BF%E9%97%AE%E6%89%80%E6%8C%87%E5%90%91%E9%87%8F%E7%9A%84%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F"><span class="toc-number">23.1.</span> <span class="toc-text">如何利用指针间接访问所指向量的成员变量</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E5%AD%98%E7%A9%BA%E9%97%B4%E7%9A%84%E5%B8%83%E5%B1%80"><span class="toc-number">24.</span> <span class="toc-text">内存空间的布局</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E5%88%9D%E5%A7%8B%E5%86%85%E5%AD%98%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">25.</span> <span class="toc-text">对初始内存初始化</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#new%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">25.1.</span> <span class="toc-text">new 的初始化</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#malloc%E4%B8%8D%E4%BC%9A%E8%B0%83%E7%94%A8%E7%B1%BB%E7%9A%84%E6%9E%84%E9%80%A0%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0"><span class="toc-number">26.</span> <span class="toc-text">malloc 不会调用类的构造 &amp; 析构函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">27.</span> <span class="toc-text">成员变量的初始化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E7%9A%84%E7%9B%B8%E4%BA%92%E8%B0%83%E7%94%A8"><span class="toc-number">28.</span> <span class="toc-text">构造函数的相互调用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#call%E6%B1%87%E7%BC%96%E6%9C%BA%E6%A2%B0%E7%A0%81"><span class="toc-number">29.</span> <span class="toc-text">call 汇编机械码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B0%83%E7%94%A8%E5%A4%9A%E6%80%81%E6%80%A7%E8%99%9A%E8%A1%A8%E7%9A%84%E6%B1%87%E7%BC%96%E8%BF%87%E7%A8%8B"><span class="toc-number">30.</span> <span class="toc-text">调用多态性虚表的汇编过程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E7%AE%80"><span class="toc-number">31.</span> <span class="toc-text">单例模式 (简)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#const%E6%88%90%E5%91%98"><span class="toc-number">32.</span> <span class="toc-text">const 成员</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8B%B7%E8%B4%9D%E5%87%BD%E6%95%B0"><span class="toc-number">33.</span> <span class="toc-text">拷贝函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%85%E6%B7%B1%E6%8B%B7%E8%B4%9D"><span class="toc-number">34.</span> <span class="toc-text">浅，深拷贝</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8F%82%E6%95%B0%E5%92%8C%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-number">35.</span> <span class="toc-text">对象类型的参数和返回值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8C%BF%E5%90%8D%E5%AF%B9%E8%B1%A1"><span class="toc-number">36.</span> <span class="toc-text">匿名对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9A%90%E5%BC%8F%E6%9E%84%E9%80%A0%E8%BD%AC%E6%8D%A2%E6%9E%84%E9%80%A0"><span class="toc-number">37.</span> <span class="toc-text">隐式构造 &#x2F; 转换构造</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E5%99%A8%E4%BD%95%E6%97%B6%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">38.</span> <span class="toc-text">编译器何时自动生成构造函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E9%83%A8%E7%B1%BB"><span class="toc-number">39.</span> <span class="toc-text">内部类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B1%80%E9%83%A8%E7%B1%BB"><span class="toc-number">40.</span> <span class="toc-text">局部类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="toc-number">41.</span> <span class="toc-text">类型转换</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#const_cast"><span class="toc-number">41.1.</span> <span class="toc-text">const_cast</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#dynamic_cast"><span class="toc-number">41.2.</span> <span class="toc-text">dynamic_cast</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#static_cast"><span class="toc-number">41.3.</span> <span class="toc-text">static_cast</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#reinterpret_cast"><span class="toc-number">41.4.</span> <span class="toc-text">reinterpret_cast</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/computer-science/cpp/course-2/STL%E5%AE%B9%E5%99%A8%E9%80%82%E9%85%8D%E5%99%A8/" rel="bookmark" title="STL容器适配器">STL容器适配器</a></li><li><a href="/computer-science/cpp/course-2/STL%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8/" rel="bookmark" title="STL顺序容器">STL顺序容器</a></li><li><a href="/computer-science/cpp/course-2/STL%E6%97%A0%E5%BA%8F%E5%92%8C%E5%85%B3%E8%81%94%E5%AE%B9%E5%99%A8/" rel="bookmark" title="STL关联容器">STL关联容器</a></li><li class="active"><a href="/computer-science/cpp/course-2/%E6%B1%87%E7%BC%96%E5%9F%BA%E7%A1%80%E7%90%86%E8%A7%A3cpp/" rel="bookmark" title="汇编基础理解C++">汇编基础理解C++</a></li><li><a href="/computer-science/cpp/course-2/cpp%E9%83%A8%E5%88%86%E6%96%B0%E7%89%B9%E5%BE%81%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/" rel="bookmark" title="C++部分新特征">C++部分新特征</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="YuHeShui" data-src="/assets/avatar.jpg"><p class="name" itemprop="name">YuHeShui</p><div class="description" itemprop="description">瓶子的跋涉 & 编程笔记</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">46</span><span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">13</span><span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">26</span><span class="name">标签</span></a></div></nav><div class="social"><a href="https://github.com/foryouos" class="item github" rel="noopener external nofollow noreferrer" title="https:&#x2F;&#x2F;github.com&#x2F;foryouos" target="_blank"><i class="ic i-github"></i></a><a href="https://www.zhihu.com/people/foryouos" class="item zhihu" rel="noopener external nofollow noreferrer" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;foryouos" target="_blank"><i class="ic i-zhihu"></i></a><a href="mailto:foryouos@mail.com" class="item email" rel="noopener external nofollow noreferrer" title="mailto:foryouos@mail.com" target="_blank"><i class="ic i-envelope"></i></a></div><div class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="javascript:void(0);" rel="external nofollow noreferrer"><i class="ic i-user"></i>关于</a><ul class="submenu"><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于本站</a></li><li class="item"><a href="/admiration/" rel="section"><i class="ic i-coffee"></i>赞赏博主</a></li></ul></li><li class="item dropdown"><a href="javascript:void(0);" rel="external nofollow noreferrer"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友链</a></li><li class="item dropdown"><a href="javascript:void(0);" rel="external nofollow noreferrer"><i class="ic i-user"></i>外链</a><ul class="submenu"><li class="item"><a href="https://www.foryouos.cn/" rel="noopener external nofollow noreferrer" target="_blank"><i class="ic i-user"></i>主页</a></li><li class="item"><a href="https://www.so.foryouos.cn/" rel="noopener external nofollow noreferrer" target="_blank"><i class="ic i-magic"></i>搜索</a></li><li class="item"><a href="https://api-wimg.foryouos.cn/" rel="noopener external nofollow noreferrer" target="_blank"><i class="ic i-coffee"></i>随机图床</a></li></ul></li></div></div></div></div><ul id="quick"><li class="prev pjax"><a href="/computer-science/cpp/course-2/STL%E6%97%A0%E5%BA%8F%E5%92%8C%E5%85%B3%E8%81%94%E5%AE%B9%E5%99%A8/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/computer-science/cpp/course-2/cpp%E9%83%A8%E5%88%86%E6%96%B0%E7%89%B9%E5%BE%81%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/" title="分类于C++">C++</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/course-1/" title="分类于郑莉老师C++语言程序设计">郑莉老师C++语言程序设计</a><i class="ic i-angle-right"></i></div><span><a href="/computer-science/cpp/course-1/cpp%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/">C++类与对象</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/" title="分类于C++">C++</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/course-2/" title="分类于汇编与STl新特征">汇编与STl新特征</a><i class="ic i-angle-right"></i></div><span><a href="/computer-science/cpp/course-2/STL%E5%AE%B9%E5%99%A8%E9%80%82%E9%85%8D%E5%99%A8/">STL容器适配器</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/" title="分类于C++">C++</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/course-5/" title="分类于Qt">Qt</a><i class="ic i-angle-right"></i></div><span><a href="/computer-science/cpp/course-5/Qt%E5%A4%9A%E7%BA%BF%E7%A8%8B/">Qt多线程</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/" title="分类于C++">C++</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/course-1/" title="分类于郑莉老师C++语言程序设计">郑莉老师C++语言程序设计</a><i class="ic i-angle-right"></i></div><span><a href="/computer-science/cpp/course-1/cpp%E6%95%B0%E6%8D%AE%E5%85%B1%E4%BA%AB%E4%B8%8E%E4%BF%9D%E6%8A%A4/">C++数据共享与保护</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/Linux/" title="分类于Linux">Linux</a><i class="ic i-angle-right"></i></div><span><a href="/computer-science/Linux/Linux%E7%9A%84Makefile/">Makefile</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/" title="分类于C++">C++</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/course-1/" title="分类于郑莉老师C++语言程序设计">郑莉老师C++语言程序设计</a><i class="ic i-angle-right"></i></div><span><a href="/computer-science/cpp/course-1/C%E9%9D%A2%E5%90%91%E8%BF%87%E7%A8%8B%E8%BD%ACcpp%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/">C面向过程转面向对象</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/web/" title="分类于web">web</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/web/front/" title="分类于前端">前端</a><i class="ic i-angle-right"></i></div><span><a href="/computer-science/web/front/%E9%9A%8F%E6%9C%BA%E5%9B%BE%E7%89%87API/">Github page随机图片API</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/Linux/" title="分类于Linux">Linux</a><i class="ic i-angle-right"></i></div><span><a href="/computer-science/Linux/linux%E5%85%A5%E9%97%A8(1)/">linux入门1</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/Linux/" title="分类于Linux">Linux</a><i class="ic i-angle-right"></i></div><span><a href="/computer-science/Linux/Linux%E6%96%87%E4%BB%B6/">linux文件</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/Linux/" title="分类于Linux">Linux</a><i class="ic i-angle-right"></i></div><span><a href="/computer-science/Linux/Linux%E7%A8%8B%E5%BA%8F%E4%B8%8E%E8%BF%9B%E7%A8%8B/">线程进程</a></span></li></ul></div><div class="rpost pjax"><h2>最新评论</h2><ul class="leancloud-recent-comment" id="new-comment"><li class="item" v-for="com in coms"><a v-bind:href="com.href" data-pjax-state="data-pjax-state"><span class="breadcrumb">{{com.nick}} @ {{com.time}}</span><span>{{com.text}}<br></span></a></li></ul></div></div><div class="status"><div class="copyright">&copy; 2022 -<span itemprop="copyrightYear">2023</span><span class="with-love"><i class="ic i-sakura rotate"></i></span><span class="author" itemprop="copyrightHolder">YuHeShui @ foryouos</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i></span><span title="站点总字数">524k 字</span><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="ic i-coffee"></i></span><span title="站点阅读时长">7:56</span></div><div class="powered-by">基于 <a href="https://hexo.io/" rel="noopener external nofollow noreferrer" target="_blank">Hexo</a> & Theme.<a href="https://github.com/theme-shoka-x/hexo-theme-shokaX/" rel="noopener external nofollow noreferrer" target="_blank">ShokaX</a></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"computer-science/cpp/course-2/汇编基础理解cpp/",favicon:{show:"不负韶华",hide:"以梦为马！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,chart:!1,copy_tex:!1,katex:!1,mermaid:!1,audio:"",fancybox:!0,nocopy:!1,outime:!0,template:"&lt;div class=&quot;note warning&quot;&gt;&lt;p&gt;&lt;span class=&quot;label warning&quot;&gt;文章时效性提示&lt;/span&gt;&lt;br&gt;这是一篇发布于 {{publish}} 天前，最后一次更新在 {{updated}} 天前的文章，部分信息可能已经发生改变，请注意甄别。&lt;/p&gt;&lt;/div&gt;",quiz:{choice:"单选题",multiple:"多选题",true_false:"判断题",essay:"问答题",gap_fill:"填空题",mistake:"错题备注"},ignores:[t=>t.includes("#"),t=>new RegExp(LOCAL.path+"$").test(t),[]]}</script><script src="https://polyfill.io/v3/polyfill.min.js?features=default,fetch"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/pace/1.0.2/pace.min.js"></script><script src="https://unpkg.com/theme-shokax-pjax@latest/pjax.shokax.min.js"></script><script src="https://unpkg.com/theme-shokax-anime@latest/anime.shokax.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/algoliasearch/4.12.1/algoliasearch-lite.umd.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/instantsearch.js/4.39.0/instantsearch.production.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/lozad.js/1.16.0/lozad.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/quicklink/2.2.0/quicklink.umd.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/??jquery/3.5.1/jquery.min.js,fancybox/3.5.7/jquery.fancybox.min.js,justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js" async></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/KaTeX/0.12.0/contrib/copy-tex.min.js" async></script><script src="https://unpkg.com/frappe-charts@1.5.0/dist/frappe-charts.min.iife.js"></script><script src="/js/app.js?v=0.2.10"></script><script data-pjax="data-pjax">var _hmt=_hmt||[];!function(){var e=document.createElement("script"),t=(e.src="https://hm.baidu.com/hm.js?e3ba29befb93fdf32bbc553d0e5bee92",e.async=!0,document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)}()</script><script type="module" data-pjax>let items = []
        import { RecentComments } from 'https://unpkg.com/@waline/client@v2/dist/waline.mjs'
        RecentComments({
          serverURL: 'https://foryouos.zeabur.app',
          count: 10,
        }).then(({ comments }) => {
          comments.forEach(function (item) {
              let cText = (item.orig.length > 50) ? item.orig.substring(0,50)+'...' : item.orig
              item.url = item.url !== '/' ?  '/' + item.url : item.url;
              const siteLink = item.url + "#" + item.objectId
              items.push({
                  href: siteLink,
                  nick: item.nick,
                  time: item.insertedAt.split('T').shift(),
                  text: cText
              })
          })
          Vue.createApp({
            data() {
                return {
                    coms: items
                }
            }
          }).mount('#new-comment')
        }).catch(function (err) {
          console.error(err)
        })</script></body></html><!-- rebuild by hexo-renderer-multi-next-markdown-it -->