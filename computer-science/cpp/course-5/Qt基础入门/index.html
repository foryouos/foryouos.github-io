<!-- build time: Sun Jul 16 2023 08:36:38 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta http-equiv="X-UA-COMPATIBLE" content="IE=edge,chrome=1"><meta name="renderer" content="webkit"><link rel="icon" type="image/ico" sizes="32x32" href="/assets/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png"><meta name="baidu-site-verification" content="codeva-yIAXMzOV6I"><link rel="alternate" href="/rss.xml" title="瓶子的跋涉" type="application/rss+xml"><link rel="alternate" href="/atom.xml" title="瓶子的跋涉" type="application/atom+xml"><link rel="alternate" type="application/json" title="瓶子的跋涉" href="https://www.blog.foryouos.cn/feed.json"><meta name="referrer" content="no-referrer"><meta name="C++,后台服务器开发,QT,汇编,学习笔记,瓶子的跋涉,foryouos" content="foryouos & 瓶子的跋涉 & 编程笔记 博客"><meta name="瓶子的跋涉&foryouos&于喝水" content="瓶子的跋涉&foryouos&于喝水"><link rel="preconnect" href="https://lf9-cdn-tos.bytecdntp.com"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://unpkg.com"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.10"><script src="https://cdn.staticfile.org/vue/3.2.45/vue.global.prod.js"></script><link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css"><meta name="keywords" content="C++,Qt"><link rel="canonical" href="https://www.blog.foryouos.cn/computer-science/cpp/course-5/Qt%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8/"><title>Qt基础入门</title><meta name="generator" content="Hexo 6.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">Qt基础入门</h1><div class="meta"><span class="item" title="创建时间：2023-05-26 21:20:43"><span class="icon"><i class="ic i-calendar"></i></span><span class="text">发表于</span><time itemprop="dateCreated datePublished" datetime="2023-05-26T21:20:43+08:00">2023-05-26</time></span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i></span><span class="text">本文字数</span><span>11k</span><span class="text">字</span></span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i></span><span class="text">阅读时长</span><span>10 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span><span class="line"></span><span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">foryouos</a></li></ul><ul class="right" id="rightNav"><li class="item theme" @click="changeThemeByBtn"><i class="ic" :class="{'i-sun': !themeStatus,'i-moon': themeStatus}"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div class="pjax" id="imgs"><img src="https://i.imgtg.com/2023/05/26/OoUUxG.jpg"></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"></use><use xlink:href="#gentle-wave" x="48" y="3"></use><use xlink:href="#gentle-wave" x="48" y="5"></use><use xlink:href="#gentle-wave" x="48" y="7"></use></g></svg></div><main><div class="inner"><div class="pjax" id="main"><div class="article wrap"><div class="breadcrumb" itemlistelement itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i><span><a href="/">首页</a></span><i class="ic i-angle-right"></i><span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/" itemprop="item" rel="index" title="分类于计算机科学"><span itemprop="name">计算机科学<meta itemprop="position" content="0"></span></a></span><i class="ic i-angle-right"></i><span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/cpp/" itemprop="item" rel="index" title="分类于C++"><span itemprop="name">C++<meta itemprop="position" content="1"></span></a></span><i class="ic i-angle-right"></i><span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/cpp/course-5/" itemprop="item" rel="index" title="分类于Qt"><span itemprop="name">Qt<meta itemprop="position" content="2"></span></a></span><i class="ic i-angle-right"></i></div><article class="post block" itemscope itemtype="http://schema.org/Article" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.blog.foryouos.cn/computer-science/cpp/course-5/Qt%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/assets/avatar.jpg"><meta itemprop="name" content="YuHeShui"><meta itemprop="description" content="YuHeShui, 瓶子的跋涉 &amp; 编程笔记"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="瓶子的跋涉"></span><div class="body md" itemprop="articleBody"><h1 id="qt初步简介"><a class="anchor" href="#qt初步简介">#</a> QT 初步简介</h1><h2 id="qt模块"><a class="anchor" href="#qt模块">#</a> Qt 模块</h2><table><thead><tr><th>模块</th><th>描述</th></tr></thead><tbody><tr><td>Qt Core</td><td>Qt 类库的核心，所有其他模块都依赖于此模块</td></tr><tr><td>Qt GUI</td><td>设计 GUI 界面的基础类，包括 OpenGL</td></tr><tr><td>Qt Multimedia</td><td>音频、视频、摄像头和广播功能的类</td></tr><tr><td>Qt Multimedia Widgets</td><td>实现多媒体功能的界面组件类</td></tr><tr><td>Qt Network</td><td>使网络编程更简单和轻便的类</td></tr><tr><td>Qt QML</td><td>用于 QML 和 JavaScript 语言的类</td></tr><tr><td>Qt Quick</td><td>用于构建具有定制用户界面的动态应用程序的声明框架</td></tr><tr><td>Qt Quick Controls</td><td>创建桌面样式用户界面，基于 Qt Quick 的用户界面控件</td></tr><tr><td>Qt Quick Dialogs</td><td>用于 Qt Quick 的系统对话框类型</td></tr><tr><td>Qt Quick Layouts</td><td>用于 Qt Quick 2 界面元素的布局项</td></tr><tr><td>Qt SQL</td><td>使用 SQL 用于数据库操作的类</td></tr><tr><td>Qt Test</td><td>用于应用程序和库进行单元测试的类</td></tr><tr><td>Qt Widgets</td><td>用于构建 GUI 界面的 C++ 图形组件类</td></tr></tbody></table><h2 id="内容重述"><a class="anchor" href="#内容重述">#</a> 内容重述</h2><blockquote><p><code>QT</code> ，hello word!, 初步 <code>建立</code> UI， <code>代码生成</code> UI，代码和手动 UI <code>优缺点</code> 对比， <code>默认生成文件对比</code> ，Object Trees <code>自动释放</code> 子类 new 空间， <code>信号和槽</code></p><ul><li>Qt 的安装路径和文件命名不能有中文</li><li>Qt 默认 UFTF8 编码</li></ul></blockquote><h2 id="启动qt"><a class="anchor" href="#启动qt">#</a> 启动 QT</h2><p><img data-src="https://mmbiz.qpic.cn/mmbiz_png/ORog4TEnkbtic2O0MkovYJ6NZ3JsfkuGFTHsLKFIzTeuosptkh8ic67iciazAB2J10IBC5LCn05O19NnJlDfjfbhFw/0?wx_fmt=png" alt="启动QT桌面的应用" title="启动QT桌面的应用"></p><h3 id="基于对话框dialog"><a class="anchor" href="#基于对话框dialog">#</a> 基于对话框！Dialog</h3><blockquote><p>创建新项目，基于如下相关设置， <code>QDialog</code> 基于对话框的 QT</p><p><img data-src="https://mmbiz.qpic.cn/mmbiz_png/ORog4TEnkbtic2O0MkovYJ6NZ3JsfkuGFIKcRTOEV1LiaM2r0czibdiaziaDpxSR3oIOML6OHURTcR0bRAWsBL1wxZQ/0?wx_fmt=png" alt="选择建立的系统" title="选择建立的系统使用qmake"></p></blockquote><p><img data-src="https://mmbiz.qpic.cn/mmbiz_png/ORog4TEnkbtic2O0MkovYJ6NZ3JsfkuGFCfv06x86Yoviavkiak6B2sN0Ku21XPU6SFeGQnqOzhNOuTVCxgxTKxpg/0?wx_fmt=png" alt="选择class类型以及class名字" title="选择class类型以及class名字"></p><p><img data-src="https://mmbiz.qpic.cn/mmbiz_png/ORog4TEnkbtic2O0MkovYJ6NZ3JsfkuGFN9wUtwt1zpASrxn1xZOdcTMWY6HsjefSgVWcIpic8KheIlsiaQNbg8JA/0?wx_fmt=png" alt="选择编译组件" title="选择编译组件"></p><p><img data-src="https://mmbiz.qpic.cn/mmbiz_png/ORog4TEnkbtic2O0MkovYJ6NZ3JsfkuGFiaDzEf5CVSHz2ypwNMgAq5QSJlSeBCX7ibPAoRjVeCktPlcx68Um3nsw/0?wx_fmt=png" alt="最后的summary" title="最后的summary"></p><h3 id="ui编辑区"><a class="anchor" href="#ui编辑区">#</a> UI 编辑区</h3><p><img data-src="https://mmbiz.qpic.cn/mmbiz_png/ORog4TEnkbtic2O0MkovYJ6NZ3JsfkuGF5oDibYkAK5e8yt9GlGELzUzA4K5WYibnyne0ibFaHFf7icTCynrI8WKGlg/0?wx_fmt=png" alt="UI编辑区" title="UI编辑区"></p><h3 id="修改logo"><a class="anchor" href="#修改logo">#</a> 修改 logo</h3><blockquote><p>在编辑的 <code>pro</code> 文件下，最后添加 <code>RC_ICONS = myico.ico</code></p><p>此 ico 文件需要 <code>提前</code> 在下载并放到文件代码所在位置</p></blockquote><p><img data-src="https://mmbiz.qpic.cn/mmbiz_png/ORog4TEnkbtic2O0MkovYJ6NZ3JsfkuGF9sxMr2mqdGdiaLvajMtk3dzeTMxc3oa6XWSMfhmwibaZRcsPO9lcGo3g/0?wx_fmt=png" alt="添加窗口logo" title="添加窗口logo"></p><h3 id="运行"><a class="anchor" href="#运行">#</a> 运行</h3><blockquote><p>点击左下角的运行，可选择 <code>调试</code> 和 <code>发布</code> 两种，当要发布当前文件时选择 <code>release</code></p></blockquote><p><img data-src="https://mmbiz.qpic.cn/mmbiz_png/ORog4TEnkbtic2O0MkovYJ6NZ3JsfkuGF8DAb3fejQicx7WcJsCf6rMkgqEBc6AC0mnicSH1WQBbJmKGtlj6VAiaVQ/0?wx_fmt=png" alt="hello word执行窗口" title="hello word执行窗口"></p><h3 id="qt软件的发布"><a class="anchor" href="#qt软件的发布">#</a> QT 软件的发布</h3><blockquote><p>在 QT 文件夹下使用 <code>QT cmd</code> 窗口输入，使用 <code>windeployqt</code> 将 QT 运行所需要的动态库存入到 myfirstQTAPP 当中（注意 myfirstQTAPP 需要提前将 QT release 所生成的 exe 文件存入到此文件夹中）。</p></blockquote><figure class="highlight sh"><figcaption data-lang="sh"></figcaption><table><tr><td data-num="1"></td><td><pre>windeployqt E:<span class="token punctuation">\</span>C++study<span class="token punctuation">\</span>QT<span class="token punctuation">\</span>QT_exercise<span class="token punctuation">\</span>QT01<span class="token punctuation">\</span>myfirstQTAPP</pre></td></tr></table></figure><p><img data-src="https://mmbiz.qpic.cn/mmbiz_png/ORog4TEnkbtic2O0MkovYJ6NZ3JsfkuGFlhA4DnQS3r76YBs3BRQbZEsIibs31X4Czw0PC409qDkleuIFG6A1n6A/0?wx_fmt=png" alt="生成后发布的文件" title="生成后发布的文件"></p><h3 id="qwidget"><a class="anchor" href="#qwidget">#</a> Qwidget</h3><blockquote><p>创建项目 <code>Base class</code> 选择 <code>Qwidget</code> 创建的界面对所有的界面相关组件都是支持的</p></blockquote><h4 id="pro文件详解"><a class="anchor" href="#pro文件详解">#</a> .pro 文件详解</h4><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre># 在此项目中加入core gui核心（控制台不需要<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span> <span class="token expression">QT是以模块的形式组织类库，根据项目需求不同添加不同类库的支持</span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>QT       <span class="token operator">+=</span> core gui</pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre># 当QT版本大于<span class="token number">4</span>，在当前项目中添加widgets</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token function">greaterThan</span><span class="token punctuation">(</span>QT_MAJOR_VERSION<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token operator">:</span> QT <span class="token operator">+=</span> widgets</pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>CONFIG <span class="token operator">+=</span> c<span class="token operator">++</span><span class="token number">17</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span> <span class="token expression">You can make your code fail to compile <span class="token keyword">if</span> it uses deprecated APIs<span class="token punctuation">.</span></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span> <span class="token expression">In order to <span class="token keyword">do</span> so<span class="token punctuation">,</span> uncomment the following line<span class="token punctuation">.</span></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token expression">DEFINES <span class="token operator">+=</span> QT_DISABLE_DEPRECATED_BEFORE<span class="token operator">=</span><span class="token number">0x060000</span>    # disables all the APIs deprecated before Qt <span class="token number">6.0</span><span class="token punctuation">.</span><span class="token number">0</span></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre># 都为自动生成的</pre></td></tr><tr><td data-num="15"></td><td><pre># 源代码</pre></td></tr><tr><td data-num="16"></td><td><pre>SOURCES <span class="token operator">+=</span> \</pre></td></tr><tr><td data-num="17"></td><td><pre>    main<span class="token punctuation">.</span>cpp \</pre></td></tr><tr><td data-num="18"></td><td><pre>    widgets<span class="token punctuation">.</span>cpp</pre></td></tr><tr><td data-num="19"></td><td><pre># 头文件</pre></td></tr><tr><td data-num="20"></td><td><pre>HEADERS <span class="token operator">+=</span> \</pre></td></tr><tr><td data-num="21"></td><td><pre>    widgets<span class="token punctuation">.</span>h</pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">ui</span><span class="token expression">文件</span></span></pre></td></tr><tr><td data-num="23"></td><td><pre>FORMS <span class="token operator">+=</span> \</pre></td></tr><tr><td data-num="24"></td><td><pre>    widgets<span class="token punctuation">.</span>ui</pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span> <span class="token expression">Default rules <span class="token keyword">for</span> deployment<span class="token punctuation">.</span>默认部署规则</span></span></pre></td></tr><tr><td data-num="27"></td><td><pre>qnx<span class="token operator">:</span> target<span class="token punctuation">.</span>path <span class="token operator">=</span> <span class="token operator">/</span>tmp<span class="token operator">/</span>$$<span class="token punctuation">&#123;</span>TARGET<span class="token punctuation">&#125;</span><span class="token operator">/</span>bin</pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token keyword">else</span><span class="token operator">:</span> unix<span class="token operator">:</span><span class="token operator">!</span>android<span class="token operator">:</span> target<span class="token punctuation">.</span>path <span class="token operator">=</span> <span class="token operator">/</span>opt<span class="token operator">/</span>$$<span class="token punctuation">&#123;</span>TARGET<span class="token punctuation">&#125;</span><span class="token operator">/</span>bin</pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token operator">!</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>path<span class="token punctuation">)</span><span class="token operator">:</span> INSTALLS <span class="token operator">+=</span> target</pre></td></tr></table></figure><hr><blockquote><p>槽类似 <code>信号</code> ，当点击之后对相关函数进行响应。</p></blockquote><p><img data-src="https://mmbiz.qpic.cn/mmbiz_png/ORog4TEnkbtic2O0MkovYJ6NZ3JsfkuGFHaHZr1RLWMYOMUEluvIV81h1ImicrpXcLVLh3MviarCnX1kswv30xv1A/0?wx_fmt=png" alt="槽" title="槽"></p><blockquote><p><code>Signals and Slots Editor</code> 信号与槽编辑，</p></blockquote><ul><li>发送者即点击的对象，如图点击 pushButton_2 上面 close，</li><li>第二个信号为 <code>clicked()</code> 即当点击发送者的时候，</li><li>接受者为 发送者执行信号 <code>clicked()</code> 然后接受者 <code>执行</code> 槽</li><li>close () 接受者 widgets (窗口) 即 <code>关闭窗口</code> ，<br><img data-src="https://mmbiz.qpic.cn/mmbiz_png/ORog4TEnkbtic2O0MkovYJ6NZ3JsfkuGFbicJEs1RPFfE0M27m036v8lHdD3jogquSNWjYNxrXUibQz9tTUxqCI9w/0?wx_fmt=png" alt="信号与槽操作" title="信号与槽操作"></li></ul><h3 id="maincpp"><a class="anchor" href="#maincpp">#</a> main.cpp</h3><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"widgets.h"</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QApplication></span>  <span class="token comment">//qt 的标准应用程序，QT 必须有得</span></span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token comment">// 应用程序对应，在一个 Qt 项目中实例对应有且仅有一个</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token comment">// 类的作用：检测触发的事件，进行事件循环并处理</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    QApplication <span class="token function">a</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 必须引用对应的 #include &lt;QApplication></span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token comment">//widgets 创建 w 对象</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    widgets w<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token comment">//w 调用 show 方法，显示窗体</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    w<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">//a 为 qt 的应用程序，返回让 qt 执行起来。</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token comment">// 应用程序对应开始事件循环，保证应用程序不退出，阻塞函数</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="widgetsh"><a class="anchor" href="#widgetsh">#</a> widgets.h</h3><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">WIDGETS_H</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">WIDGETS_H</span></span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>QT_BEGIN_NAMESPACE</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 命名空间 Ui 里面的 widgets 类</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">namespace</span> Ui <span class="token punctuation">&#123;</span> <span class="token keyword">class</span> <span class="token class-name">widgets</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>QT_END_NAMESPACE</pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">// 此 widgets 与上面命名空间的 ui 里的 widgets 不同，在不同的命名空间</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">widgets</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QWidget</span> <span class="token comment">// 来自 Qwidget 基类</span></span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token comment">// 宏，使用 QT 的信号与槽都要使用到此宏</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    Q_OBJECT</pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token comment">// 构造函数和析构函数</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token function">widgets</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token operator">~</span><span class="token function">widgets</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token comment">// 私有成员 ui 命名空间里面的 widgets</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token comment">// 定义指针指向窗口的 UI 对象</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    Ui<span class="token double-colon punctuation">::</span>widgets <span class="token operator">*</span>ui<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span> <span class="token comment">// WIDGETS_H</span></span></pre></td></tr></table></figure><h3 id="widgetscpp"><a class="anchor" href="#widgetscpp">#</a> widgets.cpp</h3><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"widgets.h"</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"ui_widgets.h"</span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"testwidget.h"</span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>widgets<span class="token double-colon punctuation">::</span><span class="token function">widgets</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token operator">:</span> <span class="token function">QWidget</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">ui</span><span class="token punctuation">(</span><span class="token keyword">new</span> Ui<span class="token double-colon punctuation">::</span>widgets<span class="token punctuation">)</span> <span class="token comment">// 开辟类内存空间</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token comment">// 调用 setupUi，</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token comment">// 通过此就可修改主窗口的相关设置于获取</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    ui<span class="token operator">-></span><span class="token function">setupUi</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 实现窗口的各种空间属性，信号与槽关联等</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    </pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token comment">// 一般在 qt 的构造函数中进行数据初始化操作 (窗口，数据....)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token comment">// 如显示当前窗口，并显示另一个窗口</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token comment">// 要独立显示窗口，必须要进行 show 操作</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression"><span class="token number">0</span><span class="token operator">:</span></span></span></pre></td></tr><tr><td data-num="15"></td><td><pre>    TestWidget<span class="token operator">*</span> w <span class="token operator">=</span> <span class="token keyword">new</span> TestWidget<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token comment">// 显示当前窗体</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    w<span class="token operator">-></span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">else</span></span></pre></td></tr><tr><td data-num="19"></td><td><pre>	<span class="token comment">// 指定了父对象，子窗口和父窗口一起显示出来，内嵌入父窗口</span></pre></td></tr><tr><td data-num="20"></td><td><pre>	TestWidget<span class="token operator">*</span> w <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TestWidget</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 显示到 this 里面，testwidget 被嵌入到 this 对应的主窗口</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endig</span></span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token class-name">widgets</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">widgets</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token comment">// 析构函数释放 new 的空间</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token keyword">delete</span> ui<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="使用代码实现在widgets上的功能"><a class="anchor" href="#使用代码实现在widgets上的功能">#</a> 使用代码实现在 widgets 上的功能</h2><blockquote><p><code>QMainWindow带菜单栏</code> 的窗口<br>使用代码实现不创建 UI 相关文件</p></blockquote><p><img data-src="https://mmbiz.qpic.cn/mmbiz_png/ORog4TEnkbsEWEBQFD3s86j0r70OwDwAqTwpibY7k59fZf52rnegUiapUnDx6YpDWpZKtHgfAmDeYrnCvUHic753Q/640?wx_fmt=png" alt="文件列表" title="文件列表"></p><h3 id="可视化和代码编写对比"><a class="anchor" href="#可视化和代码编写对比">#</a> 可视化和代码编写对比：</h3><ul><li>可视化 <code>不</code> 用编写代码，极大的省去界面布局调节时间成本</li><li>但有些组件没法完全通过 ui 进行可视化添加需要设计 <code>纯代码</code></li><li>纯代码确实效率会低，繁琐，但 <code>可补充ui</code> 无法实现的功能</li></ul><h3 id="对象数object-trees"><a class="anchor" href="#对象数object-trees">#</a> 对象数 Object Trees</h3><blockquote><p>QObjects organize themselves in object trees. When you create a <code>QObject</code> with another object as <code>parent</code> , it's added to the parent's children() list, and is deleted when the parent is. It turns out that this approach fits the needs of GUI objects very well. For example, a QShortcut (keyboard shortcut) is a child of the relevant window, so when the user closes that window, the shortcut is deleted too.<br>QQuickItem, the basic visual element of the Qt Quick module, inherits from QObject, but has a concept of the visual parent which differs from that of the QObject parent. An item's visual parent may not necessarily be the same as its object parent. See Concepts - Visual Parent in Qt Quick for more details.<br>QWidget, the fundamental class of the Qt Widgets module, extends the parent-child relationship. A child normally also becomes a child widget, i.e. it is displayed in its parent's coordinate system and is graphically clipped by its parent's boundaries. For example, <code>when</code> the application deletes a message box after it has been closed, the message box's buttons and label are <code>also</code> deleted, just as we'd want, because the buttons and label are children of the message box.<br>You can also delete child objects yourself, and they will remove themselves from their parents. For example, when the user removes a toolbar it may lead to the application deleting one of its QToolBar objects, in which case the tool bar's QMainWindow parent would detect the change and reconfigure its screen space accordingly.<br>The debugging functions QObject::dumpObjectTree() and QObject::dumpObjectInfo() are often useful when an application looks or acts strangely.</p></blockquote><h3 id="qdebug"><a class="anchor" href="#qdebug">#</a> QDebug</h3><blockquote><p>In the common case, it is useful to call the qDebug() function to obtain a default QDebug object to use for <code>writing debugging information</code> .</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDebug></span> <span class="token comment">// 引用 QDebug 头文件</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Date:"</span> <span class="token operator">&lt;&lt;</span> <span class="token class-name">QDate</span><span class="token double-colon punctuation">::</span><span class="token function">currentDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="在no_ui新建一个qmyclass类"><a class="anchor" href="#在no_ui新建一个qmyclass类">#</a> 在 NO_UI 新建一个 QMyClass 类</h3><blockquote><p>验证 Object Trees 关闭是否可以 <code>自动释放</code> new 的空间，而 <code>无需</code> 再析构函数手动 delete 申请的空间</p></blockquote><h3 id="代码验证"><a class="anchor" href="#代码验证">#</a> 代码验证</h3><h4 id="widgeth"><a class="anchor" href="#widgeth">#</a> widget.h</h4><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">WIDGET_H</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">WIDGET_H</span></span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Widget</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QWidget</span></span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    Q_OBJECT</pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token function">Widget</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token operator">~</span><span class="token function">Widget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span> <span class="token comment">// WIDGET_H</span></span></pre></td></tr></table></figure><h4 id="widgetcpp"><a class="anchor" href="#widgetcpp">#</a> widget.cpp</h4><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"widget.h"</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QLabel></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QPushButton></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"qmyclass.h"</span> <span class="token comment">// 引用刚才自己创建的类</span></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 对象树 // 窗口部件的销毁也会相应销毁子部件 label 等内容申请的空间</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// 所以只需申请 new 而无需 delete</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token class-name">Widget</span><span class="token double-colon punctuation">::</span><span class="token function">Widget</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token operator">:</span> <span class="token function">QWidget</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token comment">// 让其窗口隶属于父类 1,2,3</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token comment">// 请求 Qlabel 空间</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    QLabel <span class="token operator">*</span>label <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QLabel</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//3, 直接带参数，直接隶属于其父类</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token comment">// 设立 text 文件</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    label<span class="token operator">-></span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"I Love You,XinXin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token comment">// 设置位置</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    label<span class="token operator">-></span><span class="token function">move</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token comment">//c 创建按钮，但并未有操作功能</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    QPushButton <span class="token operator">*</span>button <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QPushButton</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//this 内嵌到父类</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    button<span class="token operator">-></span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"Close"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置 Pushbutton 内的文字</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    button<span class="token operator">-></span><span class="token function">setFixedSize</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置按钮的固定大小</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    button<span class="token operator">-></span><span class="token function">move</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span><span class="token number">180</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 起点为父类的左上角</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token comment">// 当窗口被关闭后，QMyClass 的析构函数也被自动调用</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token comment">// 只需写 new，无需再手动写含 delete 的内容</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    QMyClass <span class="token operator">*</span>myclass <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QMyClass</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token comment">//1, 此形式呈现会呈现在独立的窗口</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token comment">//label->show();</span></pre></td></tr><tr><td data-num="31"></td><td><pre></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token comment">//2, 让 label 隶属于其父类</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token comment">//label->setParent(this);</span></pre></td></tr><tr><td data-num="34"></td><td><pre></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token comment">// 指定窗体的大小</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token comment">// 锁定大小，不可改变</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token comment">//setFixedSize(400,300);</span></pre></td></tr><tr><td data-num="39"></td><td><pre></pre></td></tr><tr><td data-num="40"></td><td><pre>    <span class="token function">setWindowTitle</span><span class="token punctuation">(</span><span class="token string">"My First No UI"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre></pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="43"></td><td><pre></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token class-name">Widget</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">Widget</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>    <span class="token comment">//</span></pre></td></tr><tr><td data-num="47"></td><td><pre></pre></td></tr><tr><td data-num="48"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="qmyclassh"><a class="anchor" href="#qmyclassh">#</a> qmyclass.h</h4><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">QMYCLASS_H</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">QMYCLASS_H</span></span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">QMyClass</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QWidget</span></span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    Q_OBJECT</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">explicit</span> <span class="token function">QMyClass</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token operator">~</span><span class="token function">QMyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 作为判断析构函数是否被调用到</span></pre></td></tr><tr><td data-num="12"></td><td><pre>signals<span class="token operator">:</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span> <span class="token comment">// QMYCLASS_H</span></span></pre></td></tr></table></figure><h4 id="qmyclasscpp"><a class="anchor" href="#qmyclasscpp">#</a> qmyclass.cpp</h4><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"qmyclass.h"</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDebug></span>  <span class="token comment">// 输出内容头文件</span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token class-name">QMyClass</span><span class="token double-colon punctuation">::</span><span class="token function">QMyClass</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token operator">:</span> QWidget<span class="token punctuation">&#123;</span>parent<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token class-name">QMyClass</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">QMyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token comment">//QT 打印内容，qDebug 输出内容</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"delete myclass"</span><span class="token punctuation">;</span> <span class="token comment">// 当手动关系窗口，析构函数被调用</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="maincpp和no_uipro不变"><a class="anchor" href="#maincpp和no_uipro不变">#</a> main.cpp 和 NO_UI.pro 不变</h4><h2 id="基础窗口类"><a class="anchor" href="#基础窗口类">#</a> 基础窗口类</h2><ul><li><code>QWidget</code><ul><li><code>所有窗口</code> 类的 <code>基类</code></li><li>Qt 中的控件 (按钮，输入框，单选框…) 也属于窗口，基类都是 <code>QWidget</code></li><li><code>可以内嵌</code> 到其他窗口中：没有边框</li><li>可以不内嵌单独显示：独立的窗口，有边框</li></ul></li><li><code>QDialog</code><ul><li><code>对话框类</code> ，</li><li><code>不能内嵌</code> 到其他窗口中，必须调用 show 方法才显示。</li></ul></li><li><code>QMainWindow</code><ul><li>有 <code>工具栏，状态栏，菜单栏</code> ，</li><li><code>不能内嵌</code> 到其他窗口中</li></ul></li></ul><h2 id="窗口的显示"><a class="anchor" href="#窗口的显示">#</a> 窗口的显示</h2><ul><li>内嵌窗口<ul><li><code>依附于</code> 某一个大的窗口，作为了大窗口的一部分</li><li>大窗口就是这个内嵌窗口的父窗口</li><li>父窗口显示的时候，内嵌的窗口也就被显示出来了</li></ul></li><li>不内嵌窗口<ul><li>这类窗口有边框，有标题栏</li><li>需要调用函数才可以显示 show</li></ul></li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//QWidget 是所有窗口类的基类，调用这个提供的 show () 方法显示窗口 非模态显示</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">QWidget</span><span class="token double-colon punctuation">::</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 显示当前窗口和它的子窗口</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 对话框窗口的模态显示，// 会阻塞当前窗口，不能切换到其它窗口</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">[</span><span class="token keyword">virtual</span> slot<span class="token punctuation">]</span> <span class="token keyword">int</span> <span class="token class-name">QDialog</span><span class="token double-colon punctuation">::</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="qt坐标"><a class="anchor" href="#qt坐标">#</a> Qt 坐标</h2><blockquote><p>Qt 的坐标原点在窗口 <code>左上角</code> 。内嵌的情况下基于其父窗口。<br><code>x轴</code> 向 <code>右</code> 递增，<br><code>y轴</code> 向 <code>下</code> 递增</p></blockquote><h2 id="qt内存回收"><a class="anchor" href="#qt内存回收">#</a> Qt 内存回收</h2><blockquote><p>new 创建堆内存，<br>析构顺序从子窗口到顶层主窗口<br>若创建的对应是 QObject 类的之类 (间接之类也可). 创建的对应，必须要指定其父对象是谁，</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 通过构造函数 parent 当前窗口的父对象</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">QWidget</span><span class="token double-colon punctuation">::</span><span class="token function">QWidget</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent <span class="token operator">=</span> Q_NULLPTR<span class="token punctuation">,</span>Qt<span class="token double-colon punctuation">::</span>WindowFlags f <span class="token operator">=</span> <span class="token class-name">Qt</span><span class="token double-colon punctuation">::</span><span class="token function">WindowFlags</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token class-name">QTimer</span><span class="token double-colon punctuation">::</span><span class="token function">QTimer</span><span class="token punctuation">(</span>QObject <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">//2，通过 setParent () 方法</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">QWidget</span><span class="token double-colon punctuation">::</span><span class="token function">setParent</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">QObject</span><span class="token double-colon punctuation">::</span><span class="token function">setParent</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent<span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id="qt-log输出"><a class="anchor" href="#qt-log输出">#</a> Qt log 输出</h2><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDebug></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">QDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"输出日志"</span><span class="token punctuation">;</span></pre></td></tr></table></figure><blockquote><p>若向将 <code>log日志</code> 文件输出到 <code>控制台</code> ，进入 pro 文件，在 <code>CONFIG</code> 后面加 <code>console</code> , 重新构建即可。</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>CONFIG <span class="token operator">+=</span> C<span class="token operator">++</span><span class="token number">11</span> console</pre></td></tr></table></figure><h2 id="字符类型"><a class="anchor" href="#字符类型">#</a> 字符类型</h2><h3 id="qbytearray"><a class="anchor" href="#qbytearray">#</a> QByteArray</h3><blockquote><p><code>char*</code> 的升级版</p></blockquote><h3 id="qstring"><a class="anchor" href="#qstring">#</a> QString</h3><blockquote><p>QString 是 <code>QByteArray</code> 的 <code>封装</code> ，<br>QString 计算长度根据字符个数，而 QByteArray 是将一个中文字符对应三个<br>具体参考 原文</p></blockquote><h3 id="qvariant"><a class="anchor" href="#qvariant">#</a> QVariant</h3><blockquote><p>使用 <code>QVariant</code> 对 <code>自定义类型</code> 进行处理</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">Person</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token keyword">int</span> id<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	QString name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 引用</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">// 创建 Person 对象</span></pre></td></tr><tr><td data-num="9"></td><td><pre>Person p<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>p<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>p<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"张三"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment">// 将其设置为 QVariant 有两种方法</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression"><span class="token number">0</span></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre>	QVariant v<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	v<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span></span></pre></td></tr><tr><td data-num="17"></td><td><pre>	QVariant v <span class="token operator">=</span> <span class="token class-name">QVariant</span><span class="token double-colon punctuation">::</span><span class="token function">fromValue</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span></pre></td></tr><tr><td data-num="19"></td><td><pre>	<span class="token comment">// 取出 V 对象中的数据</span></pre></td></tr><tr><td data-num="20"></td><td><pre>	<span class="token keyword">if</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">canConvert</span><span class="token generic class-name"><span class="token operator">&lt;</span>Person<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre>	<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>		<span class="token comment">// 转换</span></pre></td></tr><tr><td data-num="23"></td><td><pre>		Person tmp <span class="token operator">=</span> v<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">value</span><span class="token generic class-name"><span class="token operator">&lt;</span>Person<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>		<span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span>tmp<span class="token punctuation">.</span>id<span class="token operator">&lt;&lt;</span>tmp<span class="token punctuation">.</span>name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>参考资料:<br>* 爱编程的大丙：详细部分 <code>https://subingwen.cn/qt/qt-basetype/</code><br>* 嵌入式开发设计</p><div class="tags"><a href="/tags/C/" rel="tag"><i class="ic i-tag"></i>C++</a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/" rel="tag"><i class="ic i-tag"></i>计算机科学</a><a href="/tags/Qt/" rel="tag"><i class="ic i-tag"></i>Qt</a></div></div><footer><div class="meta"><span class="icon"><i class="ic i-eye"></i></span><span>此文章已被阅读次数:</span><span class="waline-pageview-count" id="twikoo_visitors" data-path="computer-science/cpp/course-5/Qt基础入门/">正在加载...</span><span class="item"><span class="icon"><i class="ic i-calendar-check"></i></span><span class="text">更新于</span><time title="修改时间：2023-05-26 23:15:56" itemprop="dateModified" datetime="2023-05-26T23:15:56+08:00">2023-05-26</time></span></div><div class="reward"><button><i class="ic i-heartbeat"></i>赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/assets/wechatpay.png" alt="YuHeShui 微信支付"><p>微信支付</p></div><div><img data-src="/assets/alipay.png" alt="YuHeShui 支付宝"><p>支付宝</p></div><div><img data-src="/assets/paypal.png" alt="YuHeShui 贝宝"><p>贝宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者：</strong>YuHeShui<i class="ic i-at"><em>@</em></i>瓶子的跋涉</li><li class="link"><strong>本文链接：</strong><a href="https://www.blog.foryouos.cn/computer-science/cpp/course-5/Qt%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8/" title="Qt基础入门">https://www.blog.foryouos.cn/computer-science/cpp/course-5/Qt基础入门/</a></li><li class="license"><strong>版权声明：</strong>本站所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener external nofollow noreferrer" target="_blank"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/computer-science/Linux/Linux%E7%9A%84Makefile/" rel="prev" itemprop="url" data-background-image="https:&#x2F;&#x2F;i.imgtg.com&#x2F;2023&#x2F;04&#x2F;24&#x2F;IeepG.jpg" title="Makefile"><span class="type">上一篇</span><span class="category"><i class="ic i-flag"></i>Linux</span><h3>Makefile</h3></a></div><div class="item right"><a href="/computer-science/Linux/cmake/" rel="next" itemprop="url" data-background-image="https:&#x2F;&#x2F;i.imgtg.com&#x2F;2023&#x2F;05&#x2F;27&#x2F;OoNJE1.jpg" title="Cmake笔记"><span class="type">下一篇</span><span class="category"><i class="ic i-flag"></i>Linux</span><h3>Cmake笔记</h3></a></div></div><div class="wrap" id="wcomments"></div><script type="module" data-pjax="data-pjax">import { init } from 'https://unpkg.com/@waline/client@v2/dist/waline.mjs';

const path = document.getElementById("twikoo_visitors").getAttribute("data-path");
setTimeout(function () {
    init({
        el: '#wcomments',
        serverURL: 'https://foryouos.zeabur.app',
        lang: 'zh-CN',
        locale: {},
        emoji: ["https://unpkg.com/@waline/emojis@1.0.1/weibo","https://unpkg.com/@waline/emojis@1.0.1/alus","https://unpkg.com/@waline/emojis@1.0.1/bilibili","https://unpkg.com/@waline/emojis@1.0.1/qq","https://unpkg.com/@waline/emojis@1.0.1/tieba","https://unpkg.com/@waline/emojis@1.0.1/tw-emoji"],
        meta: ["nick","mail","link"],
        requiredMeta: ["nick","mail"],
        wordLimit: 0,
        pageSize: 10,
        pageview: true,
        path: path,
        dark: 'html[data-theme="dark"]'
    });
}, 1000)</script></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#qt%E5%88%9D%E6%AD%A5%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text">QT 初步简介</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#qt%E6%A8%A1%E5%9D%97"><span class="toc-number">1.1.</span> <span class="toc-text">Qt 模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E5%AE%B9%E9%87%8D%E8%BF%B0"><span class="toc-number">1.2.</span> <span class="toc-text">内容重述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8qt"><span class="toc-number">1.3.</span> <span class="toc-text">启动 QT</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E5%AF%B9%E8%AF%9D%E6%A1%86dialog"><span class="toc-number">1.3.1.</span> <span class="toc-text">基于对话框！Dialog</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ui%E7%BC%96%E8%BE%91%E5%8C%BA"><span class="toc-number">1.3.2.</span> <span class="toc-text">UI 编辑区</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9logo"><span class="toc-number">1.3.3.</span> <span class="toc-text">修改 logo</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C"><span class="toc-number">1.3.4.</span> <span class="toc-text">运行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#qt%E8%BD%AF%E4%BB%B6%E7%9A%84%E5%8F%91%E5%B8%83"><span class="toc-number">1.3.5.</span> <span class="toc-text">QT 软件的发布</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#qwidget"><span class="toc-number">1.3.6.</span> <span class="toc-text">Qwidget</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pro%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3"><span class="toc-number">1.3.6.1.</span> <span class="toc-text">.pro 文件详解</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#maincpp"><span class="toc-number">1.3.7.</span> <span class="toc-text">main.cpp</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#widgetsh"><span class="toc-number">1.3.8.</span> <span class="toc-text">widgets.h</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#widgetscpp"><span class="toc-number">1.3.9.</span> <span class="toc-text">widgets.cpp</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0%E5%9C%A8widgets%E4%B8%8A%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="toc-number">1.4.</span> <span class="toc-text">使用代码实现在 widgets 上的功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E8%A7%86%E5%8C%96%E5%92%8C%E4%BB%A3%E7%A0%81%E7%BC%96%E5%86%99%E5%AF%B9%E6%AF%94"><span class="toc-number">1.4.1.</span> <span class="toc-text">可视化和代码编写对比：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E6%95%B0object-trees"><span class="toc-number">1.4.2.</span> <span class="toc-text">对象数 Object Trees</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#qdebug"><span class="toc-number">1.4.3.</span> <span class="toc-text">QDebug</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8no_ui%E6%96%B0%E5%BB%BA%E4%B8%80%E4%B8%AAqmyclass%E7%B1%BB"><span class="toc-number">1.4.4.</span> <span class="toc-text">在 NO_UI 新建一个 QMyClass 类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E9%AA%8C%E8%AF%81"><span class="toc-number">1.4.5.</span> <span class="toc-text">代码验证</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#widgeth"><span class="toc-number">1.4.5.1.</span> <span class="toc-text">widget.h</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#widgetcpp"><span class="toc-number">1.4.5.2.</span> <span class="toc-text">widget.cpp</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#qmyclassh"><span class="toc-number">1.4.5.3.</span> <span class="toc-text">qmyclass.h</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#qmyclasscpp"><span class="toc-number">1.4.5.4.</span> <span class="toc-text">qmyclass.cpp</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#maincpp%E5%92%8Cno_uipro%E4%B8%8D%E5%8F%98"><span class="toc-number">1.4.5.5.</span> <span class="toc-text">main.cpp 和 NO_UI.pro 不变</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E7%AA%97%E5%8F%A3%E7%B1%BB"><span class="toc-number">1.5.</span> <span class="toc-text">基础窗口类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AA%97%E5%8F%A3%E7%9A%84%E6%98%BE%E7%A4%BA"><span class="toc-number">1.6.</span> <span class="toc-text">窗口的显示</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#qt%E5%9D%90%E6%A0%87"><span class="toc-number">1.7.</span> <span class="toc-text">Qt 坐标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#qt%E5%86%85%E5%AD%98%E5%9B%9E%E6%94%B6"><span class="toc-number">1.8.</span> <span class="toc-text">Qt 内存回收</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#qt-log%E8%BE%93%E5%87%BA"><span class="toc-number">1.9.</span> <span class="toc-text">Qt log 输出</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.10.</span> <span class="toc-text">字符类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#qbytearray"><span class="toc-number">1.10.1.</span> <span class="toc-text">QByteArray</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#qstring"><span class="toc-number">1.10.2.</span> <span class="toc-text">QString</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#qvariant"><span class="toc-number">1.10.3.</span> <span class="toc-text">QVariant</span></a></li></ol></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/computer-science/cpp/course-5/Qt%E5%A4%9A%E7%BA%BF%E7%A8%8B/" rel="bookmark" title="Qt多线程">Qt多线程</a></li><li class="active"><a href="/computer-science/cpp/course-5/Qt%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8/" rel="bookmark" title="Qt基础入门">Qt基础入门</a></li><li><a href="/computer-science/cpp/course-5/Qt%E4%BF%A1%E5%8F%B7%E4%B8%8E%E6%A7%BD/" rel="bookmark" title="Qt信号与槽">Qt信号与槽</a></li><li><a href="/computer-science/cpp/course-5/Qt%E7%AA%97%E5%8F%A3%E4%B8%8E%E6%8E%A7%E4%BB%B6/" rel="bookmark" title="Qt窗口与控件">Qt窗口与控件</a></li><li><a href="/computer-science/cpp/course-5/Qt%E4%BA%8B%E4%BB%B6/" rel="bookmark" title="Qt事件">Qt事件</a></li><li><a href="/computer-science/cpp/course-5/Qt%E5%AE%9E%E7%8E%B0%E4%B8%B2%E5%8F%A3%E9%80%9A%E4%BF%A1/" rel="bookmark" title="Qt实现串口通信">Qt实现串口通信</a></li><li><a href="/computer-science/cpp/course-5/Qt%E5%A5%97%E6%8E%A5%E5%AD%97%E9%80%9A%E4%BF%A1/" rel="bookmark" title="Qt套接字通信">Qt套接字通信</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="YuHeShui" data-src="/assets/avatar.jpg"><p class="name" itemprop="name">YuHeShui</p><div class="description" itemprop="description">瓶子的跋涉 & 编程笔记</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">58</span><span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">17</span><span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">33</span><span class="name">标签</span></a></div></nav><div class="social"><a href="https://github.com/foryouos" class="item github" rel="noopener external nofollow noreferrer" title="https:&#x2F;&#x2F;github.com&#x2F;foryouos" target="_blank"><i class="ic i-github"></i></a><a href="https://www.zhihu.com/people/foryouos" class="item zhihu" rel="noopener external nofollow noreferrer" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;foryouos" target="_blank"><i class="ic i-zhihu"></i></a><a href="mailto:foryouos@mail.com" class="item email" rel="noopener external nofollow noreferrer" title="mailto:foryouos@mail.com" target="_blank"><i class="ic i-envelope"></i></a></div><div class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="javascript:void(0);" rel="external nofollow noreferrer"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item dropdown"><a href="javascript:void(0);" rel="external nofollow noreferrer"><i class="ic i-user"></i>外链</a><ul class="submenu"><li class="item"><a href="https://www.foryouos.cn/" rel="noopener external nofollow noreferrer" target="_blank"><i class="ic i-user"></i>主页</a></li><li class="item"><a href="https://www.so.foryouos.cn/" rel="noopener external nofollow noreferrer" target="_blank"><i class="ic i-magic"></i>搜索</a></li><li class="item"><a href="https://imgtg.com/foryouos" rel="noopener external nofollow noreferrer" target="_blank"><i class="ic i-coffee"></i>图库</a></li></ul></li></div></div></div></div><ul id="quick"><li class="prev pjax"><a href="/computer-science/Linux/cmake/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/computer-science/Linux/Linux%E7%9A%84Makefile/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/" title="分类于C++">C++</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/course-6/" title="分类于零声笔记">零声笔记</a><i class="ic i-angle-right"></i></div><span><a href="/computer-science/cpp/course-6/C%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0%E7%BA%A2%E9%BB%91%E6%A0%91/">红黑树</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/" title="分类于C++">C++</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/course-4/" title="分类于C和C++项目">C和C++项目</a><i class="ic i-angle-right"></i></div><span><a href="/computer-science/cpp/course-4/cpp%E5%AE%9E%E7%8E%B0%E9%93%B6%E8%A1%8C%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/">C++实现银行管理系统</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/Linux/" title="分类于Linux">Linux</a><i class="ic i-angle-right"></i></div><span><a href="/computer-science/Linux/Linux%E6%96%87%E4%BB%B6/">linux文件</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/" title="分类于C++">C++</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/course-1/" title="分类于郑莉老师C++语言程序设计">郑莉老师C++语言程序设计</a><i class="ic i-angle-right"></i></div><span><a href="/computer-science/cpp/course-1/cpp%E6%B3%9B%E5%8C%96%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/">C++泛化程序设计</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/" title="分类于C++">C++</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/course-3/" title="分类于C++开源库">C++开源库</a><i class="ic i-angle-right"></i></div><span><a href="/computer-science/cpp/course-3/%E7%BA%BF%E7%A8%8B%E6%B1%A0/">C和C++线程池汇总</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/" title="分类于C++">C++</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/course-1/" title="分类于郑莉老师C++语言程序设计">郑莉老师C++语言程序设计</a><i class="ic i-angle-right"></i></div><span><a href="/computer-science/cpp/course-1/cpp%E6%95%B0%E7%BB%84%E6%8C%87%E9%92%88%E5%AD%97%E7%AC%A6%E4%B8%B2/">C++数组指针字符串</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/Linux/" title="分类于Linux">Linux</a><i class="ic i-angle-right"></i></div><span><a href="/computer-science/Linux/Linux%E5%A5%97%E6%8E%A5%E5%AD%97%E9%80%9A%E4%BF%A1UDP/">linux套接字通信UDP</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/" title="分类于C++">C++</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/course-5/" title="分类于Qt">Qt</a><i class="ic i-angle-right"></i></div><span><a href="/computer-science/cpp/course-5/Qt%E4%BA%8B%E4%BB%B6/">Qt事件</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/Git/" title="分类于Git分布式版本控制">Git分布式版本控制</a><i class="ic i-angle-right"></i></div><span><a href="/computer-science/Git/Git%E4%BD%BF%E7%94%A8%E8%AF%AD%E6%B3%95/">Git使用语法</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/" title="分类于C++">C++</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/course-2/" title="分类于汇编与STl新特征">汇编与STl新特征</a><i class="ic i-angle-right"></i></div><span><a href="/computer-science/cpp/course-2/cpp%E6%96%B0%E7%89%B9%E6%80%A7%E5%8F%98%E9%87%8F/">C++11新特性变量</a></span></li></ul></div><div class="rpost pjax"><h2>最新评论</h2><ul class="leancloud-recent-comment" id="new-comment"><li class="item" v-for="com in coms"><a v-bind:href="com.href" data-pjax-state="data-pjax-state"><span class="breadcrumb">{{com.nick}} @ {{com.time}}</span><span>{{com.text}}<br></span></a></li></ul></div></div><div class="status"><div class="copyright">&copy; 2022 -<span itemprop="copyrightYear">2023</span><span class="with-love"><i class="ic i-sakura rotate"></i></span><span class="author" itemprop="copyrightHolder">YuHeShui @ foryouos</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i></span><span title="站点总字数">652k 字</span><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="ic i-coffee"></i></span><span title="站点阅读时长">9:52</span></div><div class="powered-by">基于 <a href="https://hexo.io/" rel="noopener external nofollow noreferrer" target="_blank">Hexo</a> & Theme.<a href="https://github.com/theme-shoka-x/hexo-theme-shokaX/" rel="noopener external nofollow noreferrer" target="_blank">ShokaX</a></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"computer-science/cpp/course-5/Qt基础入门/",favicon:{show:"不负韶华",hide:"以梦为马！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,chart:!1,copy_tex:!1,katex:!1,mermaid:!1,audio:"",fancybox:!0,nocopy:!1,outime:!0,template:"&lt;div class=&quot;note warning&quot;&gt;&lt;p&gt;&lt;span class=&quot;label warning&quot;&gt;文章时效性提示&lt;/span&gt;&lt;br&gt;这是一篇发布于 {{publish}} 天前，最后一次更新在 {{updated}} 天前的文章，部分信息可能已经发生改变，请注意甄别。&lt;/p&gt;&lt;/div&gt;",quiz:{choice:"单选题",multiple:"多选题",true_false:"判断题",essay:"问答题",gap_fill:"填空题",mistake:"错题备注"},ignores:[t=>t.includes("#"),t=>new RegExp(LOCAL.path+"$").test(t),[]]}</script><script src="https://polyfill.io/v3/polyfill.min.js?features=default,fetch"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/pace/1.0.2/pace.min.js"></script><script src="https://unpkg.com/theme-shokax-pjax@latest/pjax.shokax.min.js"></script><script src="https://unpkg.com/theme-shokax-anime@latest/anime.shokax.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/algoliasearch/4.12.1/algoliasearch-lite.umd.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/instantsearch.js/4.39.0/instantsearch.production.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/lozad.js/1.16.0/lozad.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/quicklink/2.2.0/quicklink.umd.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/??jquery/3.5.1/jquery.min.js,fancybox/3.5.7/jquery.fancybox.min.js,justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js" async></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/KaTeX/0.12.0/contrib/copy-tex.min.js" async></script><script src="https://unpkg.com/frappe-charts@1.5.0/dist/frappe-charts.min.iife.js"></script><script src="/js/app.js?v=0.2.10"></script><script data-pjax="data-pjax">var _hmt=_hmt||[];!function(){var e=document.createElement("script"),t=(e.src="https://hm.baidu.com/hm.js?e3ba29befb93fdf32bbc553d0e5bee92",e.async=!0,document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)}()</script><script type="module" data-pjax>let items = []
        import { RecentComments } from 'https://unpkg.com/@waline/client@v2/dist/waline.mjs'
        RecentComments({
          serverURL: 'https://foryouos.zeabur.app',
          count: 10,
        }).then(({ comments }) => {
          comments.forEach(function (item) {
              let cText = (item.orig.length > 50) ? item.orig.substring(0,50)+'...' : item.orig
              item.url = item.url !== '/' ?  '/' + item.url : item.url;
              const siteLink = item.url + "#" + item.objectId
              items.push({
                  href: siteLink,
                  nick: item.nick,
                  time: item.insertedAt.split('T').shift(),
                  text: cText
              })
          })
          Vue.createApp({
            data() {
                return {
                    coms: items
                }
            }
          }).mount('#new-comment')
        }).catch(function (err) {
          console.error(err)
        })</script></body></html><!-- rebuild by hexo-renderer-multi-next-markdown-it -->