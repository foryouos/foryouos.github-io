<!-- build time: Thu Jul 20 2023 21:16:34 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta http-equiv="X-UA-COMPATIBLE" content="IE=edge,chrome=1"><meta name="renderer" content="webkit"><link rel="icon" type="image/ico" sizes="32x32" href="/assets/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png"><meta name="baidu-site-verification" content="codeva-yIAXMzOV6I"><link rel="alternate" href="/rss.xml" title="瓶子的跋涉" type="application/rss+xml"><link rel="alternate" href="/atom.xml" title="瓶子的跋涉" type="application/atom+xml"><link rel="alternate" type="application/json" title="瓶子的跋涉" href="https://www.blog.foryouos.cn/feed.json"><meta name="referrer" content="no-referrer"><meta name="C++,后台服务器开发,QT,汇编,学习笔记,瓶子的跋涉,foryouos" content="foryouos & 瓶子的跋涉 & 编程笔记 博客"><meta name="瓶子的跋涉&foryouos&于喝水" content="瓶子的跋涉&foryouos&于喝水"><link rel="preconnect" href="https://lf9-cdn-tos.bytecdntp.com"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://unpkg.com"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.10"><script src="https://cdn.staticfile.org/vue/3.2.45/vue.global.prod.js"></script><link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css"><meta name="keywords" content="Linux"><link rel="canonical" href="https://www.blog.foryouos.cn/computer-science/Linux/cmake/"><title>Cmake笔记</title><meta name="generator" content="Hexo 6.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">Cmake笔记</h1><div class="meta"><span class="item" title="创建时间：2023-05-27 09:26:43"><span class="icon"><i class="ic i-calendar"></i></span><span class="text">发表于</span><time itemprop="dateCreated datePublished" datetime="2023-05-27T09:26:43+08:00">2023-05-27</time></span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i></span><span class="text">本文字数</span><span>14k</span><span class="text">字</span></span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i></span><span class="text">阅读时长</span><span>12 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span><span class="line"></span><span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">foryouos</a></li></ul><ul class="right" id="rightNav"><li class="item theme" @click="changeThemeByBtn"><i class="ic" :class="{'i-sun': !themeStatus,'i-moon': themeStatus}"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div class="pjax" id="imgs"><img src="https://i.imgtg.com/2023/05/27/OoNJE1.jpg"></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"></use><use xlink:href="#gentle-wave" x="48" y="3"></use><use xlink:href="#gentle-wave" x="48" y="5"></use><use xlink:href="#gentle-wave" x="48" y="7"></use></g></svg></div><main><div class="inner"><div class="pjax" id="main"><div class="article wrap"><div class="breadcrumb" itemlistelement itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i><span><a href="/">首页</a></span><i class="ic i-angle-right"></i><span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/" itemprop="item" rel="index" title="分类于计算机科学"><span itemprop="name">计算机科学<meta itemprop="position" content="0"></span></a></span><i class="ic i-angle-right"></i><span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/Linux/" itemprop="item" rel="index" title="分类于Linux"><span itemprop="name">Linux<meta itemprop="position" content="1"></span></a></span><i class="ic i-angle-right"></i></div><article class="post block" itemscope itemtype="http://schema.org/Article" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.blog.foryouos.cn/computer-science/Linux/cmake/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/assets/avatar.jpg"><meta itemprop="name" content="YuHeShui"><meta itemprop="description" content="YuHeShui, 瓶子的跋涉 &amp; 编程笔记"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="瓶子的跋涉"></span><div class="body md" itemprop="articleBody"><h1 id="cmake笔记"><a class="anchor" href="#cmake笔记">#</a> <code>Cmake</code> 笔记</h1><blockquote><p><code>Cmake</code> 允许开发者指定整个工程的编译流程，再根据编译平台，自动生成本地化的 <code>makefile</code> 和工程文件，只需 <code>make</code> 即可 <code>编译</code> 。一款自动生成 <code>Makefile</code> 的工具。程序执行流程：预处理，编译，汇编，链接与生成可执行文件<br><img data-src="https://i.imgtg.com/2023/05/27/OoNGdl.png" alt="CMake流程图" title="cmake流程图"></p></blockquote><h2 id="cmake优点"><a class="anchor" href="#cmake优点">#</a> <code>Cmake</code> 优点</h2><ul><li><code>跨平台</code></li><li>能够管理大型项目</li><li>简化编译构建过程和编译过程</li><li>可扩展：可以为 <code>cmake</code> 编写特定功能的模块，扩充 <code>cmake</code> 功能</li></ul><h2 id="cmake使用"><a class="anchor" href="#cmake使用">#</a> <code>Cmake</code> 使用</h2><blockquote><p><code>Cmake</code> 不区分大小写。</p></blockquote><h3 id="注释"><a class="anchor" href="#注释">#</a> 注释</h3><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 这是一个行注释</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">#[[ 这是一个</span></pre></td></tr><tr><td data-num="3"></td><td><pre>快注释 ]]</pre></td></tr></table></figure><h3 id="测试文件"><a class="anchor" href="#测试文件">#</a> 测试文件</h3><ul><li><code>add.c</code></li></ul><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"head.h"</span></span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">return</span> a<span class="token operator">+</span>b<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul><li><code>sub.c</code></li></ul><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"head.h"</span></span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">int</span> <span class="token function">subtract</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">return</span> a<span class="token operator">-</span>b<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul><li><code>mult.c</code></li></ul><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"head.h"</span></span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">int</span> <span class="token function">multiply</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">return</span> a<span class="token operator">*</span>b<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul><li><code>div.c</code></li></ul><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"head.h"</span></span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">double</span> <span class="token function">divide</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span>a<span class="token operator">/</span>b<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul><li><code>head.h</code></li></ul><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">_HEAD_H</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">_HEAD_H</span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 加法</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 减法</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">int</span> <span class="token function">subtract</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 乘法</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">int</span> <span class="token function">multiply</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">// 除法</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">double</span> <span class="token function">divide</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span></pre></td></tr></table></figure><ul><li>调用文件 <code>main.c</code></li></ul><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"head.h"</span></span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"a = %d, b = %d\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"a + b = %d\n"</span><span class="token punctuation">,</span> <span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"a - b = %d\n"</span><span class="token punctuation">,</span> <span class="token function">subtract</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"a * b = %d\n"</span><span class="token punctuation">,</span> <span class="token function">multiply</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"a / b = %f\n"</span><span class="token punctuation">,</span> <span class="token function">divide</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="添加cmakeliststxt"><a class="anchor" href="#添加cmakeliststxt">#</a> 添加 <code>CMakeLists.txt</code></h3><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 指定使用的 cmake 最低版本</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">cmake_minimum_required</span><span class="token punctuation">(</span><span class="token property">VERSION</span> <span class="token number">3.0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">#[[ project 定义工程名称，</span></pre></td></tr><tr><td data-num="4"></td><td><pre>并可指定工程的版本，</pre></td></tr><tr><td data-num="5"></td><td><pre>工程描述，</pre></td></tr><tr><td data-num="6"></td><td><pre>web主页地址，</pre></td></tr><tr><td data-num="7"></td><td><pre>支持的语言，</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment"># PROJECT 指令的语法是：</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">project</span><span class="token punctuation">(</span>&lt;PROJECT-<span class="token property">NAME</span><span class="token punctuation">></span> [&lt;language-name<span class="token punctuation">></span>...]<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">project</span><span class="token punctuation">(</span>&lt;PROJECT-<span class="token property">NAME</span><span class="token punctuation">></span>    </pre></td></tr><tr><td data-num="11"></td><td><pre>       [<span class="token property">VERSION</span> &lt;major<span class="token punctuation">></span>[.&lt;minor<span class="token punctuation">></span>[.&lt;patch<span class="token punctuation">></span>[.&lt;tweak<span class="token punctuation">></span>]]]]</pre></td></tr><tr><td data-num="12"></td><td><pre>       [DESCRIPTION &lt;project-description-string<span class="token punctuation">></span>]</pre></td></tr><tr><td data-num="13"></td><td><pre>       [HOMEPAGE_URL &lt;url-string<span class="token punctuation">></span>]</pre></td></tr><tr><td data-num="14"></td><td><pre>       [LANGUAGES &lt;language-name<span class="token punctuation">></span>...]<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>]]</pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">project</span><span class="token punctuation">(</span>CALC<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token comment"># add_executable：定义工程并生成一个可执行文件</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token comment"># add_executable (可执行文件名 源文件名称)</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">add_executable</span><span class="token punctuation">(</span>app add.c div.c main.c mult.c sub.c<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token comment"># 此可执行文件与 project 项目名无关系，文件名多个可以 `;` 间隔，也可不用</span></pre></td></tr></table></figure><h3 id="执行"><a class="anchor" href="#执行">#</a> 执行</h3><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># cmake 命令原型</span></pre></td></tr><tr><td data-num="2"></td><td><pre>cmake CMakeLists.txt文件所在路径</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment"># 执行此命令后会生成 Makefile 文件</span></pre></td></tr><tr><td data-num="4"></td><td><pre>make</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment"># 执行 make 执行 makefile 执行，即可将可执行程序编译出来</span></pre></td></tr></table></figure><h3 id="存入build"><a class="anchor" href="#存入build">#</a> 存入 build</h3><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 进入项目文件夹</span></pre></td></tr><tr><td data-num="2"></td><td><pre>mkdie build</pre></td></tr><tr><td data-num="3"></td><td><pre>cd build</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment"># 执行 cmake, 即可将所生成的文件存入 cmake 当中</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment"># cmake 在 build 文件内执行，文件地址在.. 上一级目录当中，即当前目录的上一级</span></pre></td></tr><tr><td data-num="6"></td><td><pre>cmake ..</pre></td></tr></table></figure><h3 id="定义变量"><a class="anchor" href="#定义变量">#</a> 定义变量</h3><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># set 指令语句 [] 中的参数为可选性</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">set</span><span class="token punctuation">(</span>VAR [<span class="token property">VALUE</span>] [<span class="token variable">CACHE</span> <span class="token property">TYPE</span> DOCSTRING [FORCE]]<span class="token punctuation">)</span></pre></td></tr></table></figure><ul><li>VAR : 变量名</li><li>VALUE: 变量值</li></ul><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">set</span><span class="token punctuation">(</span>SRC_LIST add.c;div.c;main.c;mult.c;sub.c<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">add_executable</span><span class="token punctuation">(</span>app <span class="token punctuation">$&#123;</span>SRC_LIST<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h3 id="指定使用的标准"><a class="anchor" href="#指定使用的标准">#</a> 指定使用的标准</h3><ul><li>普通编译使用</li></ul><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre>g++ *.cpp -std=c++<span class="token number">11</span> -o app</pre></td></tr></table></figure><ul><li>使用 <code>CMakeLists.txt</code> 中通过 <code>set</code> 命令指定<ul><li>在 <code>txt</code> 文件中指定</li></ul></li></ul><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 设置 C++11 标准编译</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token variable">CMAKE_CXX_STANDARD</span> <span class="token number">11</span><span class="token punctuation">)</span></pre></td></tr></table></figure><ul><li>在执行 cmake 时指定</li></ul><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre>cmake CMakeLists.txt文件路径 -DCMAKE_CXX_STANDARD=<span class="token number">11</span></pre></td></tr></table></figure><h3 id="指定输出路径"><a class="anchor" href="#指定输出路径">#</a> 指定输出路径</h3><blockquote><p><code>Cmake</code> 指定可自行输出的路径，对应宏: <code>EXECUTABLE_OUTPUT_PATH</code> ，通过 set 命令进行设置值</p></blockquote><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 定义变量用于存储一个绝对路径</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">set</span><span class="token punctuation">(</span>HOME /home/robin/linux/Sort<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment"># 将拼好的路径设置给 宏，若路径不存在将自动生成，使用相对路径，生成的 makefile 将对应 makefile 所在的路径</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token variable">EXECUTABLE_OUTPUT_PATH</span> <span class="token punctuation">$&#123;</span>HOME<span class="token punctuation">&#125;</span>/bin<span class="token punctuation">)</span></pre></td></tr></table></figure><h3 id="搜索文件"><a class="anchor" href="#搜索文件">#</a> 搜索 <code>文件</code></h3><blockquote><p>使用 <code>aux_source_directory</code> 命令或者 <code>file</code> 命令</p></blockquote><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">aux_source_directory</span><span class="token punctuation">(</span>&lt; dir <span class="token punctuation">></span> &lt; variable <span class="token punctuation">></span><span class="token punctuation">)</span></pre></td></tr></table></figure><ul><li><code>dir</code> 要搜索的目录</li><li><code>variable</code> 将从 <code>dir</code> 目录下搜索到的 <code>源文件</code> 列表存储到该变量中</li></ul><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">cmake_minimum_required</span><span class="token punctuation">(</span><span class="token property">VERSION</span> <span class="token number">3.0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">project</span><span class="token punctuation">(</span>CALC<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">include_directories</span><span class="token punctuation">(</span><span class="token punctuation">$&#123;</span><span class="token variable">PROJEcT_SOURCE_DIR</span><span class="token punctuation">&#125;</span>/include<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment"># 搜索 src 目录下的源文件</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">aux_source_directory</span><span class="token punctuation">(</span><span class="token punctuation">$&#123;</span><span class="token variable">CMAKE_CURRENT_SOURCE_DIE</span><span class="token punctuation">&#125;</span>/src SRC_LIST<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">add_executable</span><span class="token punctuation">(</span>app <span class="token punctuation">$&#123;</span>SRC_LIST<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h4 id="file文件名"><a class="anchor" href="#file文件名">#</a> file <code>文件名</code></h4><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">file</span><span class="token punctuation">(</span>GLOB/GLOB_RECURSE 变量名 要搜索的文件路径和文件类型<span class="token punctuation">)</span></pre></td></tr></table></figure><ul><li><code>GLOB</code> : 将指定目录下搜索到的满足条件的所有文件名生成一个列表，并将其存储到变量中</li><li><code>GLOB_RECURSE</code> ： <code>递归</code> 搜索指定目录，将搜索到的满足条件的 <code>文件名</code> 生成一个列表，并将其存储到变量中</li></ul><blockquote><p>搜索当前目录的 <code>src</code> 目录下所有的源文件，并存储到变量中<br><code>CMAKE_CURRENT_SOURCE_DIR</code> 表示当前访问的 <code>CMakeLists.txt</code> 文件所在的路径，关于要搜索文件路径和类型可加双引号，也可不加</p></blockquote><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">file</span><span class="token punctuation">(</span>GLOB MAIN_SRS <span class="token punctuation">$&#123;</span><span class="token variable">CMAKE_CURRENT_SOURCE_DIR</span><span class="token punctuation">&#125;</span>/src/*.cpp<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">file</span><span class="token punctuation">(</span>GLOB MAIN_HEAD <span class="token punctuation">$&#123;</span><span class="token variable">CMAKE_CURRENT_SOURCE_DIR</span><span class="token punctuation">&#125;</span>/include/*.h<span class="token punctuation">)</span></pre></td></tr></table></figure><h4 id="包含头文件"><a class="anchor" href="#包含头文件">#</a> 包含头文件</h4><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">include_directories</span><span class="token punctuation">(</span>headpath<span class="token punctuation">)</span></pre></td></tr></table></figure><h4 id="cmaelisttxt文件内容"><a class="anchor" href="#cmaelisttxt文件内容">#</a> <code>CMaeList.txt</code> 文件内容</h4><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">cmake_minimum_required</span><span class="token punctuation">(</span><span class="token property">VERSION</span> <span class="token number">3.0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">project</span><span class="token punctuation">(</span>CALC<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment"># 变量的值默认都是字符串类型</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token variable">CMAKE_CXX_STANDARD</span> <span class="token number">11</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">set</span><span class="token punctuation">(</span>HOME /home/robin/Linux/calc<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token variable">EXECUTABLE_OUTPUT_PATH</span> <span class="token punctuation">$&#123;</span>HOME<span class="token punctuation">&#125;</span>/bin/<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment"># PROJECT_SOURCE_DIR 宏对应的值就是在使用 cmake 命令时后面紧跟的目录，一般为工程的根目录</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">include_directories</span><span class="token punctuation">(</span><span class="token punctuation">$&#123;</span><span class="token variable">PROJECT_SOURCE_DIR</span><span class="token punctuation">&#125;</span>/include<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">file</span><span class="token punctuation">(</span>GLOB SRC_LIST <span class="token punctuation">$&#123;</span><span class="token variable">CMAKE_CURRENT_SOURCE_DIR</span><span class="token punctuation">&#125;</span>/src/*.cpp<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">add_executable</span><span class="token punctuation">(</span>app <span class="token punctuation">$&#123;</span>SRC_LIST<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id="制作静态库"><a class="anchor" href="#制作静态库">#</a> 制作静态库</h2><blockquote><p>Linux 静态库分为三个部分: <code>lib</code> + <code>库名称</code> + <code>.a</code></p></blockquote><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 制作库</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">add_library</span><span class="token punctuation">(</span>库名称 <span class="token namespace">STATIC</span> 源文件<span class="token number">1</span> [源文件<span class="token number">2</span>] ...<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment"># 例如</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment"># 设置动态库 / 静态库生成路径</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token variable">LIBRARY_OUTPUT_PATH</span> <span class="token punctuation">$&#123;</span><span class="token variable">PROJECT_SOURCE_DIR</span><span class="token punctuation">&#125;</span>/lib<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">add_library</span><span class="token punctuation">(</span>calc <span class="token namespace">STATIC</span> <span class="token punctuation">$&#123;</span>SRC_LIST<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment"># 最终生成对应的静态库文件 libcalc.a</span></pre></td></tr></table></figure><h2 id="制作动态库"><a class="anchor" href="#制作动态库">#</a> 制作动态库</h2><blockquote><p><code>Linux</code> 动态库名称分为 <code>lib + 库名称 + .so</code></p></blockquote><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 仅可设置动态链接库生成路径</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token variable">EXECUTABLE_OUTPUT_PATH</span> <span class="token punctuation">$&#123;</span><span class="token variable">PROJECT_SOURCE_DIR</span><span class="token punctuation">&#125;</span>/lib<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">add_library</span><span class="token punctuation">(</span>库名称 <span class="token namespace">SHARED</span> 源文件 [源文件<span class="token number">2</span>] ... <span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id="链接静态库"><a class="anchor" href="#链接静态库">#</a> 链接静态库</h2><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">link_libraries</span><span class="token punctuation">(</span>&lt;static lib<span class="token punctuation">></span> [&lt;static lib<span class="token punctuation">></span> ...]<span class="token punctuation">)</span></pre></td></tr></table></figure><ul><li>参数 1, 指出要链接的静态库名称，可以是全名，也可以是去掉头 lib 和尾.a 之后的名字，</li><li>参数 2 要链接的其它静态库名称</li></ul><blockquote><p>如果该静态库 <code>不是系统</code> 提供的，此时可以将静态库的 <code>路径指定</code> 出来</p></blockquote><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 指定静态库和动态库所在路径</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">link_directories</span><span class="token punctuation">(</span>&lt;lib path<span class="token punctuation">></span><span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id="链接动态库"><a class="anchor" href="#链接动态库">#</a> 链接动态库</h2><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    &lt;target<span class="token punctuation">></span> </pre></td></tr><tr><td data-num="3"></td><td><pre>    &lt;<span class="token namespace">PRIVATE</span>|<span class="token namespace">PUBLIC</span>|<span class="token namespace">INTERFACE</span><span class="token punctuation">></span> &lt;item<span class="token punctuation">></span>... </pre></td></tr><tr><td data-num="4"></td><td><pre>    [&lt;<span class="token namespace">PRIVATE</span>|<span class="token namespace">PUBLIC</span>|<span class="token namespace">INTERFACE</span><span class="token punctuation">></span> &lt;item<span class="token punctuation">></span>...]...<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment"># target：指定要加载动态库的文件的名字 也可以连接静态库</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment"># PRIVATE|PUBLIC|INTERFACE：动态库的访问权限，一般无需指定默认为 PUBLIC 动态库的链接具有传递性</span></pre></td></tr></table></figure><blockquote><p>由于动态链接库在可执行程序中并不会被打包到可执行程序中，应该将命令写到可执行文件之后。通过命令指定要链接的动态库位置，指定静态库位置使用的命令。</p></blockquote><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">cmake_minimum_required</span><span class="token punctuation">(</span><span class="token property">VERSION</span> <span class="token number">3.0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">project</span><span class="token punctuation">(</span>TEST<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">file</span><span class="token punctuation">(</span>GLOB SRC_LIST <span class="token punctuation">$&#123;</span><span class="token variable">CMAKE_CURRENT_SOURCE_DIR</span><span class="token punctuation">&#125;</span>/*.cpp<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment"># 指定源文件或者动态库对应的头文件路径</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">include_directories</span><span class="token punctuation">(</span><span class="token punctuation">$&#123;</span><span class="token variable">PROJECT_SOURCE_DIR</span><span class="token punctuation">&#125;</span>/include<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment"># 指定要链接的动态库的路径</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">link_directories</span><span class="token punctuation">(</span><span class="token punctuation">$&#123;</span><span class="token variable">PROJECT_SOURCE_DIR</span><span class="token punctuation">&#125;</span>/lib<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment"># 添加并指定最终生成的可执行程序名</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">add_executable</span><span class="token punctuation">(</span>app <span class="token punctuation">$&#123;</span>SRC_LIST<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment"># 指定可执行程序要链接的动态库名字</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment"># app 是最终生成的可执行程序的名字</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment"># pthread 可执行程序要加载的动态库，库的全名为 libpthread.so</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span>app pthread<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment"># 链接动态库放到最后</span></pre></td></tr></table></figure><h2 id="日志"><a class="anchor" href="#日志">#</a> 日志</h2><blockquote><p><code>CMake</code> 的命令工具会在 <code>stdout</code> 上显示 <code>STATUS</code> 信息，在 <code>stderr</code> 上显示所有信息， <code>CMake</code> 的 GUI 会在它的 log 区域显示所有信息， <code>CMake</code> 警告和错误信息的文本显示使用一种简洁的标记语言，文本没有缩进，超过长度的行会回卷，段落之间以新行作为分隔符</p><p>输出信息，但 <code>Cmake</code> 是不会中断的</p></blockquote><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">message</span><span class="token punctuation">(</span>[STATUS|WARNING|AUTHOR_WARNING|FATAL_ERROR|SEND_ERROR] <span class="token string">"message to display"</span> ...<span class="token punctuation">)</span></pre></td></tr></table></figure><ul><li>(无) ：重要消息</li><li><code>STATUS</code> ：非重要消息</li><li><code>WARNING</code> ： <code>CMake</code> 警告，会继续执行</li><li><code>AUTHOR_WARNING</code> ： <code>CMake</code> 警告 ( <code>dev</code> ), 会继续执行</li><li><code>SEND_ERROR</code> ： <code>CMake</code> 错误，继续执行，但是会跳过生成的步骤</li><li><code>FATAL_ERROR</code> ： <code>CMake</code> 非常严重错误， <code>终止所有处理过程</code></li></ul><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 输出一般信息</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">message</span><span class="token punctuation">(</span>STATUS <span class="token string">"source path: <span class="token interpolation"><span class="token punctuation">$&#123;</span><span class="token variable">PROJECT_SOURCE_DIR</span><span class="token punctuation">&#125;</span></span>"</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id="变量操作"><a class="anchor" href="#变量操作">#</a> 变量操作</h2><blockquote><p>有时候 <code>源文件</code> 并不一定都在一个目录中，但最后要编译器到一起，通过 <code>set</code> 或 <code>list</code> 命令对变量进行 <code>拼接</code></p></blockquote><h3 id="使用set拼接"><a class="anchor" href="#使用set拼接">#</a> 使用 set <code>拼接</code></h3><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">set</span><span class="token punctuation">(</span>变量名<span class="token number">1</span> <span class="token punctuation">$&#123;</span>变量名<span class="token punctuation">&#125;</span> <span class="token punctuation">$&#123;</span>变量名<span class="token number">2</span><span class="token punctuation">&#125;</span> ... <span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment"># 从第二个参数往后所有的字符串进行拼接，最后将结果存储到第一个参数中。如果第一个参数中原来有数据将对原数据进行覆盖</span></pre></td></tr></table></figure><h3 id="使用list拼接"><a class="anchor" href="#使用list拼接">#</a> 使用 list <code>拼接</code></h3><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># APPEND 表示进行数据追加， list 其实就是变量</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">list</span><span class="token punctuation">(</span>APPEND &lt;list<span class="token punctuation">></span> [&lt;element<span class="token punctuation">></span> ...]<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">cmake_minimum_required</span><span class="token punctuation">(</span><span class="token property">VERSION</span> <span class="token number">3.0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">project</span><span class="token punctuation">(</span>TEST<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">set</span><span class="token punctuation">(</span>TEMP <span class="token string">"hello,world"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">file</span><span class="token punctuation">(</span>GLOB SRC_1 <span class="token punctuation">$&#123;</span><span class="token variable">PROJECT_SOURCE_DIR</span><span class="token punctuation">&#125;</span>/src1/*.cpp<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">file</span><span class="token punctuation">(</span>GLOB SRC_2 <span class="token punctuation">$&#123;</span><span class="token variable">PROJECT_SOURCE_DIR</span><span class="token punctuation">&#125;</span>/src2/*.cpp<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment"># 追加 (拼接) # 只字符串管理中，内部是有分号的</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">list</span><span class="token punctuation">(</span>APPEND SRC_1 <span class="token punctuation">$&#123;</span>SRC_1<span class="token punctuation">&#125;</span> <span class="token punctuation">$&#123;</span>SRC_2<span class="token punctuation">&#125;</span> <span class="token punctuation">$&#123;</span>TEMP<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">message</span><span class="token punctuation">(</span>STATUS <span class="token string">"message: <span class="token interpolation"><span class="token punctuation">$&#123;</span><span class="token variable">SRC_1</span><span class="token punctuation">&#125;</span></span>"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment"># 输出所有.cpp 的绝对路径</span></pre></td></tr></table></figure><h3 id="使用list移除"><a class="anchor" href="#使用list移除">#</a> 使用 list 移除</h3><blockquote><p><code>REMOVE_ITEM</code></p></blockquote><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">list</span><span class="token punctuation">(</span>REMOVE_ITEM &lt;list<span class="token punctuation">></span> &lt;value<span class="token punctuation">></span> [&lt;value<span class="token punctuation">></span> ...]<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">cmake_minimum_required</span><span class="token punctuation">(</span><span class="token property">VERSION</span> <span class="token number">3.0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">project</span><span class="token punctuation">(</span>TEST<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">set</span><span class="token punctuation">(</span>TEMP <span class="token string">"hello,world"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">file</span><span class="token punctuation">(</span>GLOB SRC_1 <span class="token punctuation">$&#123;</span><span class="token variable">PROJECT_SOURCE_DIR</span><span class="token punctuation">&#125;</span>/*.cpp<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment"># 移除前日志</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">message</span><span class="token punctuation">(</span>STATUS <span class="token string">"message: <span class="token interpolation"><span class="token punctuation">$&#123;</span><span class="token variable">SRC_1</span><span class="token punctuation">&#125;</span></span>"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment"># 移除 main.cpp</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">list</span><span class="token punctuation">(</span>REMOVE_ITEM SRC_1 <span class="token punctuation">$&#123;</span><span class="token variable">PROJECT_SOURCE_DIR</span><span class="token punctuation">&#125;</span>/main.cpp<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment"># 移除后日志</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">message</span><span class="token punctuation">(</span>STATUS <span class="token string">"message: <span class="token interpolation"><span class="token punctuation">$&#123;</span><span class="token variable">SRC_1</span><span class="token punctuation">&#125;</span></span>"</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id="list使用"><a class="anchor" href="#list使用">#</a> <code>list</code> 使用</h2><ul><li>获取 <code>list</code> 的长度</li></ul><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">list</span><span class="token punctuation">(</span>LENGTH &lt;list<span class="token punctuation">></span> &lt;output variable<span class="token punctuation">></span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">#LENGTH：子命令 LENGTH 用于读取列表长度</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">#&lt;list>：当前操作的列表</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">#&lt;output variable>：新创建的变量，用于存储列表的长度。</span></pre></td></tr></table></figure><ul><li>读取列表中指定索引的元素，可以指定多个索引</li></ul><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">list</span><span class="token punctuation">(</span>GET &lt;list<span class="token punctuation">></span> &lt;element index<span class="token punctuation">></span> [&lt;element index<span class="token punctuation">></span> ...] &lt;output variable<span class="token punctuation">></span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">#&lt;list>：当前操作的列表</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">#&lt;element index>：列表元素的索引</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">#从 0 开始编号，索引 0 的元素为列表中的第一个元素；</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">#索引也可以是负数，-1 表示列表的最后一个元素，-2 表示列表倒数第二个元素，以此类推</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">#当索引（不管是正还是负）超过列表的长度，运行会报错</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">#&lt;output variable>：新创建的变量，存储指定索引元素的返回结果，也是一个列表。</span></pre></td></tr></table></figure><ul><li>查找列表是否存在指定的元素，若未找到，返回 -1</li></ul><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">list</span><span class="token punctuation">(</span>FIND &lt;list<span class="token punctuation">></span> &lt;value<span class="token punctuation">></span> &lt;output variable<span class="token punctuation">></span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">#&lt;list>：当前操作的列表</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">#&lt;value>：需要再列表中搜索的元素</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">#&lt;output variable>：新创建的变量</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">#如果列表 &lt;list> 中存在 &lt;value>，那么返回 &lt;value> 在列表中的索引</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">#如果未找到则返回 - 1。</span></pre></td></tr></table></figure><ul><li>将列表中的元素用连接符 (字符串) 连接起来组成一个字符串</li></ul><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">list</span> <span class="token punctuation">(</span>JOIN &lt;list<span class="token punctuation">></span> &lt;glue<span class="token punctuation">></span> &lt;output variable<span class="token punctuation">></span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">#&lt;list>：当前操作的列表</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">#&lt;glue>：指定的连接符（字符串）</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">#&lt;output variable>：新创建的变量，存储返回的字符串</span></pre></td></tr></table></figure><ul><li>将元素追加到列表中</li></ul><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">list</span> <span class="token punctuation">(</span>APPEND &lt;list<span class="token punctuation">></span> [&lt;element<span class="token punctuation">></span> ...]<span class="token punctuation">)</span></pre></td></tr></table></figure><ul><li>在 list 中指定的位置插入若干元素</li></ul><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">list</span><span class="token punctuation">(</span>INSERT &lt;list<span class="token punctuation">></span> &lt;element_index<span class="token punctuation">></span> &lt;element<span class="token punctuation">></span> [&lt;element<span class="token punctuation">></span> ...]<span class="token punctuation">)</span></pre></td></tr></table></figure><ul><li>在元素插入到列表的 0 索引为止</li></ul><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">list</span> <span class="token punctuation">(</span>PREPEND &lt;list<span class="token punctuation">></span> [&lt;element<span class="token punctuation">></span> ...]<span class="token punctuation">)</span></pre></td></tr></table></figure><ul><li>将列表中最后元素移除</li></ul><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">list</span> <span class="token punctuation">(</span>POP_BACK &lt;list<span class="token punctuation">></span> [&lt;out-var<span class="token punctuation">></span>...]<span class="token punctuation">)</span></pre></td></tr></table></figure><ul><li>将指定的元素从列表中移除</li></ul><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">list</span> <span class="token punctuation">(</span>REMOVE_ITEM &lt;list<span class="token punctuation">></span> &lt;value<span class="token punctuation">></span> [&lt;value<span class="token punctuation">></span> ...]<span class="token punctuation">)</span></pre></td></tr></table></figure><ul><li>移除列表中重复元素</li></ul><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">list</span> <span class="token punctuation">(</span>REMOVE_DUPLICATES &lt;list<span class="token punctuation">></span><span class="token punctuation">)</span></pre></td></tr></table></figure><ul><li>列表翻转</li></ul><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">list</span><span class="token punctuation">(</span>REVERSE &lt;list<span class="token punctuation">></span><span class="token punctuation">)</span></pre></td></tr></table></figure><ul><li>列表 <code>排序</code></li></ul><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">list</span> <span class="token punctuation">(</span>SORT &lt;list<span class="token punctuation">></span> [COMPARE &lt;compare<span class="token punctuation">></span>] [CASE &lt;case<span class="token punctuation">></span>] [ORDER &lt;order<span class="token punctuation">></span>]<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">#[[ COMPARE：指定排序方法。有如下几种值可选：</span></pre></td></tr><tr><td data-num="3"></td><td><pre>STRING: 按照字母顺序进行排序，为默认的排序方法</pre></td></tr><tr><td data-num="4"></td><td><pre>FILE_BASENAME：如果是一系列路径名，会使用 basename 进行排序</pre></td></tr><tr><td data-num="5"></td><td><pre>NATURAL：使用自然数顺序排序</pre></td></tr><tr><td data-num="6"></td><td><pre>CASE：指明是否大小写敏感。有如下几种值可选：</pre></td></tr><tr><td data-num="7"></td><td><pre>SENSITIVE: 按照大小写敏感的方式进行排序，为默认值</pre></td></tr><tr><td data-num="8"></td><td><pre>INSENSITIVE：按照大小写不敏感方式进行排序</pre></td></tr><tr><td data-num="9"></td><td><pre>ORDER：指明排序的顺序。有如下几种值可选：</pre></td></tr><tr><td data-num="10"></td><td><pre>ASCENDING: 按照升序排列，为默认值</pre></td></tr><tr><td data-num="11"></td><td><pre>DESCENDING：按照降序排列 ]]</pre></td></tr></table></figure><h2 id="宏定义"><a class="anchor" href="#宏定义">#</a> 宏定义</h2><ul><li>在源代码中进行 <code>宏</code> 定义</li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NUMBER</span> <span class="token expression"><span class="token number">1</span></span></span></pre></td></tr></table></figure><ul><li>在编译的时候进行宏定义</li></ul><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 通过参数 - D 指定要定义的宏的名称</span></pre></td></tr><tr><td data-num="2"></td><td><pre>gcc test.c -DDEBUG -o app</pre></td></tr></table></figure><ul><li>在 <code>CMake</code> 中</li></ul><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">add_definitions</span><span class="token punctuation">(</span>-D宏名称<span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id="预宏定义列表"><a class="anchor" href="#预宏定义列表">#</a> 预宏定义列表</h2><table><thead><tr><th>宏</th><th>功能</th></tr></thead><tbody><tr><td><code>PROJECT_SOURCE_DIR</code></td><td>使用 <code>cmake</code> 命令后紧跟的目录，一般是工程的根目录</td></tr><tr><td><code>PROJECT_BINARY_DIR</code></td><td>执行 <code>cmake</code> 命令的目录</td></tr><tr><td><code>CMAKE_CURRENT_SOURCE_DIR</code></td><td>当前处理的 <code>CMakeLists.txt</code> 所在的路径</td></tr><tr><td><code>CMAKE_CURRENT_BINARY_DIR</code></td><td><code>target</code> 编译目录</td></tr><tr><td><code>EXECUTABLE_OUTPUT_PATH</code></td><td>重新定义目标二进制可执行文件的存放位置</td></tr><tr><td><code>LIBRARY_OUTPUT_PATH</code></td><td>重新定义目标链接库文件的存放位置</td></tr><tr><td><code>PROJECT_NAME</code></td><td>返回通过 <code>PROJECT</code> 指令定义的项目名称</td></tr><tr><td><code>CMAKE_BINARY_DIR</code></td><td>项目实际构建路径，假设在 <code>build</code> 目录进行的构建，那么得到的就是这个目录的路径</td></tr></tbody></table><h2 id="嵌套cmake"><a class="anchor" href="#嵌套cmake">#</a> 嵌套 <code>CMake</code></h2><blockquote><p>若项目较大，化繁为简为每个源码目录都添加一个 <code>CMakeLists.txt</code> 文件，使文件不太复杂，更领会，更容易维护</p></blockquote><h3 id="节点关系"><a class="anchor" href="#节点关系">#</a> 节点关系</h3><ul><li>Linux 目录是树状结构，最顶层的 <code>CMakeLists.txt</code> 是 <code>根</code> 节点，其次使子节点。</li><li>根节点 <code>CMakeLists.txt</code> 的变量 <code>全局有效</code></li><li>父节点变量可以在子节点中使用</li><li>子节点变量只能在当前节点中使用</li></ul><h3 id="添加子目录"><a class="anchor" href="#添加子目录">#</a> 添加子目录</h3><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">add_subdirectory</span><span class="token punctuation">(</span>source_dir,[binary_dir] [<span class="token property">EXCLUDE_FROM_ALL</span>]<span class="token punctuation">)</span></pre></td></tr></table></figure><ul><li><code>source_dir</code> ：z 指定 <code>CMakeLists.txt</code> 源文件和代码文件的位置，指定子目录</li><li><code>binary_dir</code> ：指定输出文件的路径，一般不需要指定，忽略即可</li><li><code>EXCLUDE_FROM_ALL</code> : 在子路径下默认不会被包含到父路径的 ALL 目录里，并且也会被排除在 <code>IDE</code> 工程文件之外，必须显式构建在子路径下的目标</li></ul><h4 id="目录结构"><a class="anchor" href="#目录结构">#</a> 目录结构</h4><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre>$ tree</pre></td></tr><tr><td data-num="2"></td><td><pre>.</pre></td></tr><tr><td data-num="3"></td><td><pre>├── build</pre></td></tr><tr><td data-num="4"></td><td><pre>├── calc</pre></td></tr><tr><td data-num="5"></td><td><pre>│   ├── add.cpp</pre></td></tr><tr><td data-num="6"></td><td><pre>│   ├── CMakeLists.txt</pre></td></tr><tr><td data-num="7"></td><td><pre>│   ├── div.cpp</pre></td></tr><tr><td data-num="8"></td><td><pre>│   ├── mult.cpp</pre></td></tr><tr><td data-num="9"></td><td><pre>│   └── sub.cpp</pre></td></tr><tr><td data-num="10"></td><td><pre>├── CMakeLists.txt</pre></td></tr><tr><td data-num="11"></td><td><pre>├── include</pre></td></tr><tr><td data-num="12"></td><td><pre>│   ├── calc.h</pre></td></tr><tr><td data-num="13"></td><td><pre>│   └── sort.h</pre></td></tr><tr><td data-num="14"></td><td><pre>├── sort</pre></td></tr><tr><td data-num="15"></td><td><pre>│   ├── CMakeLists.txt</pre></td></tr><tr><td data-num="16"></td><td><pre>│   ├── insert.cpp</pre></td></tr><tr><td data-num="17"></td><td><pre>│   └── select.cpp</pre></td></tr><tr><td data-num="18"></td><td><pre>├── test1</pre></td></tr><tr><td data-num="19"></td><td><pre>│   ├── calc.cpp</pre></td></tr><tr><td data-num="20"></td><td><pre>│   └── CMakeLists.txt</pre></td></tr><tr><td data-num="21"></td><td><pre>└── test2</pre></td></tr><tr><td data-num="22"></td><td><pre>    ├── CMakeLists.txt</pre></td></tr><tr><td data-num="23"></td><td><pre>    └── sort.cpp</pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token number">6</span> directories, <span class="token number">15</span> files</pre></td></tr></table></figure><ul><li>根目录</li></ul><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">cmake_minimum_required</span><span class="token punctuation">(</span><span class="token property">VERSION</span> <span class="token number">3.0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">project</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment"># 定义变量，根目录下的全局变量给子节点使用，提高子节点的 CMake 的可读性和可维护性</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment"># 静态库生成的路径</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">set</span><span class="token punctuation">(</span>LIB_PATH <span class="token punctuation">$&#123;</span><span class="token variable">CMAKE_CURRENT_SOURCE_DIR</span><span class="token punctuation">&#125;</span>/lib<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment"># 测试程序生成的路径</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">set</span><span class="token punctuation">(</span>EXEC_PATH <span class="token punctuation">$&#123;</span><span class="token variable">CMAKE_CURRENT_SOURCE_DIR</span><span class="token punctuation">&#125;</span>/bin<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment"># 头文件目录</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">set</span><span class="token punctuation">(</span>HEAD_PATH <span class="token punctuation">$&#123;</span><span class="token variable">CMAKE_CURRENT_SOURCE_DIR</span><span class="token punctuation">&#125;</span>/include<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment"># 静态库的名字</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">set</span><span class="token punctuation">(</span>CALC_LIB calc<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">set</span><span class="token punctuation">(</span>SORT_LIB sort<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment"># 可执行程序的名字</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">set</span><span class="token punctuation">(</span>APP_NAME_1 test1<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">set</span><span class="token punctuation">(</span>APP_NAME_2 test2<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token comment"># 添加子目录</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">add_subdirectory</span><span class="token punctuation">(</span>calc<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token keyword">add_subdirectory</span><span class="token punctuation">(</span>sort<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">add_subdirectory</span><span class="token punctuation">(</span>test1<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">add_subdirectory</span><span class="token punctuation">(</span>test2<span class="token punctuation">)</span></pre></td></tr></table></figure><ul><li>calc 目录</li></ul><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">cmake_minimum_required</span><span class="token punctuation">(</span><span class="token property">VERSION</span> <span class="token number">3.0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">project</span><span class="token punctuation">(</span>CALCLIB<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment"># 搜索当前 calc 目录下的所有文件</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">aux_source_directory</span><span class="token punctuation">(</span>./ SRC<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment"># 包含头文件路径，根节点已经定义</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">include_directories</span><span class="token punctuation">(</span><span class="token punctuation">$&#123;</span>HEAD_PATH<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment"># 设置库的生成路径</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token variable">LIBRARY_OUTPUT_PATH</span> <span class="token punctuation">$&#123;</span>LIB_PATH<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment"># 生成静态库，</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">add_library</span><span class="token punctuation">(</span><span class="token punctuation">$&#123;</span>CALC_LIB<span class="token punctuation">&#125;</span> <span class="token namespace">STATIC</span> <span class="token punctuation">$&#123;</span>SRC<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><ul><li>sort 目录</li></ul><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">cmake_minimum_required</span><span class="token punctuation">(</span><span class="token property">VERSION</span> <span class="token number">3.0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">project</span><span class="token punctuation">(</span>SORTLIB<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">aux_source_directory</span><span class="token punctuation">(</span>./ SRC<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">include_directories</span><span class="token punctuation">(</span><span class="token punctuation">$&#123;</span>HEAD_PATH<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token variable">LIBRARY_OUTPUT_PATH</span> <span class="token punctuation">$&#123;</span>LIB_PATH<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment"># 生成动态库，</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">add_library</span><span class="token punctuation">(</span><span class="token punctuation">$&#123;</span>SORT_LIB<span class="token punctuation">&#125;</span> <span class="token namespace">SHARED</span> <span class="token punctuation">$&#123;</span>SRC<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><ul><li>test1 目录</li></ul><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">cmake_minimum_required</span><span class="token punctuation">(</span><span class="token property">VERSION</span> <span class="token number">3.0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">project</span><span class="token punctuation">(</span>CALCTEST<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">aux_source_directory</span><span class="token punctuation">(</span>./ SRC<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment"># 指定头文件</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">include_directories</span><span class="token punctuation">(</span><span class="token punctuation">$&#123;</span>HEAD_PATH<span class="token punctuation">&#125;</span><span class="token punctuation">)</span> </pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment"># 执行可执行程序要链接的静态库</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">link_libraries</span><span class="token punctuation">(</span><span class="token punctuation">$&#123;</span>CALC_LIB<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment"># 设置可执行程序生成的路径</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token variable">EXECUTABLE_OUTPUT_PATH</span> <span class="token punctuation">$&#123;</span>EXEC_PATH<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment"># 生成可自行程序</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">add_executable</span><span class="token punctuation">(</span><span class="token punctuation">$&#123;</span>APP_NAME_1<span class="token punctuation">&#125;</span> <span class="token punctuation">$&#123;</span>SRC<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><ul><li>test2 目录</li></ul><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">cmake_minimum_required</span><span class="token punctuation">(</span><span class="token property">VERSION</span> <span class="token number">3.0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">project</span><span class="token punctuation">(</span>SORTTEST<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">aux_source_directory</span><span class="token punctuation">(</span>./ SRC<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment"># 头文件路径</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">include_directories</span><span class="token punctuation">(</span><span class="token punctuation">$&#123;</span>HEAD_PATH<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token variable">EXECUTABLE_OUTPUT_PATH</span> <span class="token punctuation">$&#123;</span>EXEC_PATH<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment"># link_directories($&#123;LIB_PATH&#125;)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">add_executable</span><span class="token punctuation">(</span><span class="token punctuation">$&#123;</span>APP_NAME_2<span class="token punctuation">&#125;</span> <span class="token punctuation">$&#123;</span>SRC<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">#指定可执行程序要链接的动态库的名字</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span><span class="token punctuation">$&#123;</span>APP_NAME_2<span class="token punctuation">&#125;</span> <span class="token punctuation">$&#123;</span>SORT_LIB<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><blockquote><p>若某个程序某个模块生成的动态库 / 静态库，在 CMakeLists.txt 制定了库的输出路径，其它库需要加载，直接使用即可。<br>如果没有指定，就需要 link_directories 将库文件路径指定出来</p></blockquote><ul><li>构建项目</li></ul><pre><code class="language-cmak">cmake
</code></pre><h2 id="流程控制"><a class="anchor" href="#流程控制">#</a> 流程控制</h2><ul><li>条件判断</li></ul><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">if</span><span class="token punctuation">(</span>&lt;condition<span class="token punctuation">></span><span class="token punctuation">)</span>  <span class="token comment">#if 和 endif 必须成对出现</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  &lt;commands<span class="token punctuation">></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">elseif</span><span class="token punctuation">(</span>&lt;condition<span class="token punctuation">></span><span class="token punctuation">)</span> <span class="token comment"># 可选快，可以重复</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  &lt;commands<span class="token punctuation">></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">else</span><span class="token punctuation">(</span><span class="token punctuation">)</span>              <span class="token comment"># 可选快</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  &lt;commands<span class="token punctuation">></span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">endif</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure><ul><li>基本表达式</li></ul><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">if</span><span class="token punctuation">(</span>&lt;expression<span class="token punctuation">></span><span class="token punctuation">)</span> <span class="token comment"># 如果</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">NOT</span> &lt;condition<span class="token punctuation">></span><span class="token punctuation">)</span> <span class="token comment">#如果不</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">if</span><span class="token punctuation">(</span>&lt;cond1<span class="token punctuation">></span> <span class="token operator">AND</span> &lt;cond2<span class="token punctuation">></span><span class="token punctuation">)</span> <span class="token comment"># 和</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">if</span><span class="token punctuation">(</span>&lt;cond1<span class="token punctuation">></span> <span class="token operator">OR</span> &lt;cond2<span class="token punctuation">></span><span class="token punctuation">)</span>  <span class="token comment"># 或者</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment"># 基于数值比较</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">if</span><span class="token punctuation">(</span>&lt;variable|string<span class="token punctuation">></span> <span class="token operator">LESS</span> &lt;variable|string<span class="token punctuation">></span><span class="token punctuation">)</span>  <span class="token comment"># 小于</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">if</span><span class="token punctuation">(</span>&lt;variable|string<span class="token punctuation">></span> <span class="token operator">GREATER</span> &lt;variable|string<span class="token punctuation">></span><span class="token punctuation">)</span> <span class="token comment"># 大于</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">if</span><span class="token punctuation">(</span>&lt;variable|string<span class="token punctuation">></span> <span class="token operator">EQUAL</span> &lt;variable|string<span class="token punctuation">></span><span class="token punctuation">)</span>  <span class="token comment"># 等于</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">if</span><span class="token punctuation">(</span>&lt;variable|string<span class="token punctuation">></span> LESS_EQUAL &lt;variable|string<span class="token punctuation">></span><span class="token punctuation">)</span>  <span class="token comment"># 小于等于</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">if</span><span class="token punctuation">(</span>&lt;variable|string<span class="token punctuation">></span> GREATER_EQUAL &lt;variable|string<span class="token punctuation">></span><span class="token punctuation">)</span>  <span class="token comment"># 大于等于</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment"># 基于字符串比较</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">if</span><span class="token punctuation">(</span>&lt;variable|string<span class="token punctuation">></span> <span class="token operator">STRLESS</span> &lt;variable|string<span class="token punctuation">></span><span class="token punctuation">)</span> <span class="token comment">#小于</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">if</span><span class="token punctuation">(</span>&lt;variable|string<span class="token punctuation">></span> <span class="token operator">STRGREATER</span> &lt;variable|string<span class="token punctuation">></span><span class="token punctuation">)</span> <span class="token comment"># 大于</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">if</span><span class="token punctuation">(</span>&lt;variable|string<span class="token punctuation">></span> <span class="token operator">STREQUAL</span> &lt;variable|string<span class="token punctuation">></span><span class="token punctuation">)</span>  <span class="token comment"># 等于</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">if</span><span class="token punctuation">(</span>&lt;variable|string<span class="token punctuation">></span> STRLESS_EQUAL &lt;variable|string<span class="token punctuation">></span><span class="token punctuation">)</span> <span class="token comment"># 小于等于</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">if</span><span class="token punctuation">(</span>&lt;variable|string<span class="token punctuation">></span> STRGREATER_EQUAL &lt;variable|string<span class="token punctuation">></span><span class="token punctuation">)</span> <span class="token comment"># 大于等于</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token comment"># 文件操作</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token keyword">if</span><span class="token punctuation">(</span>EXISTS path-to-file-or-directory<span class="token punctuation">)</span>  <span class="token comment"># 如果目录存在</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">if</span><span class="token punctuation">(</span>IS_DIRECTORY path<span class="token punctuation">)</span>  <span class="token comment"># 如果不是目录</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">if</span><span class="token punctuation">(</span>IS_SYMLINK file-name<span class="token punctuation">)</span> <span class="token comment"># 如果是软链接 file-name 必须是绝对路径</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token keyword">if</span><span class="token punctuation">(</span>IS_ABSOLUTE path<span class="token punctuation">)</span> <span class="token comment"># 判断是不是绝对路径</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token keyword">if</span><span class="token punctuation">(</span>&lt;variable|string<span class="token punctuation">></span> IN_LIST &lt;variable<span class="token punctuation">></span><span class="token punctuation">)</span> <span class="token comment"># 判断某个元素是否在列表中</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token keyword">if</span><span class="token punctuation">(</span>&lt;variable|string<span class="token punctuation">></span> PATH_EQUAL &lt;variable|string<span class="token punctuation">></span><span class="token punctuation">)</span> <span class="token comment"># 判断两个路径是否相等</span></pre></td></tr></table></figure><ul><li>循环</li></ul><blockquote><p>foreach 可以对 items 中的数据进行遍历，通过 loop_var 将遍历到当前的值取出</p></blockquote><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">foreach</span><span class="token punctuation">(</span>&lt;loop_var<span class="token punctuation">></span> &lt;items<span class="token punctuation">></span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    &lt;commands<span class="token punctuation">></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">endforeach</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment"># RANGE 关键字表示遍历范围</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment"># stop 正整数，表示范围的结束值，从 0 开始，最大值为 stop</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment"># loop_var：存储每次循环取出的值</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">foreach</span><span class="token punctuation">(</span>&lt;loop_var<span class="token punctuation">></span> RANGE &lt;stop<span class="token punctuation">></span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment"># start 开始值，step 步长默认 1</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">foreach</span><span class="token punctuation">(</span>&lt;loop_var<span class="token punctuation">></span> RANGE &lt;start<span class="token punctuation">></span> &lt;stop<span class="token punctuation">></span> [&lt;step<span class="token punctuation">></span>]<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment"># IN 在... 里面</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment"># LISTS，对应列表 list, 通过 set list 获得</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment"># 创建 list</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">set</span><span class="token punctuation">(</span>WORD a b c d<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token property">NAME</span> ace sabo luffy<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment"># ITEMS 对应也为列表</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token comment"># loop_var 每次循环取出的值</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">foreach</span><span class="token punctuation">(</span>&lt;loop_var<span class="token punctuation">></span> IN [LISTS [&lt;lists<span class="token punctuation">></span>]] [ITEMS [&lt;items<span class="token punctuation">></span>]]<span class="token punctuation">)</span></pre></td></tr></table></figure><ul><li>while</li></ul><figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">while</span><span class="token punctuation">(</span>&lt;condition<span class="token punctuation">></span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    &lt;commands<span class="token punctuation">></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">endwhile</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id="参考资料"><a class="anchor" href="#参考资料">#</a> 参考资料:</h2><ul><li>爱编程的大丙</li></ul><div class="tags"><a href="/tags/Linux/" rel="tag"><i class="ic i-tag"></i>Linux</a></div></div><footer><div class="meta"><span class="icon"><i class="ic i-eye"></i></span><span>此文章已被阅读次数:</span><span class="waline-pageview-count" id="twikoo_visitors" data-path="computer-science/Linux/cmake/">正在加载...</span><span class="item"><span class="icon"><i class="ic i-calendar-check"></i></span><span class="text">更新于</span><time title="修改时间：2023-05-27 21:52:37" itemprop="dateModified" datetime="2023-05-27T21:52:37+08:00">2023-05-27</time></span></div><div class="reward"><button><i class="ic i-heartbeat"></i>赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/assets/wechatpay.png" alt="YuHeShui 微信支付"><p>微信支付</p></div><div><img data-src="/assets/alipay.png" alt="YuHeShui 支付宝"><p>支付宝</p></div><div><img data-src="/assets/paypal.png" alt="YuHeShui 贝宝"><p>贝宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者：</strong>YuHeShui<i class="ic i-at"><em>@</em></i>瓶子的跋涉</li><li class="link"><strong>本文链接：</strong><a href="https://www.blog.foryouos.cn/computer-science/Linux/cmake/" title="Cmake笔记">https://www.blog.foryouos.cn/computer-science/Linux/cmake/</a></li><li class="license"><strong>版权声明：</strong>本站所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener external nofollow noreferrer" target="_blank"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/computer-science/cpp/course-5/Qt%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8/" rel="prev" itemprop="url" data-background-image="https:&#x2F;&#x2F;i.imgtg.com&#x2F;2023&#x2F;05&#x2F;26&#x2F;OoUUxG.jpg" title="Qt基础入门"><span class="type">上一篇</span><span class="category"><i class="ic i-flag"></i>Qt</span><h3>Qt基础入门</h3></a></div><div class="item right"><a href="/computer-science/cpp/course-5/Qt%E4%BF%A1%E5%8F%B7%E4%B8%8E%E6%A7%BD/" rel="next" itemprop="url" data-background-image="https:&#x2F;&#x2F;i.imgtg.com&#x2F;2023&#x2F;05&#x2F;27&#x2F;OoNPuI.jpg" title="Qt信号与槽"><span class="type">下一篇</span><span class="category"><i class="ic i-flag"></i>Qt</span><h3>Qt信号与槽</h3></a></div></div><div class="wrap" id="wcomments"></div><script type="module" data-pjax="data-pjax">import { init } from 'https://unpkg.com/@waline/client@v2/dist/waline.mjs';

const path = document.getElementById("twikoo_visitors").getAttribute("data-path");
setTimeout(function () {
    init({
        el: '#wcomments',
        serverURL: 'https://foryouos.zeabur.app',
        lang: 'zh-CN',
        locale: {},
        emoji: ["https://unpkg.com/@waline/emojis@1.0.1/weibo","https://unpkg.com/@waline/emojis@1.0.1/alus","https://unpkg.com/@waline/emojis@1.0.1/bilibili","https://unpkg.com/@waline/emojis@1.0.1/qq","https://unpkg.com/@waline/emojis@1.0.1/tieba","https://unpkg.com/@waline/emojis@1.0.1/tw-emoji"],
        meta: ["nick","mail","link"],
        requiredMeta: ["nick","mail"],
        wordLimit: 0,
        pageSize: 10,
        pageview: true,
        path: path,
        dark: 'html[data-theme="dark"]'
    });
}, 1000)</script></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#cmake%E7%AC%94%E8%AE%B0"><span class="toc-number">1.</span> <span class="toc-text">Cmake 笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#cmake%E4%BC%98%E7%82%B9"><span class="toc-number">1.1.</span> <span class="toc-text">Cmake 优点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cmake%E4%BD%BF%E7%94%A8"><span class="toc-number">1.2.</span> <span class="toc-text">Cmake 使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E9%87%8A"><span class="toc-number">1.2.1.</span> <span class="toc-text">注释</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.2.</span> <span class="toc-text">测试文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0cmakeliststxt"><span class="toc-number">1.2.3.</span> <span class="toc-text">添加 CMakeLists.txt</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C"><span class="toc-number">1.2.4.</span> <span class="toc-text">执行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%85%A5build"><span class="toc-number">1.2.5.</span> <span class="toc-text">存入 build</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F"><span class="toc-number">1.2.6.</span> <span class="toc-text">定义变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A%E4%BD%BF%E7%94%A8%E7%9A%84%E6%A0%87%E5%87%86"><span class="toc-number">1.2.7.</span> <span class="toc-text">指定使用的标准</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A%E8%BE%93%E5%87%BA%E8%B7%AF%E5%BE%84"><span class="toc-number">1.2.8.</span> <span class="toc-text">指定输出路径</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.9.</span> <span class="toc-text">搜索 文件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#file%E6%96%87%E4%BB%B6%E5%90%8D"><span class="toc-number">1.2.9.1.</span> <span class="toc-text">file 文件名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8C%85%E5%90%AB%E5%A4%B4%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.9.2.</span> <span class="toc-text">包含头文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cmaelisttxt%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9"><span class="toc-number">1.2.9.3.</span> <span class="toc-text">CMaeList.txt 文件内容</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%B6%E4%BD%9C%E9%9D%99%E6%80%81%E5%BA%93"><span class="toc-number">1.3.</span> <span class="toc-text">制作静态库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%B6%E4%BD%9C%E5%8A%A8%E6%80%81%E5%BA%93"><span class="toc-number">1.4.</span> <span class="toc-text">制作动态库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%93%BE%E6%8E%A5%E9%9D%99%E6%80%81%E5%BA%93"><span class="toc-number">1.5.</span> <span class="toc-text">链接静态库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%93%BE%E6%8E%A5%E5%8A%A8%E6%80%81%E5%BA%93"><span class="toc-number">1.6.</span> <span class="toc-text">链接动态库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E5%BF%97"><span class="toc-number">1.7.</span> <span class="toc-text">日志</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E6%93%8D%E4%BD%9C"><span class="toc-number">1.8.</span> <span class="toc-text">变量操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8set%E6%8B%BC%E6%8E%A5"><span class="toc-number">1.8.1.</span> <span class="toc-text">使用 set 拼接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8list%E6%8B%BC%E6%8E%A5"><span class="toc-number">1.8.2.</span> <span class="toc-text">使用 list 拼接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8list%E7%A7%BB%E9%99%A4"><span class="toc-number">1.8.3.</span> <span class="toc-text">使用 list 移除</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#list%E4%BD%BF%E7%94%A8"><span class="toc-number">1.9.</span> <span class="toc-text">list 使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%8F%E5%AE%9A%E4%B9%89"><span class="toc-number">1.10.</span> <span class="toc-text">宏定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A2%84%E5%AE%8F%E5%AE%9A%E4%B9%89%E5%88%97%E8%A1%A8"><span class="toc-number">1.11.</span> <span class="toc-text">预宏定义列表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B5%8C%E5%A5%97cmake"><span class="toc-number">1.12.</span> <span class="toc-text">嵌套 CMake</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8A%82%E7%82%B9%E5%85%B3%E7%B3%BB"><span class="toc-number">1.12.1.</span> <span class="toc-text">节点关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%AD%90%E7%9B%AE%E5%BD%95"><span class="toc-number">1.12.2.</span> <span class="toc-text">添加子目录</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-number">1.12.2.1.</span> <span class="toc-text">目录结构</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="toc-number">1.13.</span> <span class="toc-text">流程控制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">1.14.</span> <span class="toc-text">参考资料:</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/computer-science/Linux/linux%E5%85%A5%E9%97%A8(1)/" rel="bookmark" title="linux入门1">linux入门1</a></li><li><a href="/computer-science/Linux/Linux%E7%A8%8B%E5%BA%8F%E4%B8%8E%E8%BF%9B%E7%A8%8B/" rel="bookmark" title="线程进程">线程进程</a></li><li><a href="/computer-science/Linux/linux%E5%85%A5%E9%97%A82/" rel="bookmark" title="linux入门2">linux入门2</a></li><li><a href="/computer-science/Linux/Linux%E6%96%87%E4%BB%B6/" rel="bookmark" title="linux文件">linux文件</a></li><li><a href="/computer-science/Linux/Linux%E7%9A%84Makefile/" rel="bookmark" title="Makefile">Makefile</a></li><li class="active"><a href="/computer-science/Linux/cmake/" rel="bookmark" title="Cmake笔记">Cmake笔记</a></li><li><a href="/computer-science/Linux/Linux%E5%A4%9A%E7%BA%BF%E7%A8%8B/" rel="bookmark" title="linux多线程总">linux多线程总</a></li><li><a href="/computer-science/Linux/Linux%E5%A5%97%E6%8E%A5%E5%AD%97%E9%80%9A%E4%BF%A1TCP/" rel="bookmark" title="套接字通信 TCP">套接字通信 TCP</a></li><li><a href="/computer-science/Linux/Linux%E5%A5%97%E6%8E%A5%E5%AD%97%E9%80%9A%E4%BF%A1UDP/" rel="bookmark" title="linux套接字通信UDP">linux套接字通信UDP</a></li><li><a href="/computer-science/Linux/Linux%E4%BF%A1%E5%8F%B7/" rel="bookmark" title="linux信号">linux信号</a></li><li><a href="/computer-science/Linux/LinuxIO%E5%A4%9A%E8%B7%AF%E8%BD%AC%E6%8E%A5/" rel="bookmark" title="linux IO多路复用">linux IO多路复用</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="YuHeShui" data-src="/assets/avatar.jpg"><p class="name" itemprop="name">YuHeShui</p><div class="description" itemprop="description">瓶子的跋涉 & 编程笔记</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">62</span><span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">17</span><span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">34</span><span class="name">标签</span></a></div></nav><div class="social"><a href="https://github.com/foryouos" class="item github" rel="noopener external nofollow noreferrer" title="https:&#x2F;&#x2F;github.com&#x2F;foryouos" target="_blank"><i class="ic i-github"></i></a><a href="https://www.zhihu.com/people/foryouos" class="item zhihu" rel="noopener external nofollow noreferrer" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;foryouos" target="_blank"><i class="ic i-zhihu"></i></a><a href="mailto:foryouos@mail.com" class="item email" rel="noopener external nofollow noreferrer" title="mailto:foryouos@mail.com" target="_blank"><i class="ic i-envelope"></i></a></div><div class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="javascript:void(0);" rel="external nofollow noreferrer"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item dropdown"><a href="javascript:void(0);" rel="external nofollow noreferrer"><i class="ic i-user"></i>外链</a><ul class="submenu"><li class="item"><a href="https://www.foryouos.cn/" rel="noopener external nofollow noreferrer" target="_blank"><i class="ic i-user"></i>主页</a></li><li class="item"><a href="https://www.so.foryouos.cn/" rel="noopener external nofollow noreferrer" target="_blank"><i class="ic i-magic"></i>搜索</a></li><li class="item"><a href="https://imgtg.com/foryouos" rel="noopener external nofollow noreferrer" target="_blank"><i class="ic i-coffee"></i>图库</a></li></ul></li></div></div></div></div><ul id="quick"><li class="prev pjax"><a href="/computer-science/cpp/course-5/Qt%E4%BF%A1%E5%8F%B7%E4%B8%8E%E6%A7%BD/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/computer-science/cpp/course-5/Qt%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/" title="分类于C++">C++</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/course-1/" title="分类于郑莉老师C++语言程序设计">郑莉老师C++语言程序设计</a><i class="ic i-angle-right"></i></div><span><a href="/computer-science/cpp/course-1/cpp%E6%95%B0%E6%8D%AE%E5%85%B1%E4%BA%AB%E4%B8%8E%E4%BF%9D%E6%8A%A4/">C++数据共享与保护</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/Linux/" title="分类于Linux">Linux</a><i class="ic i-angle-right"></i></div><span><a href="/computer-science/Linux/Linux%E7%9A%84Makefile/">Makefile</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/" title="分类于C++">C++</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/course-3/" title="分类于C++开源库">C++开源库</a><i class="ic i-angle-right"></i></div><span><a href="/computer-science/cpp/course-3/%E7%BA%BF%E7%A8%8B%E6%B1%A0/">C和C++线程池汇总</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/" title="分类于C++">C++</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/course-1/" title="分类于郑莉老师C++语言程序设计">郑莉老师C++语言程序设计</a><i class="ic i-angle-right"></i></div><span><a href="/computer-science/cpp/course-1/cpp%E6%B5%81%E7%A8%8B%E5%BA%93%E8%BE%93%E5%85%A5%E4%B8%8E%E8%BE%93%E5%87%BA/">C++流程库输入与输出</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Certificate/" title="分类于考证">考证</a><i class="ic i-angle-right"></i><a href="/categories/Certificate/soft/" title="分类于软件">软件</a><i class="ic i-angle-right"></i><a href="/categories/Certificate/soft/work/" title="分类于工作">工作</a><i class="ic i-angle-right"></i></div><span><a href="/Certificate/soft/work/%E5%81%9A%E9%A2%98%E8%BF%BD%E6%BA%AF02/">做题追溯02</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/" title="分类于C++">C++</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/course-1/" title="分类于郑莉老师C++语言程序设计">郑莉老师C++语言程序设计</a><i class="ic i-angle-right"></i></div><span><a href="/computer-science/cpp/course-1/cpp%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/">C++类与对象</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Certificate/" title="分类于考证">考证</a><i class="ic i-angle-right"></i><a href="/categories/Certificate/soft/" title="分类于软件">软件</a><i class="ic i-angle-right"></i><a href="/categories/Certificate/soft/work/" title="分类于工作">工作</a><i class="ic i-angle-right"></i></div><span><a href="/Certificate/soft/work/STL%E5%BC%BA%E5%8C%96/">STL强化</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/" title="分类于C++">C++</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/course-5/" title="分类于Qt">Qt</a><i class="ic i-angle-right"></i></div><span><a href="/computer-science/cpp/course-5/Qt%E4%BA%8B%E4%BB%B6/">Qt事件</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/" title="分类于C++">C++</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/course-1/" title="分类于郑莉老师C++语言程序设计">郑莉老师C++语言程序设计</a><i class="ic i-angle-right"></i></div><span><a href="/computer-science/cpp/course-1/cpp%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/">C++异常处理</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/Git/" title="分类于Git分布式版本控制">Git分布式版本控制</a><i class="ic i-angle-right"></i></div><span><a href="/computer-science/Git/Git%E4%BD%BF%E7%94%A8%E8%AF%AD%E6%B3%95/">Git使用语法</a></span></li></ul></div><div class="rpost pjax"><h2>最新评论</h2><ul class="leancloud-recent-comment" id="new-comment"><li class="item" v-for="com in coms"><a v-bind:href="com.href" data-pjax-state="data-pjax-state"><span class="breadcrumb">{{com.nick}} @ {{com.time}}</span><span>{{com.text}}<br></span></a></li></ul></div></div><div class="status"><div class="copyright">&copy; 2022 -<span itemprop="copyrightYear">2023</span><span class="with-love"><i class="ic i-sakura rotate"></i></span><span class="author" itemprop="copyrightHolder">YuHeShui @ foryouos</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i></span><span title="站点总字数">686k 字</span><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="ic i-coffee"></i></span><span title="站点阅读时长">10:24</span></div><div class="powered-by">基于 <a href="https://hexo.io/" rel="noopener external nofollow noreferrer" target="_blank">Hexo</a> & Theme.<a href="https://github.com/theme-shoka-x/hexo-theme-shokaX/" rel="noopener external nofollow noreferrer" target="_blank">ShokaX</a></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"computer-science/Linux/cmake/",favicon:{show:"不负韶华",hide:"以梦为马！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,chart:!1,copy_tex:!1,katex:!1,mermaid:!1,audio:"",fancybox:!0,nocopy:!1,outime:!0,template:"&lt;div class=&quot;note warning&quot;&gt;&lt;p&gt;&lt;span class=&quot;label warning&quot;&gt;文章时效性提示&lt;/span&gt;&lt;br&gt;这是一篇发布于 {{publish}} 天前，最后一次更新在 {{updated}} 天前的文章，部分信息可能已经发生改变，请注意甄别。&lt;/p&gt;&lt;/div&gt;",quiz:{choice:"单选题",multiple:"多选题",true_false:"判断题",essay:"问答题",gap_fill:"填空题",mistake:"错题备注"},ignores:[t=>t.includes("#"),t=>new RegExp(LOCAL.path+"$").test(t),[]]}</script><script src="https://polyfill.io/v3/polyfill.min.js?features=default,fetch"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/pace/1.0.2/pace.min.js"></script><script src="https://unpkg.com/theme-shokax-pjax@latest/pjax.shokax.min.js"></script><script src="https://unpkg.com/theme-shokax-anime@latest/anime.shokax.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/algoliasearch/4.12.1/algoliasearch-lite.umd.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/instantsearch.js/4.39.0/instantsearch.production.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/lozad.js/1.16.0/lozad.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/quicklink/2.2.0/quicklink.umd.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/??jquery/3.5.1/jquery.min.js,fancybox/3.5.7/jquery.fancybox.min.js,justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js" async></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/KaTeX/0.12.0/contrib/copy-tex.min.js" async></script><script src="https://unpkg.com/frappe-charts@1.5.0/dist/frappe-charts.min.iife.js"></script><script src="/js/app.js?v=0.2.10"></script><script data-pjax="data-pjax">var _hmt=_hmt||[];!function(){var e=document.createElement("script"),t=(e.src="https://hm.baidu.com/hm.js?e3ba29befb93fdf32bbc553d0e5bee92",e.async=!0,document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)}()</script><script type="module" data-pjax>let items = []
        import { RecentComments } from 'https://unpkg.com/@waline/client@v2/dist/waline.mjs'
        RecentComments({
          serverURL: 'https://foryouos.zeabur.app',
          count: 10,
        }).then(({ comments }) => {
          comments.forEach(function (item) {
              let cText = (item.orig.length > 50) ? item.orig.substring(0,50)+'...' : item.orig
              item.url = item.url !== '/' ?  '/' + item.url : item.url;
              const siteLink = item.url + "#" + item.objectId
              items.push({
                  href: siteLink,
                  nick: item.nick,
                  time: item.insertedAt.split('T').shift(),
                  text: cText
              })
          })
          Vue.createApp({
            data() {
                return {
                    coms: items
                }
            }
          }).mount('#new-comment')
        }).catch(function (err) {
          console.error(err)
        })</script></body></html><!-- rebuild by hexo-renderer-multi-next-markdown-it -->