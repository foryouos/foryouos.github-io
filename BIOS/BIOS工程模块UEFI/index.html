<!-- build time: Sat Sep 23 2023 15:47:54 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="referrer" content="never"><meta http-equiv="X-UA-COMPATIBLE" content="IE=edge,chrome=1"><meta name="renderer" content="webkit"><link rel="icon" type="image/ico" sizes="32x32" href="/assets/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png"><meta name="baidu-site-verification" content="codeva-yIAXMzOV6I"><link rel="alternate" href="/rss.xml" title="瓶子的跋涉" type="application/rss+xml"><link rel="alternate" href="/atom.xml" title="瓶子的跋涉" type="application/atom+xml"><link rel="alternate" type="application/json" title="瓶子的跋涉" href="https://www.blog.foryouos.cn/feed.json"><link rel="preconnect" href="https://lf9-cdn-tos.bytecdntp.com"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://unpkg.com"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.3.6"><script src="https://cdn.staticfile.org/vue/3.2.45/vue.global.prod.js"></script><link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css"><meta name="keywords" content="BIOS,EDK2"><link rel="canonical" href="https://www.blog.foryouos.cn/BIOS/BIOS%E5%B7%A5%E7%A8%8B%E6%A8%A1%E5%9D%97UEFI/"><title>BIOS工程模块UEFI</title><meta name="generator" content="Hexo 6.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">BIOS工程模块UEFI</h1><div class="meta"><span class="item" title="创建时间：2023-08-14 07:55:00"><span class="icon"><i class="ic i-calendar"></i></span><span class="text">发表于</span><time itemprop="dateCreated datePublished" datetime="2023-08-14T07:55:00+08:00">2023-08-14</time></span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i></span><span class="text">本文字数</span><span>16k</span><span class="text">字</span></span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i></span><span class="text">阅读时长</span><span>15 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span><span class="line"></span><span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">foryouos</a></li></ul><ul class="right" id="rightNav"><li class="item theme" @click="changeThemeByBtn"><i class="ic" :class="{'i-sun': !themeStatus,'i-moon': themeStatus}"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div class="pjax" id="imgs"><img src="https://mmbiz.qpic.cn/mmbiz_jpg/ORog4TEnkbvthkUaBMX9zWiccSLd09Nd7eibo4PKxaAlnuDZ1ibBXhoBFwyg1uHsfYmeNDRlbnSm2Uiafn2eGswX0g/640?wx_fmt=jpeg"></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"></use><use xlink:href="#gentle-wave" x="48" y="3"></use><use xlink:href="#gentle-wave" x="48" y="5"></use><use xlink:href="#gentle-wave" x="48" y="7"></use></g></svg></div><main><div class="inner"><div class="pjax" id="main"><div class="article wrap"><div class="breadcrumb" itemlistelement itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i><span><a href="/">首页</a></span><i class="ic i-angle-right"></i><span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/BIOS/" itemprop="item" rel="index" title="分类于BIOS"><span itemprop="name">BIOS<meta itemprop="position" content="0"></span></a></span></div><article class="post block" itemscope itemtype="http://schema.org/Article" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.blog.foryouos.cn/BIOS/BIOS%E5%B7%A5%E7%A8%8B%E6%A8%A1%E5%9D%97UEFI/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/assets/avatar.jpg"><meta itemprop="name" content="YuHeShui"><meta itemprop="description" content="YuHeShui, 瓶子的跋涉 &amp; 编程笔记"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="瓶子的跋涉"></span><div class="body md" itemprop="articleBody"><h1 id="模块"><a class="anchor" href="#模块">#</a> 模块</h1><p><img data-src="https://mmbiz.qpic.cn/mmbiz_png/ORog4TEnkbvthkUaBMX9zWiccSLd09Nd7brATH5cjS3s0NK5d8SmaukA2e8z2csFDcvyjaTLMUgibwOCXKHgeChw/640?wx_fmt=png" alt="模块与包概念" title="模块与包"></p><ul><li>包：是一组 <code>模块</code> 及 <code>平台描述文件</code> ( <code>.dsc</code> 文件)，包声明文件 ( <code>.dec</code> 文件) 组成的集合。</li><li><code>模块</code> （ <code>可执行</code> 文件，即 <code>.efi</code> 文件) 像 <code>插件一样</code> 可以 <code>动态地</code> 加载到 <code>UEFI内核</code> 中。</li><li>每个成功模块由 <code>元数据文件</code> ( <code>.inf</code> ) 和 <code>源文件</code> (有些情况包含 <code>.efi</code> 文件) 组成。 <code>.inf</code> 类似与 <code>Linux</code> 下得 <code>Makefile</code> ， <code>.dsc</code> 文件则相当于 VS 项目中的 <code>.sln文件</code> ；模块相当于 VS 项目中的工程， <code>.inf</code> 文件则相当于 VS 工程中的 <code>.proj文件</code> 。</li></ul><h1 id="uefi主要模块"><a class="anchor" href="#uefi主要模块">#</a> <code>UEFI</code> 主要模块</h1><p><img data-src="https://mmbiz.qpic.cn/mmbiz_png/ORog4TEnkbvthkUaBMX9zWiccSLd09Nd7tMz2Qy5M6Fv10JxMpzudOOfryCmmCYsMpqRdVUmUDl4CSz8lCLUkCA/640?wx_fmt=png" alt="UEFI模块"></p><h1 id="dsc文件"><a class="anchor" href="#dsc文件">#</a> <code>DSC</code> 文件</h1><blockquote><p><code>DSC</code> 文件描述了 <code>模块</code> ，库和组件如何编译，其中还包含很多 <code>的节</code> （ <code>section</code> ）标志，包含必要的 <code>[Defines]</code> , <code>[Components]</code> , 和可选的 <code>[LibraryClasses]</code> ， <code>[Libraries]</code> ， <code>[SkuIds]</code> ， <code>[BuildOptions]</code> ， <code>[PCD]</code> ， <code>[UserExtensions]</code> ， <code>[DefaultStores]</code> 。所有节标志，都内置与中括号中，且 <code>大小写敏感</code> 。在同一个括号中，可以包含复数的节标志字符串，他们之间使用 <code>逗号</code> 隔开，注释使用 <code>#</code></p></blockquote><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre># 使用逗号隔开</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>Library<span class="token punctuation">.</span>X64<span class="token punctuation">,</span>LibraryClasses<span class="token punctuation">.</span>IPF<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="3"></td><td><pre># 其制定CPU架构的节，通常的节<span class="token punctuation">(</span>如<span class="token punctuation">[</span>LibraryClasses<span class="token punctuation">]</span>有更高的优先级优先使用高优先级编辑<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre># 在DSC文件中，使用<span class="token operator">!</span>include来包含其他的文件，<span class="token operator">!</span>include可以在任何节中出现</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">[</span>components<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token operator">!</span>include StdLib<span class="token operator">/</span>StdLib<span class="token punctuation">.</span>inc  #包含StdLib库</pre></td></tr></table></figure><h2 id="defines"><a class="anchor" href="#defines">#</a> [Defines]</h2><blockquote><p>此节定义 <code>各种变量</code> ，以供 <code>后续编译</code> 使用，必须在 <code>DEC中第一个</code> 定义，</p><p>通过 <code>DEFINE</code> 定义的 <code>宏</code> 都是 <code>全局的</code> ，都可以使用 <code>$(MACRO)</code> 来访问</p><p>语法如下</p><p><code>[Defines]</code> 中可配置 <code>PCD</code> 信息， <code>PCD</code> : <code>Platform Configuration Database</code> , 数据库，类似 <code>window的注册表</code> 。PCD 除了 <code>SEC早期</code> ， <code>PEI阶段</code> ， <code>DXE早期阶段外</code> ，都可以访问。</p></blockquote><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>Defines<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	Name <span class="token operator">=</span> Value</pre></td></tr><tr><td data-num="3"></td><td><pre>    DEFINE MACRO <span class="token operator">=</span> Value</pre></td></tr></table></figure><p><img data-src="https://mmbiz.qpic.cn/mmbiz_png/ORog4TEnkbvthkUaBMX9zWiccSLd09Nd7s6lnyZM22Zx1ice5RkWLZd85pBLeDXfGxiaibX46shQS9TNtWIVuNbgnw/640?wx_fmt=png" alt="DSC文件变量" title="DSC文件"></p><h4 id="示例"><a class="anchor" href="#示例">#</a> 示例</h4><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre># 定义的全局宏，</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>Defines<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  PLATFORM_NAME                  <span class="token operator">=</span> AppPkg</pre></td></tr><tr><td data-num="4"></td><td><pre>  PLATFORM_GUID                  <span class="token operator">=</span> <span class="token number">0458</span>dade<span class="token operator">-</span><span class="token number">8</span>b6e<span class="token operator">-</span><span class="token number">4e45</span><span class="token operator">-</span>b773<span class="token operator">-</span><span class="token number">1</span>b27cbda3e06</pre></td></tr><tr><td data-num="5"></td><td><pre>  PLATFORM_VERSION               <span class="token operator">=</span> <span class="token number">0.01</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  DSC_SPECIFICATION              <span class="token operator">=</span> <span class="token number">0x00010006</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  OUTPUT_DIRECTORY               <span class="token operator">=</span> Build<span class="token operator">/</span>AppPkg</pre></td></tr><tr><td data-num="8"></td><td><pre>  SUPPORTED_ARCHITECTURES        <span class="token operator">=</span> IA32<span class="token operator">|</span>IPF<span class="token operator">|</span>X64</pre></td></tr><tr><td data-num="9"></td><td><pre>  BUILD_TARGETS                  <span class="token operator">=</span> DEBUG<span class="token operator">|</span>RELEASE</pre></td></tr><tr><td data-num="10"></td><td><pre>  SKUID_IDENTIFIER               <span class="token operator">=</span> DEFAULT</pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>#</pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span>  <span class="token expression">Debug output control</span></span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span></span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token expression">DEFINE </span><span class="token macro-name">DEBUG_ENABLE_OUTPUT</span>      <span class="token expression"><span class="token operator">=</span> FALSE       # Set to TRUE to enable debug output</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  DEFINE DEBUG_PRINT_ERROR_LEVEL  <span class="token operator">=</span> <span class="token number">0x80000040</span>  # Flags to control amount of debug output</pre></td></tr><tr><td data-num="17"></td><td><pre>  DEFINE DEBUG_PROPERTY_MASK      <span class="token operator">=</span> <span class="token number">0</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>  DEFINE UEFI_BOOK_DIR            <span class="token operator">=</span> uefi\book</pre></td></tr></table></figure><h2 id="libraryclasses"><a class="anchor" href="#libraryclasses">#</a> [ <code>LibraryClasses</code> ]</h2><blockquote><p>用来 <code>提供模块</code> 所使用的 <code>库入口</code> ，而且它允许将模块编译成 <code>库</code> ，这些库可以被 [ <code>Components</code> ] 中的 <code>模块使用</code> ，当 <code>DSC</code> 文件中的模块不需要 <code>使用库</code> 时，这个节也可以不设置，可选的。</p></blockquote><h3 id="语法格式"><a class="anchor" href="#语法格式">#</a> 语法格式</h3><blockquote><p><code>$(Arch)</code> 和 <code>$(MODULE_TYPE)</code> 是可选的，节内的库对指定的 <code>结构</code> 和 <code>模块</code> 都有效。</p></blockquote><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>LibraryClasses<span class="token punctuation">.</span>$<span class="token punctuation">(</span>Arch<span class="token punctuation">)</span><span class="token punctuation">.</span>$<span class="token punctuation">(</span>MODULE_TYPE<span class="token punctuation">)</span><span class="token punctuation">,</span>LiBraryClasses<span class="token punctuation">.</span>$<span class="token punctuation">(</span>Arch<span class="token punctuation">)</span><span class="token punctuation">.</span>$<span class="token punctuation">(</span>MODULE_TYPE<span class="token punctuation">)</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	LibraryName <span class="token operator">|</span> Path<span class="token operator">/</span>LibraryName<span class="token punctuation">.</span>inf</pre></td></tr></table></figure><blockquote><p><code>LibraryClasses</code> 有 <code>六种</code> 表示方法，按照模块 <code>优先搜</code> 索的顺序，从 <code>高到低</code></p></blockquote><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>LibraryClasses<span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>LibraryClasses<span class="token punctuation">.</span>$<span class="token punctuation">(</span>Arch<span class="token punctuation">)</span><span class="token punctuation">.</span>$<span class="token punctuation">(</span>MODULE_TYPE<span class="token punctuation">)</span><span class="token punctuation">,</span>LibraryClasses<span class="token punctuation">.</span>$<span class="token punctuation">(</span>Arch<span class="token punctuation">)</span><span class="token punctuation">.</span>$<span class="token punctuation">(</span>MoDULE_TYPE<span class="token punctuation">)</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">[</span>LibraryClasses<span class="token punctuation">.</span>$<span class="token punctuation">(</span>Arch<span class="token punctuation">)</span><span class="token punctuation">.</span>$<span class="token punctuation">(</span>MODULE_TYPE<span class="token punctuation">)</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">[</span>LibraryClasses<span class="token punctuation">.</span>common<span class="token punctuation">.</span>$<span class="token punctuation">(</span>MODULE_TYPE<span class="token punctuation">)</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">[</span>LibraryClasses<span class="token punctuation">.</span>$<span class="token punctuation">(</span>Arch<span class="token punctuation">)</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">[</span>LibraryClasses<span class="token punctuation">.</span>common<span class="token punctuation">]</span></pre></td></tr></table></figure><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre>MdeModulePkg<span class="token operator">/</span>Universal<span class="token operator">/</span>PCD<span class="token operator">/</span>Pei<span class="token operator">/</span>Pcd<span class="token punctuation">.</span>inf <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token operator">&lt;</span>LibraryClasses<span class="token operator">></span></pre></td></tr><tr><td data-num="3"></td><td><pre>        PcdLib<span class="token operator">|</span>MdePkg<span class="token operator">/</span>Library<span class="token operator">/</span>BasePcdLibNull<span class="token operator">/</span>BasePcdLibNull<span class="token punctuation">.</span>inf</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre># 直接制定目前编译模块所需要的库，此方法优先级最高</pre></td></tr></table></figure><blockquote><p>[ <code>Components</code> ] 中的模块在寻找所需要的库时，将按照上面 <code>优先级依次</code> 寻找</p></blockquote><h2 id="components"><a class="anchor" href="#components">#</a> [ <code>Components</code> ]</h2><blockquote><p>用来定义模块编译的 <code>节</code> ，通过制定模块的 <code>INF文件</code> 所在的位置， <code>Build</code> 工具可以编译生成 <code>.efi</code> 文件。</p></blockquote><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>Components<span class="token punctuation">.</span>$<span class="token punctuation">(</span>Arch<span class="token punctuation">)</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	Path<span class="token operator">/</span>and<span class="token operator">/</span>Filename<span class="token punctuation">.</span>inf</pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre># 语法格式</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">[</span>Components<span class="token punctuation">.</span>$<span class="token punctuation">(</span>Arch<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        Path<span class="token operator">/</span>and<span class="token operator">/</span>Filename<span class="token punctuation">.</span>inf<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token operator">&lt;</span>LibraryClasses<span class="token operator">></span> # 嵌套节</pre></td></tr><tr><td data-num="8"></td><td><pre>    LibraryName <span class="token operator">|</span> Path<span class="token operator">/</span>LibraryName<span class="token punctuation">.</span>inf</pre></td></tr><tr><td data-num="9"></td><td><pre> # 还可以嵌套<span class="token operator">&lt;</span>Defines<span class="token operator">></span><span class="token punctuation">,</span><span class="token operator">&lt;</span>PCD<span class="token operator">*</span><span class="token operator">></span>和<span class="token operator">&lt;</span>BuildOptions<span class="token operator">></span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="buildoptions"><a class="anchor" href="#buildoptions">#</a> [ <code>BuildOptions</code> ]</h2><blockquote><p>给出编译器和相关的 <code>编译参数</code> ，它会覆盖为编译模块准备的默认参数。如果是为了替换编译参数，则可以使用 <code>==</code> 。如果是为了添加编译参数，则可以使用 <code>=</code></p></blockquote><h3 id="语法格式-2"><a class="anchor" href="#语法格式-2">#</a> 语法格式</h3><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>BuildOptions<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="2"></td><td><pre>$<span class="token punctuation">&#123;</span>FAMILY<span class="token punctuation">&#125;</span><span class="token operator">:</span>$<span class="token punctuation">&#123;</span>TARGET<span class="token punctuation">&#125;</span>_$<span class="token punctuation">&#123;</span>TAGNAME<span class="token punctuation">&#125;</span>_<span class="token punctuation">&#123;</span>ARCH<span class="token punctuation">&#125;</span>_$<span class="token punctuation">&#123;</span>TOOLCODE<span class="token punctuation">&#125;</span>——FLAGS<span class="token punctuation">[</span><span class="token operator">=</span> <span class="token operator">|</span> <span class="token operator">==</span> <span class="token punctuation">]</span> 编译参数</pre></td></tr></table></figure><h3 id="示例-2"><a class="anchor" href="#示例-2">#</a> 示例</h3><blockquote><p>编译参数定义宏 <code>DISABLE_NEW_DEPRECATED_INTERFACES</code> , 作为 <code>源代码</code> 的 <code>编译开关</code> 。两个参数分别 <code>禁用优化</code> 和 <code>启用框架指针</code> 省略功能。</p></blockquote><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>BuildOptions<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token operator">*</span>_<span class="token operator">*</span>_<span class="token operator">*</span>_CC_FLAGS <span class="token operator">=</span> <span class="token operator">-</span>D DISABLE_NEW_DEPRECATED_INTEREACES</pre></td></tr><tr><td data-num="3"></td><td><pre>    MSFT<span class="token operator">:</span>DEBUG_<span class="token operator">*</span>_<span class="token operator">*</span>_CC_FLAGS <span class="token operator">=</span> <span class="token operator">/</span>Od <span class="token operator">/</span> Oy<span class="token operator">-</span></pre></td></tr></table></figure><h2 id="语法格式-3"><a class="anchor" href="#语法格式-3">#</a> 语法格式</h2><p><img data-src="https://mmbiz.qpic.cn/mmbiz_png/ORog4TEnkbvthkUaBMX9zWiccSLd09Nd7pnM2LyEL1LDNPZKicOwkFF3bf0HxbY1aQzFTp9Bf7ehQ2xMjVAAhtGA/640?wx_fmt=png" alt="BuildOptions语法格式"></p><blockquote><p><code>FAMILY</code> 是指 <code>编译</code> 时使用的 <code>编译器</code> 。</p></blockquote><p><img data-src="https://mmbiz.qpic.cn/mmbiz_png/ORog4TEnkbvthkUaBMX9zWiccSLd09Nd7yHJy3sIwPkvvs0hr43MFaR4Xn5Z8Xj4JlaKuU2S32kyLCk92ySAAZQ/640?wx_fmt=png" alt="语法字段解释"></p><p><img data-src="https://mmbiz.qpic.cn/mmbiz_png/ORog4TEnkbvthkUaBMX9zWiccSLd09Nd7RQGSCwJ8OIVqBpHHuLGgYVHxoriaNrqDiaR1jNnAUNJ2ZiadiaUq9Dn56w/640?wx_fmt=png" alt="语法字段"></p><h1 id="标准引用程序工程模块"><a class="anchor" href="#标准引用程序工程模块">#</a> 标准引用程序工程模块</h1><blockquote><p>工程模块的基础，</p><p>每个工程模块至少需要分为</p><ul><li><code>工程</code> 文件 : <code>.inf文件</code></li><li><code>源文件</code> ： <code>C/C++</code> 文件， <code>.asm</code> 汇编文件，也包含 <code>.uni</code> ( <code>字符串资</code> 源文件) 和 <code>.vfr</code> ( <code>窗口资源</code> 文件)</li></ul></blockquote><h1 id="inf文件"><a class="anchor" href="#inf文件">#</a> INF 文件</h1><blockquote><p><code>INF</code> 是模块的 <code>工程文件</code> ，描述了模块的属性，包含模块由那些 <code>代码组成</code> ， <code>提供</code> 了 <code>什么</code> ，依赖什么 <code>库</code> ，支持什么 <code>CPU架构</code> 等信息。对 ODM 厂商 (第三方开发者而言)，可以针对自家设备发布 <code>二进制形式的模块</code> ，不必提供源代码。</p><p>一般来说，如果是提供 <code>库的模块</code> ，则其位于 <code>包的Library</code> 子目录下，并且会针对不同的架构再创建子目录划分；如果是 <code>UEFI_APPLICATION</code> 一般位于子目录 <code>Applications</code> 下。</p></blockquote><p><img data-src="https://mmbiz.qpic.cn/mmbiz_png/ORog4TEnkbvthkUaBMX9zWiccSLd09Nd7dCOicwHV0R00OURQQxmwVrQYibGJicexkNj2PKxHJ9BZMhxRICNr22Qaw/640?wx_fmt=png" alt="INF文件的节标志"></p><h2 id="defines-2"><a class="anchor" href="#defines-2">#</a> [Defines]</h2><p><img data-src="https://mmbiz.qpic.cn/mmbiz_png/ORog4TEnkbvthkUaBMX9zWiccSLd09Nd7x2FZ5Qnm6mZmSYOXB354qq17jrSUjTQsrfhM9ojWvLjNTE2EfeBLBQ/640?wx_fmt=png" alt="Define变量"><br><img data-src="https://mmbiz.qpic.cn/mmbiz_png/ORog4TEnkbvthkUaBMX9zWiccSLd09Nd7t8XpRN1gz8XJvcR24cslUeGKcNBVJpSsUCn8xAibEKCXTr9PSes3fxg/640?wx_fmt=png" alt="Define变量"></p><blockquote><p>如果编译的模块为 <code>库模块</code> ，则 <code>LIBRARY_CLASS</code> 变量 <code>必须制定</code> ，生成的库模块在指定运行哪些 <code>类型</code> 的模块时使用</p></blockquote><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre>LIBRARY_CLASS <span class="token operator">=</span> FOO <span class="token operator">|</span> PEI_CORE PEIM</pre></td></tr><tr><td data-num="2"></td><td><pre>LIBRARY_CLASS <span class="token operator">=</span> BAR <span class="token operator">|</span> DXE_CORE DXE_DRIVER DXE_SMM_DRIVER</pre></td></tr><tr><td data-num="3"></td><td><pre># 如果只想在UEFI应用中使用，则可以如下设置</pre></td></tr><tr><td data-num="4"></td><td><pre>LIBRARY_CLASS <span class="token operator">=</span> FOO <span class="token operator">|</span> UEFI_APPLICATION</pre></td></tr></table></figure><h2 id="sources"><a class="anchor" href="#sources">#</a> [Sources]</h2><blockquote><p>列出模块中所有的 <code>源文件</code> 和 <code>资源文件</code> ，这些文件位于 <code>INF文件</code> 所在的目录或者子目录。这个节可以针对不同的架构指定文件.</p><p><code>$(Arch)</code> 可以是 <code>COMMON</code> , <code>IA32</code> , <code>X64</code> ， <code>IPF</code> , <code>EBC</code> , <code>ARM</code> 或 <code>AARCH64</code> 中任何 <code>一个</code> 。如果需要对 <code>所有架构</code> 适用，可以 <code>使用COMMON</code> 或者 <code>不指定任何架构</code> 。</p></blockquote><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>Sources<span class="token punctuation">.</span>$<span class="token punctuation">(</span>Arch<span class="token punctuation">)</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	SourceCode<span class="token punctuation">.</span>c</pre></td></tr></table></figure><blockquote><p>同时可以 <code>对源文件</code> 制定 <code>编译的工具链</code> ，即只有在使用指定的工具链时，此源文件才会被编译，目前常用的 <code>4种工具</code> 分别是 <code>MSFT</code> (微软的 <code>Visual Studio编</code> 译器)， <code>GCC</code> ( <code>GNU GCC编译</code> 器)， <code>INTEL</code> (Intel C 编译器和 <code>ntel EFI</code> 字节码编译器) 和 <code>RVCT</code> ( <code>ARM RealVIew</code> 工具链)</p></blockquote><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>Sources<span class="token punctuation">.</span>ARM<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	GicV3<span class="token operator">/</span>Arm<span class="token operator">/</span>ArmGicV3<span class="token punctuation">.</span>S  <span class="token operator">|</span> GCC</pre></td></tr><tr><td data-num="3"></td><td><pre>    GicV3<span class="token operator">/</span>Arm<span class="token operator">/</span>ArmGicV3<span class="token punctuation">.</span><span class="token keyword">asm</span>  <span class="token operator">|</span> RVCT</pre></td></tr></table></figure><h2 id="buildoptions-2"><a class="anchor" href="#buildoptions-2">#</a> [ <code>BuildOptions</code> ]</h2><blockquote><p><code>INF</code> 中的与 <code>DSC文件</code> 中的语法 <code>格式基本相同</code> ，区别在与 <code>INF文件</code> 只对 <code>本模块有效</code> 。而 <code>DSC</code> 对 <code>所有模块</code> 都有效。</p><p>日常开发中，通过 INF 文件修改编译选项以解决一些 <code>特别问题</code> 。比如在解决 <code>汉字字符串</code> 显示问题时，强制要求编译器把源文件按 <code>UTF-8编码</code> 进行识别</p></blockquote><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>BuildOptions<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	MSFT<span class="token operator">:</span><span class="token operator">*</span>_<span class="token operator">*</span>_<span class="token operator">*</span>_CC_FLAGS <span class="token operator">=</span> <span class="token operator">/</span>utf<span class="token operator">-</span><span class="token number">8</span></pre></td></tr></table></figure><h2 id="protocols"><a class="anchor" href="#protocols">#</a> [Protocols]</h2><blockquote><p>列出 <code>模块</code> 使用的 <code>协议</code> ，在 <code>INF文件</code> 中列出的是协议的 <code>GUID</code> ，通过 <code>EDK2</code> 的分析工具， <code>GUID</code> 被 <code>输出</code> 到模块的 <code>AUtoGen.c</code> ，如果模块 <code>没有使用任何协议</code> ，则这个 <code>节为空</code></p></blockquote><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>Protocols<span class="token punctuation">.</span>$<span class="token punctuation">(</span>Arch<span class="token punctuation">)</span><span class="token punctuation">]</span>#COMMON<span class="token punctuation">,</span>IA32<span class="token punctuation">,</span>X64<span class="token punctuation">,</span>IPF<span class="token punctuation">,</span>EBC或者不指定</pre></td></tr><tr><td data-num="2"></td><td><pre>    gEfiProtocolGuid <span class="token punctuation">[</span> <span class="token operator">|</span> FeatureFlagExpression <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    </pre></td></tr><tr><td data-num="4"></td><td><pre># 当FeatureFlagExpression为true时所添加的Protocol Guid是有效的，当为FALSE是，会忽略Protocol Guid</pre></td></tr></table></figure><h2 id="libraryclasses-2"><a class="anchor" href="#libraryclasses-2">#</a> [ <code>LibraryClasses</code> ]</h2><blockquote><p>列出 <code>本模块</code> 需要 <code>链接的库</code></p></blockquote><pre><code class="language-C">[LibraryClasses.$(Arch)] #COMMON,IA32,X64,IPF,EBC或者不指定
    LibraryClassNamel [ | FeatureFlagExpression ]
</code></pre><blockquote><p>在日常开发中，模块如果要 <code>添加</code> 库，一般需要进行两个步骤，</p><ul><li>在 <code>INF</code> 文件下的 <code>[LibraryClasses]</code> 中添加 <code>库名</code></li><li>在 <code>DSC</code> 文件的 <code>[LibraryClasses]</code> 中寻找 <code>词库</code> ，如果有，则需要添加 <code>编译此库</code> 的 <code>INF文件</code></li></ul></blockquote><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>LibraryClasses<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	UefiApplicationEntryPoint</pre></td></tr><tr><td data-num="3"></td><td><pre>    UefiLib</pre></td></tr></table></figure><h2 id="packages"><a class="anchor" href="#packages">#</a> [Packages]</h2><blockquote><p>列出 <code>本模块</code> 引用的 <code>所有包DEC文件</code></p></blockquote><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>Packages<span class="token punctuation">.</span>$<span class="token punctuation">(</span>Arch<span class="token punctuation">)</span><span class="token punctuation">]</span>  # COMMON<span class="token punctuation">,</span>IA32<span class="token punctuation">,</span>X64<span class="token punctuation">,</span>IPF<span class="token punctuation">,</span>EBC或者不指定<span class="token punctuation">,</span>针对不同的平台架构</pre></td></tr><tr><td data-num="2"></td><td><pre>    MdePkg<span class="token operator">/</span>MdePkg<span class="token punctuation">.</span>dec</pre></td></tr></table></figure><blockquote><p><code>EDC文件</code> 的目录使用的是 <code>相对路径</code> ，其 <code>根位</code> 置（ <code>$(WORKSPACE</code> )(通过 <code>edksetup.bat/edksetup.sh</code> 指定的 <code>工作目录</code> ))。 <code>DEC文件</code> 的指定是 <code>有顺序的</code> ，比如 <code>MdePkg/MdePkg.dec</code> 必须在 <code>MdeModulePkg/MdeModulePkg.dec</code> 之 <code>前</code> .</p></blockquote><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>Packages<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	MdePkg<span class="token operator">/</span>MdePkg<span class="token punctuation">.</span>dec</pre></td></tr><tr><td data-num="3"></td><td><pre>	MdeModulePkg<span class="token operator">/</span>MdeModulePkg<span class="token punctuation">.</span>dec</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">[</span>Package<span class="token punctuation">.</span>IA32<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    DEFINE CPUS <span class="token operator">=</span> IA32FamilyCpuPkg</pre></td></tr><tr><td data-num="6"></td><td><pre>    $<span class="token punctuation">(</span>CPUS<span class="token punctuation">)</span><span class="token operator">/</span>DualCore<span class="token operator">/</span>DualCore<span class="token punctuation">.</span>dec</pre></td></tr></table></figure><h1 id="dec文件"><a class="anchor" href="#dec文件">#</a> DEC 文件</h1><blockquote><p>每个 <code>包</code> 只有 <code>一个DEC</code> 文件， <code>DEC文件</code> 用来 <code>配合DSC文</code> 件，描述了 <code>包</code> 的 <code>公开数据</code> 和 <code>接口</code></p></blockquote><h2 id="defines-3"><a class="anchor" href="#defines-3">#</a> [Defines]</h2><blockquote><p><code>必须的节</code> ，用来提供 <code>包的GUID</code> , <code>版本</code> 和 <code>名称等信息</code> 与 <code>DSC相同</code></p></blockquote><h2 id="includes"><a class="anchor" href="#includes">#</a> [Includes]</h2><blockquote><p>列出本包提供的 <code>头文件</code> 所在 <code>目录</code> ，此节 <code>DSC文件</code> 中 <code>没有对应语法</code> 结构</p></blockquote><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>Includes<span class="token punctuation">.</span>$<span class="token punctuation">(</span>Arch<span class="token punctuation">)</span><span class="token punctuation">]</span> # COMMON<span class="token punctuation">,</span>IA32<span class="token punctuation">,</span>X64<span class="token punctuation">,</span>IPF<span class="token punctuation">,</span>EBC或者不指定，可添加Private</pre></td></tr><tr><td data-num="2"></td><td><pre>    Path</pre></td></tr></table></figure><blockquote><p>头文件的路径是 <code>相对路径</code> ，其根目录为 <code>DEC所在的目录</code></p><p>指定框架的时候，可以添加 <code>Private</code> 限定符，用来 <code>规定</code> 所包含的 <code>头文件</code> 只能在 <code>本包</code> 中的 <code>模块中</code> 使用</p></blockquote><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>Include<span class="token punctuation">.</span>common<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>Include<span class="token punctuation">.</span>common<span class="token punctuation">.</span>Private<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">[</span>Include<span class="token punctuation">.</span>IA32<span class="token punctuation">.</span>Private<span class="token punctuation">]</span></pre></td></tr></table></figure><blockquote><ul><li><code>不带Private标志</code> 的项， <code>严禁</code> 与 <code>带Private标志</code> 的项结合</li><li><code>同一文件目录</code> ， <code>不能</code> 同时指定带 <code>Private标志</code> 的项和 <code>不带Private标志</code> 的项</li></ul></blockquote><h2 id="libraryclasses-3"><a class="anchor" href="#libraryclasses-3">#</a> [ <code>LibraryClasses</code> ]</h2><blockquote><p><code>对外提供</code> 的 <code>库</code> 中都会 <code>提供头文件</code> ，这些头文件位于包下的 ``Include\Library <code>目</code> 录下，用来明确 <code>库 和头文件</code> 的对应关系</p></blockquote><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>LibraryClasses<span class="token punctuation">.</span>$<span class="token punctuation">(</span>Arch<span class="token punctuation">)</span><span class="token punctuation">]</span> # COMMON<span class="token punctuation">,</span>IA32<span class="token punctuation">,</span>X64<span class="token punctuation">,</span>IPF<span class="token punctuation">,</span>EBC或者不指定</pre></td></tr><tr><td data-num="2"></td><td><pre>	LibraryClassesName <span class="token operator">|</span> PAth<span class="token operator">/</span>LibraryHeader<span class="token punctuation">.</span>h</pre></td></tr></table></figure><h2 id="guids"><a class="anchor" href="#guids">#</a> [ <code>Guids</code> ]</h2><blockquote><p>这个 <code>节</code> 用于定义 <code>Guid变量</code> ，对于 <code>Private标志</code> 的要求 <code>[Includes]</code> 相同</p></blockquote><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>Guids<span class="token punctuation">.</span>$<span class="token punctuation">(</span>Arch<span class="token punctuation">)</span><span class="token punctuation">]</span> # COMMON<span class="token punctuation">,</span>IA32<span class="token punctuation">,</span>X64<span class="token punctuation">,</span>IPF<span class="token punctuation">,</span>EBC或者不指定，可添加Private</pre></td></tr><tr><td data-num="2"></td><td><pre>    GUIDName <span class="token operator">=</span> GUID</pre></td></tr></table></figure><h3 id="举例"><a class="anchor" href="#举例">#</a> 举例</h3><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre>## Include<span class="token operator">/</span>Guid<span class="token operator">/</span>GlobalVariable<span class="token punctuation">.</span>h</pre></td></tr><tr><td data-num="2"></td><td><pre>  gEfiGlobalVariableGuid         <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token number">0x8BE4DF61</span><span class="token punctuation">,</span> <span class="token number">0x93CA</span><span class="token punctuation">,</span> <span class="token number">0x11D2</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token number">0xAA</span><span class="token punctuation">,</span> <span class="token number">0x0D</span><span class="token punctuation">,</span> <span class="token number">0x00</span><span class="token punctuation">,</span> <span class="token number">0xE0</span><span class="token punctuation">,</span> <span class="token number">0x98</span><span class="token punctuation">,</span> <span class="token number">0x03</span><span class="token punctuation">,</span> <span class="token number">0x2B</span><span class="token punctuation">,</span> <span class="token number">0x8C</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>  ## Include<span class="token operator">/</span>Guid<span class="token operator">/</span>PcAnsi<span class="token punctuation">.</span>h</pre></td></tr><tr><td data-num="5"></td><td><pre>  gEfiVT100PlusGuid              <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token number">0x7BAEC70B</span><span class="token punctuation">,</span> <span class="token number">0x57E0</span><span class="token punctuation">,</span> <span class="token number">0x4C76</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token number">0x8E</span><span class="token punctuation">,</span> <span class="token number">0x87</span><span class="token punctuation">,</span> <span class="token number">0x2F</span><span class="token punctuation">,</span> <span class="token number">0x9E</span><span class="token punctuation">,</span> <span class="token number">0x28</span><span class="token punctuation">,</span> <span class="token number">0x08</span><span class="token punctuation">,</span> <span class="token number">0x83</span><span class="token punctuation">,</span> <span class="token number">0x43</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="protocols-2"><a class="anchor" href="#protocols-2">#</a> [Protocols]</h2><p>定义 <code>Protocol</code> 的 <code>GUID</code> ，其规则与 <code>[Guids]</code> 是一样的。</p><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>Protocols<span class="token punctuation">.</span><span class="token punctuation">(</span>Arch<span class="token punctuation">)</span><span class="token punctuation">]</span>  # common<span class="token punctuation">,</span>IA32<span class="token punctuation">,</span>X64<span class="token punctuation">,</span>IPF<span class="token punctuation">,</span>EBC或者不指定，可添加Private</pre></td></tr><tr><td data-num="2"></td><td><pre>    ProtocolName <span class="token operator">=</span> GUID</pre></td></tr></table></figure><h2 id="其余节"><a class="anchor" href="#其余节">#</a> 其余节</h2><blockquote><p><code>PPI</code> 是 <code>PI</code> 阶段 <code>PEIM和PEIM之间</code> 的沟通 <code>桥梁</code> ，类似 <code>Dxe阶段</code> 的 <code>Protocol</code> 。一个 <code>PEIM</code> 中 <code>Instal</code> l 一个 <code>PPI</code> 后，另一个 <code>PEIM</code> 通过 <code>Locate</code> 获取该 <code>PPI</code> 。</p></blockquote><ul><li><code>[Ppis]</code> : 用于 <code>源文件</code> 用到的 <code>PPI</code> , 语法与 <code>[Guids]</code> 类似</li><li><code>[PCD]</code> ：是对 <code>DSC</code> 文件 <code>[PCD]</code> 的补充</li><li><code>[UserExtensions]</code> ：可以 <code>定制用户</code> 的命令</li></ul><h1 id="fdf文件"><a class="anchor" href="#fdf文件">#</a> FDF 文件</h1><blockquote><p><code>Flash Description File</code> 用于描述 <code>固件</code> 在 <code>Flash</code> 中的 <code>布局</code> 和 <code>位置</code> ，这些 <code>固件</code> 是与 <code>UEFI/PI</code> 兼容的 <code>二进制镜像</code> 。一般生成 <code>固件</code> 的源码只有一个 <code>FDF文件</code> ，其作用是规定把那些 <code>包编入Flash</code> 中，并 <code>确定编入的位置</code></p><p><code>FDF文件</code> 用于生成 <code>Option ROM镜像</code> ， <code>固件镜像</code> 和 <code>可启动镜像</code> ，它与 <code>DSC文件</code> 和 <code>二进制文件</code> 配合，在 <code>GenFW工具</code> 的协助下生成 <code>镜像</code> 。</p></blockquote><h2 id="defines-4"><a class="anchor" href="#defines-4">#</a> [Defines]</h2><blockquote><p>可选的节，用来个 <code>跟踪FDF</code> 文件的版本，定义 <code>全局宏</code> 以及 <code>设定PCD</code> 的值</p></blockquote><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>Defines<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	Name<span class="token operator">=</span>Value</pre></td></tr><tr><td data-num="3"></td><td><pre>    DEFINE MACRO <span class="token operator">=</span> Value</pre></td></tr></table></figure><blockquote><p>其中 <code>set语句</code> 专门用来对 <code>PCD变量</code> 进行赋值的</p></blockquote><h2 id="fd"><a class="anchor" href="#fd">#</a> [FD]</h2><blockquote><p><code>FD</code> (Firmware Device) 即 <code>固件设备</code> ，一个 <code>BIOS ROM</code> 就是一个 <code>FD</code> , 这个节在开发平台 Flash 时是必须得，开发 <code>Option ROM</code> 时不需要此项。FD 由各类声明和 FD 区域布局组成，它可以构成一个完整的 <code>Flash设备</code> 镜像。Flash 设备可以是移动式 <code>可启动镜像</code> (比如可启动的 U 盘)， <code>系统Flash镜像</code> (如 BIOS ROM) 或 <code>更新镜像</code> (UEFI 中称为 Capsule 镜像)，用来 <code>升级系统Flash</code></p></blockquote><h3 id="令牌声明token-statements"><a class="anchor" href="#令牌声明token-statements">#</a> 令牌声明 (TOKEN Statements) :</h3><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre>Token <span class="token operator">=</span> Value <span class="token punctuation">[</span><span class="token operator">|</span> PcdName<span class="token punctuation">]</span></pre></td></tr></table></figure><ul><li><code>BaseAddress</code> : FD 的基址，设备开机后 <code>BIOS</code> 被加载到 <code>系统中</code> 的位置</li><li><code>Size</code> : <code>FD的大小</code> ，单位为 <code>字节</code></li><li><code>BlockSize</code> ： <code>Flash</code> 中一个 <code>Block</code> 的大小</li><li><code>ErasePolarity</code> : 表示 <code>用1或者0</code> 擦除 Flash, 一般为 <code>1</code></li><li><code>NumBlocks</code> : Flash 中 Block 的个数</li></ul><h3 id="定义声明"><a class="anchor" href="#定义声明">#</a> 定义声明</h3><blockquote><p><code>DEFINE Statements</code> : 用来定义 <code>宏的声明</code> ，所定义的 <code>宏</code> 在 <code>整个FDF</code> 文件中都有效，使用的时候，可以通过 <code>$(MACRO)</code> 来引用</p></blockquote><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre>DEFINE MACRO <span class="token operator">=</span> PATH</pre></td></tr></table></figure><h3 id="设置声明"><a class="anchor" href="#设置声明">#</a> 设置声明</h3><blockquote><p>设置 <code>声明</code> 用来 <code>设置PCD变量</code> 的值</p><p>语法格式</p></blockquote><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre>SET PcdName <span class="token operator">=</span> VALUE</pre></td></tr></table></figure><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre>SET gUefiCpuPkgTokenSpaceGuid<span class="token punctuation">.</span>PcdSevEsWorkAreaBase <span class="token operator">=</span> $<span class="token punctuation">(</span>MEMFD_BASE_ADDRESS<span class="token punctuation">)</span> <span class="token operator">+</span>  gUefiOvmfPkgTokenSpaceGuid<span class="token punctuation">.</span>PcdOvmfWorkAreaBase <span class="token operator">+</span> gUefiOvmfPkgTokenSpaceGuid<span class="token punctuation">.</span>PcdOvmfConfidentialComputingWorkAreaHeader</pre></td></tr><tr><td data-num="2"></td><td><pre>SET gUefiCpuPkgTokenSpaceGuid<span class="token punctuation">.</span>PcdSevEsWorkAreaSize <span class="token operator">=</span> gUefiOvmfPkgTokenSpaceGuid<span class="token punctuation">.</span>PcdOvmfWorkAreaSize <span class="token operator">-</span> gUefiOvmfPkgTokenSpaceGuid<span class="token punctuation">.</span>PcdOvmfConfidentialComputingWorkAreaHeader</pre></td></tr></table></figure><blockquote><p>除 <code>类声明</code> 外， <code>[FD]</code> 的另外一个组成部分是 <code>区域布局</code> ( <code>Region Layout</code> )，它用来指明各种 <code>区域类型</code> 的数据在 <code>FD中</code> 的布局</p></blockquote><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre>offset<span class="token operator">|</span>Size</pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token punctuation">[</span>TokenSpaceGuidCName<span class="token punctuation">.</span>PcdOffsetCname <span class="token operator">|</span> TokenSpaceGuidCName<span class="token punctuation">.</span>PcdSizeCName<span class="token punctuation">]</span> <span class="token operator">?</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    	<span class="token punctuation">[</span>RegopmType<span class="token punctuation">]</span> <span class="token operator">?</span></pre></td></tr></table></figure><blockquote><p>上诉代码的含义为 <code>FD开辟</code> 一段空间，用来放置区域类型 ( <code>RegionType</code> ) 所指明的内容，其中 <code>offset</code> 和 <code>Size</code> 表示其后的内容 <code>处于FD</code> 中的 <code>偏移</code> 和 <code>内容的大小</code> ， <code>RegionType</code> 可以是 <code>FV</code> ( <code>Firmware Volume</code> , <code>固件区块</code> )， <code>DATA</code> (数据)， <code>FILE</code> (文件)， <code>INF</code> (INF 文件) 和 <code>CAPSULE</code> （更新固件的镜像) 也可以不指定</p></blockquote><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token number">0x000000</span><span class="token operator">|</span><span class="token number">0x006000</span></pre></td></tr><tr><td data-num="2"></td><td><pre>gUefiOvmfPkgTokenSpaceGuid<span class="token punctuation">.</span>PcdOvmfSecPageTablesBase<span class="token operator">|</span>gUefiOvmfPkgTokenSpaceGuid<span class="token punctuation">.</span>PcdOvmfSecPageTablesSize</pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token number">0x006000</span><span class="token operator">|</span><span class="token number">0x001000</span></pre></td></tr><tr><td data-num="5"></td><td><pre>gUefiOvmfPkgTokenSpaceGuid<span class="token punctuation">.</span>PcdOvmfLockBoxStorageBase<span class="token operator">|</span>gUefiOvmfPkgTokenSpaceGuid<span class="token punctuation">.</span>PcdOvmfLockBoxStorageSize</pre></td></tr></table></figure><h2 id="fv"><a class="anchor" href="#fv">#</a> [ <code>FV</code> ]</h2><blockquote><p><code>FV</code> ( <code>Firmware Volume</code> ) 是 <code>固件</code> 的 <code>逻辑区块</code> ，相当于 <code>FD上的分区</code> ，此节 <code>定义</code> 了 <code>镜像包含的组件</code> 和 <code>模块</code> ，对于 <code>平台镜像是必要</code> 的，但 <code>Option ROM镜像不需要</code> 此节</p></blockquote><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>FV<span class="token punctuation">.</span>UiFvName<span class="token punctuation">]</span></pre></td></tr></table></figure><h2 id="optionrom"><a class="anchor" href="#optionrom">#</a> [ <code>OptionRom</code> ]</h2><blockquote><p>此节 <code>用来编译</code> 独立的 <code>Legacy PCI Option ROM</code> 或者 <code>UEFI PCI Option ROM</code> .</p></blockquote><h1 id="资源文件"><a class="anchor" href="#资源文件">#</a> 资源文件</h1><blockquote><p><code>IDF</code> 和 <code>UNI</code> 文件 <code>VFR文件</code> 可算做 <code>资源文件</code> ，用于 <code>描述图像</code> ， <code>文字</code> 和 <code>框架</code> 等 <code>资源</code> ，在 <code>Build工具</code> 的 <code>协助</code> 下，生成 <code>二进制</code> 文件 (如 <code>.efi</code> 文件， <code>.lib</code> 文件)</p><p><code>IDF</code> ( <code>Image Description File</code> ， <code>图像描述</code> 文件)， <code>UNI</code> ( <code>Unicode String File</code> ， <code>宽字节字符串</code> 文件) 和 <code>VFR</code> ( <code>Visual Forms Representation</code> ， <code>可视化窗体</code> 描述) 都是 <code>资源文件</code> ，同属于 <code>用户接口组件</code> 。</p><p><code>IDF</code> 文件用来 <code>描述图像资源</code> ， <code>UNI文件</code> 用来描述 <code>字符串资源</code> ， <code>VFR</code> 文件用来描述 <code>窗体资源</code> ，类似与 Windows 操作系统下的窗口。</p></blockquote><p><img data-src="https://mmbiz.qpic.cn/mmbiz_png/ORog4TEnkbvthkUaBMX9zWiccSLd09Nd7iasRbzddiaBUh34wwHJuAoM4zw6teajZMOFWkh1SDBqegHfySoRu1yicw/640?wx_fmt=png" alt="用户接口组件结构"></p><h2 id="idf文件"><a class="anchor" href="#idf文件">#</a> IDF 文件</h2><blockquote><p>在 <code>IDF文件</code> 中，可通过 <code>#image标识符</code> 指定 <code>图像文件</code> ，所给出的 <code>资源文件</code> 一般与 <code>IDF文</code> 件在同一个目录下。</p><p>使用 <code>TRANSPARENT</code> 用来指定是否 <code>使用透明</code> 显示。</p></blockquote><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">image</span> <span class="token expression">IMG_LOGO TRANSPARENT Logo<span class="token punctuation">.</span>bmp</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">image</span> <span class="token expression">IMG_FULL_LOGO Logo<span class="token punctuation">.</span>jpg</span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">image</span> <span class="token expression">IMG_OEM_LOGO Logo<span class="token punctuation">.</span>png</span></span></pre></td></tr></table></figure><h2 id="uni文件"><a class="anchor" href="#uni文件">#</a> UNI 文件</h2><blockquote><p><code>同一个字符串</code> 变量，可针对 <code>不同的语言</code> 定义不同的 <code>内容</code></p></blockquote><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">langdef</span> <span class="token expression">en<span class="token operator">-</span>US </span><span class="token string">"English"</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">langdef</span> <span class="token expression">zh<span class="token operator">-</span>Hans </span><span class="token string">"简体中文"</span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">string</span> <span class="token expression">STR_LANGUAGE_SELECT #language en<span class="token operator">-</span>US </span><span class="token string">"Select Language"</span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>							<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">language</span> <span class="token expression">zh<span class="token operator">-</span>Hans </span><span class="token string">"选择语言"</span></span></pre></td></tr></table></figure><blockquote><p>在 UNI 文件中，可以使用的标识符有 <code>#langdef</code> , <code>#string</code> , <code>#language</code> 。</p><ul><li><code>#langdef</code> 用于声明 <code>本字符串</code> 资源文件所支持的语言</li><li><code>#string</code> 用于定义字符串</li><li><code>#language</code> 用于标注所用的语言</li></ul><p><code>#langdef</code> 和 <code>#language</code> 标识符在使用时，需要指定语言代码 ( <code>Language Code</code> ), <code>en-US</code> 代表的是英文</p></blockquote><h2 id="vfr文件"><a class="anchor" href="#vfr文件">#</a> VFR 文件</h2><blockquote><p><code>VFR文件</code> 用来描述 <code>窗体</code> 的 <code>框架文件</code> ，它可以使用 <code>#define</code> 和 <code>#include</code> 来定义 <code>变量</code> 和 <code>包含的头文件</code></p><ul><li><code>formset</code> (窗体集合)：用来 <code>标志</code> 整个 <code>窗体的结构</code><ul><li><code>form</code> ：窗体，标志整个窗体的结构</li><li><code>checkbox</code> : <code>复选框</code> ，可通过 <code>空格键</code> 或者 <code>回车键</code> 进行选择</li></ul></li></ul></blockquote><ul><li>关键字 <code>formset</code> 和 <code>endformset</code> 成对出现，他们之间所包含的 <code>内容定义</code> 了整个 <code>formset</code> 。<ul><li><code>guid</code> : 标志本 <code>formset</code> 的 <code>GUID值</code></li><li><code>title</code> : 在界面中标志 <code>本formset</code> 的字符串标题</li><li><code>help</code> : 在界面上显示本 <code>formset</code> 的帮助信息</li><li><code>classguid</code> : 本 <code>formset</code> 所 <code>挂载界面</code> 的 <code>GUID值</code></li><li><code>varstore</code> : 变量所用 <code>数据结构</code> 类型</li><li><code>form</code> ： <code>窗体</code> 关键字，与 <code>endform成对</code> 出现，定义 <code>窗体的结构</code></li><li><code>checkbox</code> ： <code>复选框关键字</code> ，与 <code>endcheckbox</code> 成对出现，定义 <code>复选框</code> 供 <code>用户使用</code> 。</li></ul></li></ul><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">///** @file</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">//</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">//    File Explorer Formset</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">//</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">//  Copyright (c) 2004 - 2018, Intel Corporation. All rights reserved.&lt;BR></span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">//  SPDX-License-Identifier: BSD-2-Clause-Patent</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">//</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">//**/</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"FormGuid.h"</span></span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>formset</pre></td></tr><tr><td data-num="13"></td><td><pre>  guid <span class="token operator">=</span> EFI_FILE_EXPLORE_FORMSET_GUID<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  title <span class="token operator">=</span> <span class="token function">STRING_TOKEN</span><span class="token punctuation">(</span>STR_FILE_EXPLORER_TITLE<span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  help <span class="token operator">=</span> <span class="token function">STRING_TOKEN</span><span class="token punctuation">(</span>STR_NULL_STRING<span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  classguid <span class="token operator">=</span> EFI_FILE_EXPLORE_FORMSET_GUID<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre>  form formid <span class="token operator">=</span> FORM_FILE_EXPLORER_ID<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="19"></td><td><pre>       title <span class="token operator">=</span> <span class="token function">STRING_TOKEN</span><span class="token punctuation">(</span>STR_FILE_EXPLORER_TITLE<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre>       label FORM_FILE_EXPLORER_ID<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>       label LABEL_END<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>  endform<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre>  form formid <span class="token operator">=</span> FORM_ADD_NEW_FILE_ID<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="26"></td><td><pre>       title <span class="token operator">=</span> <span class="token function">STRING_TOKEN</span><span class="token punctuation">(</span>STR_ADD_NEW_FILE_TITLE<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre></pre></td></tr><tr><td data-num="28"></td><td><pre>      string</pre></td></tr><tr><td data-num="29"></td><td><pre>          prompt   <span class="token operator">=</span> <span class="token function">STRING_TOKEN</span><span class="token punctuation">(</span>STR_NEW_FILE_NAME_PROMPT<span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="30"></td><td><pre>          help     <span class="token operator">=</span> <span class="token function">STRING_TOKEN</span><span class="token punctuation">(</span>STR_NEW_FILE_NAME_HELP<span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="31"></td><td><pre>          flags    <span class="token operator">=</span> INTERACTIVE<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="32"></td><td><pre>          key      <span class="token operator">=</span> NEW_FILE_NAME_ID<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="33"></td><td><pre>          minsize  <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="34"></td><td><pre>          maxsize  <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="35"></td><td><pre>      endstring<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre></pre></td></tr><tr><td data-num="37"></td><td><pre>      subtitle text <span class="token operator">=</span> <span class="token function">STRING_TOKEN</span><span class="token punctuation">(</span>STR_NULL_STRING<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre></pre></td></tr><tr><td data-num="39"></td><td><pre>       text</pre></td></tr><tr><td data-num="40"></td><td><pre>         help   <span class="token operator">=</span> <span class="token function">STRING_TOKEN</span><span class="token punctuation">(</span>STR_CREATE_FILE_AND_EXIT<span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="41"></td><td><pre>         text   <span class="token operator">=</span> <span class="token function">STRING_TOKEN</span><span class="token punctuation">(</span>STR_CREATE_FILE_AND_EXIT<span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="42"></td><td><pre>         flags  <span class="token operator">=</span> INTERACTIVE<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="43"></td><td><pre>         key    <span class="token operator">=</span> KEY_VALUE_CREATE_FILE_AND_EXIT<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre></pre></td></tr><tr><td data-num="45"></td><td><pre>       text</pre></td></tr><tr><td data-num="46"></td><td><pre>         help   <span class="token operator">=</span> <span class="token function">STRING_TOKEN</span><span class="token punctuation">(</span>STR_NO_CREATE_FILE_AND_EXIT<span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="47"></td><td><pre>         text   <span class="token operator">=</span> <span class="token function">STRING_TOKEN</span><span class="token punctuation">(</span>STR_NO_CREATE_FILE_AND_EXIT<span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="48"></td><td><pre>         flags  <span class="token operator">=</span> INTERACTIVE<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="49"></td><td><pre>         key    <span class="token operator">=</span> KEY_VALUE_NO_CREATE_FILE_AND_EXIT<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>  endform<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="51"></td><td><pre></pre></td></tr><tr><td data-num="52"></td><td><pre>  form formid <span class="token operator">=</span> FORM_ADD_NEW_FOLDER_ID<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="53"></td><td><pre>      title <span class="token operator">=</span> <span class="token function">STRING_TOKEN</span><span class="token punctuation">(</span>STR_ADD_NEW_FOLDER_TITLE<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="54"></td><td><pre></pre></td></tr><tr><td data-num="55"></td><td><pre>      string</pre></td></tr><tr><td data-num="56"></td><td><pre>          prompt   <span class="token operator">=</span> <span class="token function">STRING_TOKEN</span><span class="token punctuation">(</span>STR_NEW_FOLDER_NAME_PROMPT<span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="57"></td><td><pre>          help     <span class="token operator">=</span> <span class="token function">STRING_TOKEN</span><span class="token punctuation">(</span>STR_NEW_FOLDER_NAME_HELP<span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="58"></td><td><pre>          flags    <span class="token operator">=</span> INTERACTIVE<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="59"></td><td><pre>          key      <span class="token operator">=</span> NEW_FOLDER_NAME_ID<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="60"></td><td><pre>          minsize  <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="61"></td><td><pre>          maxsize  <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="62"></td><td><pre>      endstring<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="63"></td><td><pre></pre></td></tr><tr><td data-num="64"></td><td><pre>      subtitle text <span class="token operator">=</span> <span class="token function">STRING_TOKEN</span><span class="token punctuation">(</span>STR_NULL_STRING<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="65"></td><td><pre></pre></td></tr><tr><td data-num="66"></td><td><pre>      text</pre></td></tr><tr><td data-num="67"></td><td><pre>        help   <span class="token operator">=</span> <span class="token function">STRING_TOKEN</span><span class="token punctuation">(</span>STR_CREATE_FOLDER_AND_EXIT<span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="68"></td><td><pre>        text   <span class="token operator">=</span> <span class="token function">STRING_TOKEN</span><span class="token punctuation">(</span>STR_CREATE_FOLDER_AND_EXIT<span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="69"></td><td><pre>        flags  <span class="token operator">=</span> INTERACTIVE<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="70"></td><td><pre>        key    <span class="token operator">=</span> KEY_VALUE_CREATE_FOLDER_AND_EXIT<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="71"></td><td><pre></pre></td></tr><tr><td data-num="72"></td><td><pre>      text</pre></td></tr><tr><td data-num="73"></td><td><pre>        help   <span class="token operator">=</span> <span class="token function">STRING_TOKEN</span><span class="token punctuation">(</span>STR_NO_CREATE_FOLDER_AND_EXIT<span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="74"></td><td><pre>        text   <span class="token operator">=</span> <span class="token function">STRING_TOKEN</span><span class="token punctuation">(</span>STR_NO_CREATE_FOLDER_AND_EXIT<span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="75"></td><td><pre>        flags  <span class="token operator">=</span> INTERACTIVE<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="76"></td><td><pre>        key    <span class="token operator">=</span> KEY_VALUE_NO_CREATE_FOLDER_AND_EXIT<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="77"></td><td><pre>  endform<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="78"></td><td><pre>endformset<span class="token punctuation">;</span></pre></td></tr></table></figure><h1 id="edk2目录介绍"><a class="anchor" href="#edk2目录介绍">#</a> EDK2 目录介绍</h1><ul><li><code>AppPkg</code> : <code>UEFI Application Development Kit</code> 是一系列用来开发 <code>UEFI APP</code> 开发的套件， <code>标准依赖库</code> ，工具以及 <code>demo</code> ，目标是 <code>降低UEFI app</code> 的开发框架</li><li><code>ArmPkg</code> : 提供 <code>ARM框架</code> 相关的 Protocols, 属于 <code>ARM平台上</code> 的通用代码</li><li><code>ArmPlatformPkg</code> : <code>ARM开发板</code> 相关的 <code>UEFI代码</code> ，包 <code>含ARM平台上通用</code> 的一些 <code>组件</code> ， <code>重复利用</code> 这些组件会令 ARM 平台不用的版型之间的移植变得更加容易</li><li><code>BaseTools</code> : 提供了编译 <code>EDK2的相关工具</code> ：AutoGen,Build,GenSec,GenFV,GenFW,GenRds 工具。</li><li><code>Conf</code> :</li><li><code>CryptoPkg</code> : <code>UEFI</code> 定义了 <code>HLOS(high level OS)</code> 和 <code>平台固件之间</code> 的接口，多个安全特性也再去其中，用来提供加密支持</li><li><code>EmbeddedPkg</code> : 为 <code>memory mapped controllers</code> 提供 <code>protocol实现</code> ，是一个简单的 EFI shell（EBL)</li><li><code>EmulatorPkg</code> : <code>Emulator虚拟环境</code> ，用来替代 Nt32Pkg 和 UnixPkg，k 可以跨平台编译</li><li><code>FatPkg</code> : <code>FAT支持包</code></li><li><code>MdeModulePkg</code> : 此包提供符合 <code>UEEI/PI</code> 工业标准的模版，也提供标准相关的开发环境， <code>PPIs/PROTOCOLs/GUIDS</code> 和 <code>依赖库</code></li><li><code>MdePkg</code> : 全程 <code>Module Development Environment Package</code> , 此为特殊的 <code>Package</code> ，包含了用于 <code>开发module</code> 所需要的最小环境。一个 <code>module可</code> 能也会依赖于其他的 <code>Package</code> ，但是所有 modules 必须依赖于 <code>MdePkg</code> .</li><li><code>NetworkPkg</code> : 提供 <code>网络支持的包</code> ，比如：IPV6 网络协议栈 / IPsec 驱动 / ISCSI 驱动 / 网络配置 <code>先关的shell app</code></li><li><code>OvmfPkg</code> : <code>OVM</code> F 是用来给虚拟机 <code>提供UEFI支持的包</code> ，可以使用 <code>QEMU</code> 和 <code>KVM</code> 来引导 <code>OVMF固件</code> ，并进一步引导 <code>HLOS</code></li><li><code>PcAtChipsetPkg</code> : 此包提供了 <code>符合PcAt标准器件</code> 的接口和实现</li><li><code>StdLib</code> : 提供了 <code>标准库UDK</code> 实现， <code>StdLibPrivateInternalFiles</code> 包时用来 <code>给StdLib</code> 使用的，不能用作其他引用</li><li><code>UefiCpuPkg</code> : 提供 <code>兼容UEFI</code> 的 <code>CPU模版</code> 和 <code>库</code></li></ul><h1 id="参考资料"><a class="anchor" href="#参考资料">#</a> 参考资料</h1><ul><li><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxODczMTkyL2FydGljbGUvZGV0YWlscy8xMjYyODc3ODI=">UEFI 原理与编程 - 第三章节内容整理</span></li><li>《UEFI 编程实战》</li></ul><div class="tags"><a href="/tags/BIOS/" rel="tag"><i class="ic i-tag"></i>BIOS</a><a href="/tags/UEFI/" rel="tag"><i class="ic i-tag"></i>UEFI</a><a href="/tags/EDK2/" rel="tag"><i class="ic i-tag"></i>EDK2</a></div></div><footer><div class="meta"><span class="icon"><i class="ic i-eye"></i></span><span>此文章已被阅读次数:</span><span class="waline-pageview-count" id="twikoo_visitors" data-path="BIOS/BIOS工程模块UEFI/">正在加载...</span><span class="item"><span class="icon"><i class="ic i-calendar-check"></i></span><span class="text">更新于</span><time title="修改时间：2023-08-14 23:18:15" itemprop="dateModified" datetime="2023-08-14T23:18:15+08:00">2023-08-14</time></span></div><div class="reward"><button><i class="ic i-heartbeat"></i>赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/assets/wechatpay.png" alt="YuHeShui 微信支付"><p>微信支付</p></div><div><img data-src="/assets/alipay.png" alt="YuHeShui 支付宝"><p>支付宝</p></div><div><img data-src="/assets/paypal.png" alt="YuHeShui 贝宝"><p>贝宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者：</strong>YuHeShui<i class="ic i-at"><em>@</em></i>瓶子的跋涉</li><li class="link"><strong>本文链接：</strong><a href="https://www.blog.foryouos.cn/BIOS/BIOS%E5%B7%A5%E7%A8%8B%E6%A8%A1%E5%9D%97UEFI/" title="BIOS工程模块UEFI">https://www.blog.foryouos.cn/BIOS/BIOS工程模块UEFI/</a></li><li class="license"><strong>版权声明：</strong>本站所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener external nofollow noreferrer" target="_blank"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/BIOS/EDK2%E5%85%A5%E5%8F%A3%E5%87%BD%E6%95%B0/" rel="prev" itemprop="url" data-background-image="https:&#x2F;&#x2F;mmbiz.qpic.cn&#x2F;mmbiz_jpg&#x2F;ORog4TEnkbvthkUaBMX9zWiccSLd09Nd7QWjU01Y3YMYJRtKEefGuR04GQ7MUxESjklibXG4ibibxAYZvpbYKYXEPQ&#x2F;640?wx_fmt&#x3D;jpeg" title="EDK2入口函数"><span class="type">上一篇</span><span class="category"><i class="ic i-flag"></i>BIOS</span><h3>EDK2入口函数</h3></a></div><div class="item right"><a href="/BIOS/%E5%AF%84%E5%AD%98%E5%99%A8%E8%B0%83%E8%AF%95%E5%B7%A5%E5%85%B7/" rel="next" itemprop="url" data-background-image="https:&#x2F;&#x2F;mmbiz.qpic.cn&#x2F;mmbiz_jpg&#x2F;ORog4TEnkbttkVibEE0Mb5JEBzD37WkkY3IaicI2r4aKYfrm3etNEaiaYrv1MNmXy50QG7xbnmE5iaszWlfWIL0zug&#x2F;640?wx_fmt&#x3D;jpeg" title="寄存器调试工具RU&amp;RW的使用"><span class="type">下一篇</span><span class="category"><i class="ic i-flag"></i>BIOS</span><h3>寄存器调试工具RU&RW的使用</h3></a></div></div><div class="wrap" id="wcomments"></div><script type="module" data-pjax="data-pjax">import { init } from 'https://unpkg.com/@waline/client@v2/dist/waline.mjs';

setTimeout(function () {
    init({
        el: '#wcomments',
        serverURL: 'https://foryouos.netlify.app/.netlify/functions/comment',
        lang: 'zh-CN',
        locale: {},
        emoji: ["https://unpkg.com/@waline/emojis@1.0.1/weibo","https://unpkg.com/@waline/emojis@1.0.1/alus","https://unpkg.com/@waline/emojis@1.0.1/bilibili","https://unpkg.com/@waline/emojis@1.0.1/qq","https://unpkg.com/@waline/emojis@1.0.1/tieba","https://unpkg.com/@waline/emojis@1.0.1/tw-emoji"],
        meta: ["nick","mail","link"],
        requiredMeta: ["nick","mail"],
        wordLimit: 0,
        pageSize: 10,
        pageview: true,
        path: window.location.pathname,
        dark: 'html[data-theme="dark"]'
    });
}, 1000)</script></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97"><span class="toc-number">1.</span> <span class="toc-text">模块</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#uefi%E4%B8%BB%E8%A6%81%E6%A8%A1%E5%9D%97"><span class="toc-number">2.</span> <span class="toc-text">UEFI 主要模块</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#dsc%E6%96%87%E4%BB%B6"><span class="toc-number">3.</span> <span class="toc-text">DSC 文件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#defines"><span class="toc-number">3.1.</span> <span class="toc-text">[Defines]</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B"><span class="toc-number">3.1.0.1.</span> <span class="toc-text">示例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#libraryclasses"><span class="toc-number">3.2.</span> <span class="toc-text">[ LibraryClasses ]</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F"><span class="toc-number">3.2.1.</span> <span class="toc-text">语法格式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#components"><span class="toc-number">3.3.</span> <span class="toc-text">[ Components ]</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#buildoptions"><span class="toc-number">3.4.</span> <span class="toc-text">[ BuildOptions ]</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F-2"><span class="toc-number">3.4.1.</span> <span class="toc-text">语法格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-2"><span class="toc-number">3.4.2.</span> <span class="toc-text">示例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F-3"><span class="toc-number">3.5.</span> <span class="toc-text">语法格式</span></a></li></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A0%87%E5%87%86%E5%BC%95%E7%94%A8%E7%A8%8B%E5%BA%8F%E5%B7%A5%E7%A8%8B%E6%A8%A1%E5%9D%97"><span class="toc-number">4.</span> <span class="toc-text">标准引用程序工程模块</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#inf%E6%96%87%E4%BB%B6"><span class="toc-number">5.</span> <span class="toc-text">INF 文件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#defines-2"><span class="toc-number">5.1.</span> <span class="toc-text">[Defines]</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sources"><span class="toc-number">5.2.</span> <span class="toc-text">[Sources]</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#buildoptions-2"><span class="toc-number">5.3.</span> <span class="toc-text">[ BuildOptions ]</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#protocols"><span class="toc-number">5.4.</span> <span class="toc-text">[Protocols]</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#libraryclasses-2"><span class="toc-number">5.5.</span> <span class="toc-text">[ LibraryClasses ]</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#packages"><span class="toc-number">5.6.</span> <span class="toc-text">[Packages]</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#dec%E6%96%87%E4%BB%B6"><span class="toc-number">6.</span> <span class="toc-text">DEC 文件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#defines-3"><span class="toc-number">6.1.</span> <span class="toc-text">[Defines]</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#includes"><span class="toc-number">6.2.</span> <span class="toc-text">[Includes]</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#libraryclasses-3"><span class="toc-number">6.3.</span> <span class="toc-text">[ LibraryClasses ]</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#guids"><span class="toc-number">6.4.</span> <span class="toc-text">[ Guids ]</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BE%E4%BE%8B"><span class="toc-number">6.4.1.</span> <span class="toc-text">举例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#protocols-2"><span class="toc-number">6.5.</span> <span class="toc-text">[Protocols]</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BD%99%E8%8A%82"><span class="toc-number">6.6.</span> <span class="toc-text">其余节</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#fdf%E6%96%87%E4%BB%B6"><span class="toc-number">7.</span> <span class="toc-text">FDF 文件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#defines-4"><span class="toc-number">7.1.</span> <span class="toc-text">[Defines]</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#fd"><span class="toc-number">7.2.</span> <span class="toc-text">[FD]</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A4%E7%89%8C%E5%A3%B0%E6%98%8Etoken-statements"><span class="toc-number">7.2.1.</span> <span class="toc-text">令牌声明 (TOKEN Statements) :</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E5%A3%B0%E6%98%8E"><span class="toc-number">7.2.2.</span> <span class="toc-text">定义声明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%A3%B0%E6%98%8E"><span class="toc-number">7.2.3.</span> <span class="toc-text">设置声明</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#fv"><span class="toc-number">7.3.</span> <span class="toc-text">[ FV ]</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#optionrom"><span class="toc-number">7.4.</span> <span class="toc-text">[ OptionRom ]</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6"><span class="toc-number">8.</span> <span class="toc-text">资源文件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#idf%E6%96%87%E4%BB%B6"><span class="toc-number">8.1.</span> <span class="toc-text">IDF 文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#uni%E6%96%87%E4%BB%B6"><span class="toc-number">8.2.</span> <span class="toc-text">UNI 文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vfr%E6%96%87%E4%BB%B6"><span class="toc-number">8.3.</span> <span class="toc-text">VFR 文件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#edk2%E7%9B%AE%E5%BD%95%E4%BB%8B%E7%BB%8D"><span class="toc-number">9.</span> <span class="toc-text">EDK2 目录介绍</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">10.</span> <span class="toc-text">参考资料</span></a></li></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/BIOS/BIOS%E4%B8%8E%E7%B3%BB%E7%BB%9F%E5%90%AF%E5%8A%A8/" rel="bookmark" title="BIOS与系统启动">BIOS与系统启动</a></li><li><a href="/BIOS/EDK2%E4%B8%8E%E5%8F%8C%E7%B3%BB%E7%BB%9F/" rel="bookmark" title="EDK2安装与双系统">EDK2安装与双系统</a></li><li><a href="/BIOS/UEFI%E4%B8%83%E9%98%B6%E6%AE%B5/" rel="bookmark" title="UEFI概述">UEFI概述</a></li><li><a href="/BIOS/C%E6%8C%87%E9%92%88%E6%93%8D%E4%BD%9C%E5%AF%84%E5%AD%98%E5%99%A8/" rel="bookmark" title="C指针与操作寄存器方法">C指针与操作寄存器方法</a></li><li><a href="/BIOS/EDK2%E5%85%A5%E5%8F%A3%E5%87%BD%E6%95%B0/" rel="bookmark" title="EDK2入口函数">EDK2入口函数</a></li><li class="active"><a href="/BIOS/BIOS%E5%B7%A5%E7%A8%8B%E6%A8%A1%E5%9D%97UEFI/" rel="bookmark" title="BIOS工程模块UEFI">BIOS工程模块UEFI</a></li><li><a href="/BIOS/%E5%AF%84%E5%AD%98%E5%99%A8%E8%B0%83%E8%AF%95%E5%B7%A5%E5%85%B7/" rel="bookmark" title="寄存器调试工具RU&RW的使用">寄存器调试工具RU&RW的使用</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="YuHeShui" data-src="/assets/avatar.jpg"><p class="name" itemprop="name">YuHeShui</p><div class="description" itemprop="description">瓶子的跋涉 & 编程笔记</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">69</span><span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">16</span><span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">37</span><span class="name">标签</span></a></div></nav><div class="social"><a href="https://github.com/foryouos" class="item github" rel="noopener external nofollow noreferrer" title="https:&#x2F;&#x2F;github.com&#x2F;foryouos" target="_blank"><i class="ic i-github"></i></a><a href="https://www.zhihu.com/people/foryouos" class="item zhihu" rel="noopener external nofollow noreferrer" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;foryouos" target="_blank"><i class="ic i-zhihu"></i></a><a href="mailto:foryouos@mail.com" class="item email" rel="noopener external nofollow noreferrer" title="mailto:foryouos@mail.com" target="_blank"><i class="ic i-envelope"></i></a></div><div class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="javascript:void(0);" rel="external nofollow noreferrer"><i class="ic i-user"></i>关于</a><ul class="submenu"><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于本站</a></li><li class="item"><a href="/admiration/" rel="section"><i class="ic i-coffee"></i>赞赏博主</a></li></ul></li><li class="item dropdown"><a href="javascript:void(0);" rel="external nofollow noreferrer"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友链</a></li><li class="item dropdown"><a href="javascript:void(0);" rel="external nofollow noreferrer"><i class="ic i-user"></i>外链</a><ul class="submenu"><li class="item"><a href="https://www.foryouos.cn/" rel="noopener external nofollow noreferrer" target="_blank"><i class="ic i-user"></i>主页</a></li><li class="item"><a href="https://www.so.foryouos.cn/" rel="noopener external nofollow noreferrer" target="_blank"><i class="ic i-magic"></i>搜索</a></li><li class="item"><a href="https://imgtg.com/foryouos" rel="noopener external nofollow noreferrer" target="_blank"><i class="ic i-coffee"></i>图库</a></li></ul></li></div></div></div></div><ul id="quick"><li class="prev pjax"><a href="/BIOS/%E5%AF%84%E5%AD%98%E5%99%A8%E8%B0%83%E8%AF%95%E5%B7%A5%E5%85%B7/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/BIOS/EDK2%E5%85%A5%E5%8F%A3%E5%87%BD%E6%95%B0/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/" title="分类于C++">C++</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/course-1/" title="分类于郑莉老师C++语言程序设计">郑莉老师C++语言程序设计</a></div><span><a href="/computer-science/cpp/course-1/cpp%E7%B1%BB%E7%9A%84%E7%BB%A7%E6%89%BF/">C++类的继承</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/" title="分类于C++">C++</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/course-6/" title="分类于零声笔记">零声笔记</a></div><span><a href="/computer-science/cpp/course-6/Hash/">Hash</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/" title="分类于C++">C++</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/course-5/" title="分类于Qt">Qt</a></div><span><a href="/computer-science/cpp/course-5/Qt%E4%BF%A1%E5%8F%B7%E4%B8%8E%E6%A7%BD/">Qt信号与槽</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/" title="分类于C++">C++</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/course-2/" title="分类于汇编与STl新特征">汇编与STl新特征</a></div><span><a href="/computer-science/cpp/course-2/%E6%8E%92%E5%BA%8F/">排序算法C++</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/" title="分类于C++">C++</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/course-4/" title="分类于C和C++项目">C和C++项目</a></div><span><a href="/computer-science/cpp/course-4/C%E5%91%98%E5%B7%A5%E5%B7%A5%E8%B5%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/">C实现员工工资管理系统</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/" title="分类于C++">C++</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/course-1/" title="分类于郑莉老师C++语言程序设计">郑莉老师C++语言程序设计</a></div><span><a href="/computer-science/cpp/course-1/cpp%E6%95%B0%E6%8D%AE%E5%85%B1%E4%BA%AB%E4%B8%8E%E4%BF%9D%E6%8A%A4/">C++数据共享与保护</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/" title="分类于C++">C++</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/course-4/" title="分类于C和C++项目">C和C++项目</a></div><span><a href="/computer-science/cpp/course-4/Linux%E5%90%8E%E5%8F%B0%E6%9C%8D%E5%8A%A1%E5%99%A8simple/">Linux后台服务器simple</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/" title="分类于C++">C++</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/course-2/" title="分类于汇编与STl新特征">汇编与STl新特征</a></div><span><a href="/computer-science/cpp/course-2/%E7%BB%91%E5%AE%9A%E5%99%A8%E5%8C%85%E8%A3%85%E5%99%A8/">C++11新特性绑定器包装器</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/Linux/" title="分类于Linux">Linux</a></div><span><a href="/computer-science/Linux/linux%E5%85%A5%E9%97%A82/">linux入门2</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于计算机科学">计算机科学</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/" title="分类于C++">C++</a><i class="ic i-angle-right"></i><a href="/categories/computer-science/cpp/course-1/" title="分类于郑莉老师C++语言程序设计">郑莉老师C++语言程序设计</a></div><span><a href="/computer-science/cpp/course-1/cpp%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/">C++异常处理</a></span></li></ul></div><div class="rpost pjax"><h2>最新评论</h2><ul class="leancloud-recent-comment" id="new-comment"><li class="item" v-for="com in coms"><a v-bind:href="root + com.href" data-pjax-state="data-pjax-state"><span class="breadcrumb">{{com.nick}} @ {{com.time}}</span><span>{{com.text}}<br></span></a></li></ul></div></div><div class="status"><div class="copyright">&copy; 2022 -<span itemprop="copyrightYear">2023</span><span class="with-love"><i class="ic i-sakura rotate"></i></span><span class="author" itemprop="copyrightHolder">YuHeShui @ foryouos</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i></span><span title="站点总字数">759k 字</span><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="ic i-coffee"></i></span><span title="站点阅读时长">11:30</span></div><div class="powered-by">基于 <a href="https://hexo.io/" rel="noopener external nofollow noreferrer" target="_blank">Hexo</a> & Theme.<a href="https://github.com/theme-shoka-x/hexo-theme-shokaX/" rel="noopener external nofollow noreferrer" target="_blank">ShokaX</a></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"BIOS/BIOS工程模块UEFI/",favicon:{show:"不负韶华",hide:"以梦为马！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,chart:!1,copy_tex:!1,katex:!1,mermaid:!1,audio:void 0,fancybox:!0,nocopy:!1,outime:!0,template:'<div class="note warning"><p><span class="label warning">文章时效性提示</span><br>这是一篇发布于 {{publish}} 天前，最后一次更新在 {{updated}} 天前的文章，部分信息可能已经发生改变，请注意甄别。</p></div>',quiz:{choice:"单选题",multiple:"多选题",true_false:"判断题",essay:"问答题",gap_fill:"填空题",mistake:"错题备注"},ignores:[e=>e.includes("#"),e=>new RegExp(LOCAL.path+"$").test(e),[]]}</script><script src="https://polyfill.io/v3/polyfill.min.js?features=default,fetch"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/pace/1.0.2/pace.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/algoliasearch/4.12.1/algoliasearch-lite.umd.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/instantsearch.js/4.39.0/instantsearch.production.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/quicklink/2.2.0/quicklink.umd.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/??jquery/3.5.1/jquery.min.js,fancybox/3.5.7/jquery.fancybox.min.js,justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js" async></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/KaTeX/0.12.0/contrib/copy-tex.min.js" async></script><script src="https://unpkg.com/theme-shokax-pjax@latest/pjax.shokax.min.js"></script><script src="https://unpkg.com/theme-shokax-anime@latest/anime.shokax.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/lozad.js/1.16.0/lozad.min.js"></script><script src="https://unpkg.com/frappe-charts@1.5.0/dist/frappe-charts.min.iife.js"></script><script src="/js/app.js?v=0.3.6"></script><script data-pjax="data-pjax">var _hmt=_hmt||[];!function(){var e=document.createElement("script"),t=(e.src="https://hm.baidu.com/hm.js?e3ba29befb93fdf32bbc553d0e5bee92",e.async=!0,document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)}()</script><script type="module" data-pjax>let items = []
        import { RecentComments } from 'https://unpkg.com/@waline/client@v2/dist/waline.mjs'
        RecentComments({
          serverURL: 'https://foryouos.netlify.app/.netlify/functions/comment',
          count: 10,
        }).then(({ comments }) => {
          comments.forEach(function (item) {
              let cText = (item.orig.length > 50) ? item.orig.substring(0,50)+'...' : item.orig
              item.url = item.url !== '/' ?  '/' + item.url : item.url;
              const siteLink = item.url + "#" + item.objectId
              items.push({
                  href: siteLink,
                  nick: item.nick,
                  time: item.insertedAt.split('T').shift(),
                  text: cText
              })
          })
          Vue.createApp({
            data() {
                return {
                    coms: items,
                    root: ''
                }
            }
          }).mount('#new-comment')
        }).catch(function (err) {
          console.error(err)
        })</script></body></html><!-- rebuild by hexo-renderer-multi-next-markdown-it -->